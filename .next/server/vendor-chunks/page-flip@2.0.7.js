/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/page-flip@2.0.7";
exports.ids = ["vendor-chunks/page-flip@2.0.7"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/page-flip@2.0.7/node_modules/page-flip/dist/js/page-flip.browser.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/.pnpm/page-flip@2.0.7/node_modules/page-flip/dist/js/page-flip.browser.js ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("!function(t,e){ true?e(exports):0}(this,(function(t){\"use strict\";class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();for(let t of this.state.area)null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,s,n):this.drawLoader(e,{x:0,y:0},s,n),e.restore()}simpleDraw(t){const e=this.render.getRect(),i=this.render.getContext(),s=e.pageWidth,n=e.height,h=1===t?e.left+e.pageWidth:e.left,r=e.top;this.isLoad?i.drawImage(this.image,h,r,s,n):this.drawLoader(i,{x:h,y:r},s,n)}drawLoader(t,e,i,s){t.beginPath(),t.strokeStyle=\"rgb(200, 200, 200)\",t.fillStyle=\"rgb(255, 255, 255)\",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,s-1),t.stroke(),t.fill();const n={x:e.x+i/2,y:e.y+s/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity(\"hard\"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity(\"hard\"))}getSpread(){return\"landscape\"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error(\"Invalid page number\")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error(\"Invalid page\");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):\"landscape\"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends s{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(const t of this.imagesHref){const e=new i(this.render,t,\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class h{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return h.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x;return Math.acos((i*s+n*h)/(Math.sqrt(i*i+n*n)*Math.sqrt(s*s+h*h)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(h.GetDistanceBetweenTwoPoint(t,i)<=e)return i;const s=t.x,n=t.y,r=i.x,o=i.y;let a=Math.sqrt(Math.pow(e,2)*Math.pow(s-r,2)/(Math.pow(s-r,2)+Math.pow(n-o,2)))+s;i.x<0&&(a*=-1);let g=(a-s)*(n-o)/(s-r)+n;return s-r+n===0&&(g=e),{x:a,y:g}}static GetIntersectBetweenTwoSegment(t,e,i){return h.PointInRect(t,h.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x,r=t[0].x*t[1].y-t[1].x*t[0].y,o=e[0].x*e[1].y-e[1].x*e[0].y,a=i*o-s*r,g=n*o-h*r,l=-(r*h-o*n)/(i*h-s*n),d=-(i*o-s*r)/(i*h-s*n);if(isFinite(l)&&isFinite(d))return{x:l,y:d};if(Math.abs(a-g)<.1)throw new Error(\"Segment included\");return null}static GetCordsFromTwoPoint(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.max(i,s),h=[t];function r(t,e,i,s,n){return e>t?t+n*(i/s):e<t?t-n*(i/s):t}for(let o=1;o<=n;o+=1)h.push({x:r(t.x,e.x,i,n,o),y:r(t.y,e.y,s,n,o)});return h}}class r extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add(\"stf__item\"),this.element.classList.add(\"--\"+i)}newTemporaryCopy(){return\"hard\"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new r(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove(\"--simple\");const h=`\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\"hard\"===e?this.drawHard(h):this.drawSoft(i,h)}drawHard(t=\"\"){const e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,s=t+\"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \"+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=s}drawSoft(t,e=\"\"){let i=\"polygon( \";for(const t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};e=h.GetRotatedPoint(e,{x:0,y:0},this.state.angle),i+=e.x+\"px \"+e.y+\"px, \"}i=i.slice(0,-2),i+=\")\";const s=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=s}simpleDraw(t){const e=this.render.getRect(),i=e.pageWidth,s=e.height,n=1===t?e.left+e.pageWidth:e.left,h=e.top;this.element.classList.add(\"--simple\"),this.element.style.cssText=`\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove(\"--left\",\"--right\"),this.element.classList.add(1===t?\"--right\":\"--left\")}setDrawingDensity(t){this.element.classList.remove(\"--soft\",\"--hard\"),this.element.classList.add(\"--\"+t),super.setDrawingDensity(t)}}class o extends s{constructor(t,e,i,s){super(t,e),this.element=i,this.pagesElement=s}load(){for(const t of this.pagesElement){const e=new r(this.render,t,\"hard\"===t.dataset.density?\"hard\":\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class a{constructor(t,e,i,s){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(s,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||\"bottom\"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),\"top\"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):\"top\"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return\"top\"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e=\"top\"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error(\"Point is too small\");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,i=\"bottom\"===this.corner?this.pageHeight-t.y:t.y;let s=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(s=-s);const n=Math.PI-s;if(!isFinite(s)||n>=0&&n<.003)throw new Error(\"The G point is too small\");return\"bottom\"===this.corner&&(s=-s),s}getPageRect(t){return\"top\"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};\"top\"===this.corner?(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,i){let s=t;const n=h.LimitPointToCircle(e,this.pageWidth,s);s!==n&&(s=n,this.updateAngleAndGeometry(s));const r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let o=this.rect.bottomRight,a=this.rect.topLeft;if(\"bottom\"===this.corner&&(o=this.rect.topRight,a=this.rect.bottomLeft),o.x<=0){const t=h.LimitPointToCircle(i,r,a);t!==s&&(s=t,this.updateAngleAndGeometry(s))}return s}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state=\"read\",this.render=t,this.app=e}fold(t){this.setState(\"user_fold\"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState(\"flipping\");const i=e.height/10,s=\"bottom\"===this.calc.getCorner()?e.height-i:i,n=\"bottom\"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:s}),this.animateFlippingTo({x:e.pageWidth-i,y:s},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();const e=this.render.convertToBook(t),i=this.getBoundsRect(),s=this.getDirectionByPoint(e),n=e.y>=i.height/2?\"bottom\":\"top\";if(!this.checkDirection(s))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(s),this.bottomPage=this.app.getPageCollection().getBottomPage(s),\"landscape\"===this.render.getOrientation())if(1===s){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}return this.render.setDirection(s),this.calc=new a(s,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const i=this.app.getPageCollection().getCurrentSpreadIndex(),s=this.app.getPageCollection().getSpreadIndexByPage(t);try{s>i&&(this.app.getPageCollection().setCurrentSpreadIndex(s-1),this.flipNext(e)),s<i&&(this.app.getPageCollection().setCurrentSpreadIndex(s+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:\"top\"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:\"top\"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),i=\"bottom\"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState(\"read\",\"fold_corner\"))return;const e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState(\"fold_corner\"),this.calc.calc({x:i-1,y:1});const s=50,n=\"bottom\"===this.calc.getCorner()?e.height-1:1,h=\"bottom\"===this.calc.getCorner()?e.height-s:s;this.animateFlippingTo({x:i-1,y:n},{x:i-s,y:h},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState(\"read\"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,s=!0){const n=h.GetCordsFromTwoPoint(t,e),r=[];for(const t of n)r.push(()=>this.do(t));const o=this.getAnimationDuration(n.length);this.render.startAnimation(r,o,()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),s&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState(\"read\"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if(\"portrait\"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),i=e.pageWidth,s=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);return n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<s||n.x>e.width-s)&&(n.y<s||n.y>e.height-s)}}class l{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const i=new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t=\"landscape\";const e=this.getBlockWidth(),i=e/2,s=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let h=this.setting.width,r=this.setting.height,o=i-h;return\"stretch\"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t=\"portrait\"),h=\"portrait\"===t?this.getBlockWidth():this.getBlockWidth()/2,h>this.setting.maxWidth&&(h=this.setting.maxWidth),r=h/n,r>this.getBlockHeight()&&(r=this.getBlockHeight(),h=r*n),o=\"portrait\"===t?i-h/2-h:i-h):e<2*h&&this.app.getSettings().usePortrait&&(t=\"portrait\",o=i-h/2-h),this.boundsRect={left:o,top:s-r/2,width:2*h,height:r,pageWidth:h},t}setShadowData(t,e,i,s){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:s,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&\"portrait\"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class d extends l{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext(\"2d\")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),\"portrait\"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();\"portrait\"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);const s=this.ctx.createLinearGradient(0,0,e,0);s.addColorStop(0,\"rgba(0, 0, 0, 0)\"),s.addColorStop(.4,\"rgba(0, 0, 0, 0.2)\"),s.addColorStop(.49,\"rgba(0, 0, 0, 0.1)\"),s.addColorStop(.5,\"rgba(0, 0, 0, 0.5)\"),s.addColorStop(.51,\"rgba(0, 0, 0, 0.4)\"),s.addColorStop(1,\"rgba(0, 0, 0, 0)\"),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),i.addColorStop(1,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,\"rgba(0, 0, 0, 0)\"),i.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,s,0);0===this.shadow.direction?(this.ctx.translate(-s,-100),n.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.9,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.7,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(0,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(0,-100),n.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.1,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.3,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(1,\"rgba(0, 0, 0, 0)\")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,s,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle=\"white\",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class p{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(i)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||\"read\"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),\"read\"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);let s=!1;if(null!==this.touchPoint){const t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"),s=!0),this.touchPoint=null}this.app.userStop(i,s)}},this.parentElement=t,t.classList.add(\"stf__parent\"),t.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__wrapper\"></div>'),this.wrapper=t.querySelector(\".stf__wrapper\"),this.app=e;const s=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*s+\"px\",t.style.minHeight=i.minHeight+\"px\",\"fixed\"===i.size&&(t.style.minWidth=i.width*s+\"px\",t.style.minHeight=i.height+\"px\"),i.autoSize&&(t.style.width=\"100%\",t.style.maxWidth=2*i.maxWidth+\"px\"),t.style.display=\"block\",window.addEventListener(\"resize\",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove(\"--portrait\",\"--landscape\"),\"portrait\"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+\"%\"),this.wrapper.classList.add(\"--portrait\")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+\"%\"),this.wrapper.classList.add(\"--landscape\")),this.update()}removeHandlers(){window.removeEventListener(\"resize\",this.onResize),this.distElement.removeEventListener(\"mousedown\",this.onMouseDown),this.distElement.removeEventListener(\"touchstart\",this.onTouchStart),window.removeEventListener(\"mousemove\",this.onMouseMove),window.removeEventListener(\"touchmove\",this.onTouchMove),window.removeEventListener(\"mouseup\",this.onMouseUp),window.removeEventListener(\"touchend\",this.onTouchEnd)}setHandlers(){window.addEventListener(\"resize\",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener(\"mousedown\",this.onMouseDown),this.distElement.addEventListener(\"touchstart\",this.onTouchStart),window.addEventListener(\"mousemove\",this.onMouseMove),window.addEventListener(\"touchmove\",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener(\"mouseup\",this.onMouseUp),window.addEventListener(\"touchend\",this.onTouchEnd))}getMousePos(t,e){const i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||![\"a\",\"button\"].includes(t.tagName.toLowerCase())}}class c extends p{constructor(t,e,i,s){super(t,e,i),this.wrapper.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__block\"></div>'),this.distElement=t.querySelector(\".stf__block\"),this.items=s;for(const t of s)this.distElement.appendChild(t);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML=\"\";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class u extends p{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class=\"stf__canvas\"></canvas>',this.canvas=t.querySelectorAll(\"canvas\")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue(\"width\"),10),i=parseInt(t.getPropertyValue(\"height\"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class w extends l{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML(\"beforeend\",'<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'),this.outerShadow=this.element.querySelector(\".stf__outerShadow\"),this.innerShadow=this.element.querySelector(\".stf__innerShadow\"),this.hardShadow=this.element.querySelector(\".stf__hardShadow\"),this.hardInnerShadow=this.element.querySelector(\".stf__hardInnerShadow\")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText=\"display: none\",this.innerShadow.style.cssText=\"display: none\",this.hardShadow.style.cssText=\"display: none\",this.hardInnerShadow.style.cssText=\"display: none\"}reload(){this.element.querySelector(\".stf__outerShadow\")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let s=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0);\":\"transform: translate3d(0, 0, 0) rotateY(180deg);\",this.hardInnerShadow.style.cssText=s}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0) rotateY(180deg);\":\"transform: translate3d(0, 0, 0);\",this.hardShadow.style.cssText=i}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,s=0===this.getDirection()?\"to left\":\"to right\",n=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,o=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let a=\"polygon( \";for(const t of o){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:i,y:100},r),a+=e.x+\"px \"+e.y+\"px, \"}a=a.slice(0,-2),a+=\")\";const g=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${e}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${r}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;this.innerShadow.style.cssText=g}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,s=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?\"to right\":\"to left\",r=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let o=\"polygon( \";for(const t of r)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:s,y:100},i),o+=e.x+\"px \"+e.y+\"px, \"}o=o.slice(0,-2),o+=\")\";const a=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x-s}px, ${e.y-100}px, 0) rotate(${i}rad);\\n            clip-path: ${o};\\n            -webkit-clip-path: ${o};\\n        `;this.outerShadow.style.cssText=a}drawLeftPage(){\"portrait\"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;\"portrait\"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&(\"soft\"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText=\"display: none\"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:\"fixed\",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),\"stretch\"!==e.size&&\"fixed\"!==e.size)throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');if(e.width<=0||e.height<=0)throw new Error(\"Invalid width or height\");if(e.flippingTime<=0)throw new Error(\"Invalid flipping time\");return\"stretch\"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&\"undefined\"!=typeof document){var s=document.head||document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",\"top\"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(const s of this.events.get(t))s({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new x).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new d(this,this.setting,e),this.flipController=new g(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new c(this.block,this,this.setting,t),this.render=new w(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t=\"top\"){this.flipController.flipNext(t)}flipPrev(t=\"top\"){this.flipController.flipPrev(t)}flip(t,e=\"top\"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger(\"changeState\",this,t)}updatePageIndex(t){this.trigger(\"flip\",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger(\"changeOrientation\",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&h.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,\"__esModule\",{value:!0})}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vcGFnZS1mbGlwQDIuMC43L25vZGVfbW9kdWxlcy9wYWdlLWZsaXAvZGlzdC9qcy9wYWdlLWZsaXAuYnJvd3Nlci5qcyIsIm1hcHBpbmdzIjoiQUFBQSxlQUFlLEtBQW9ELFlBQVksQ0FBZ0YsQ0FBQyxtQkFBbUIsYUFBYSxRQUFRLGlCQUFpQixZQUFZLDBCQUEwQixRQUFRLGdDQUFnQyxnRkFBZ0YsY0FBYywrQ0FBK0MscUJBQXFCLHlCQUF5QixlQUFlLHNCQUFzQixZQUFZLG1CQUFtQixXQUFXLGtCQUFrQix1QkFBdUIsOEJBQThCLGdCQUFnQixxREFBcUQsa0JBQWtCLG1CQUFtQixvQkFBb0IsOEJBQThCLGFBQWEsMkJBQTJCLGVBQWUsNkJBQTZCLGtCQUFrQixtQkFBbUIsb0dBQW9HLFFBQVEscUpBQXFKLDRDQUE0QyxvR0FBb0csbUdBQW1HLFFBQVEsa0JBQWtCLGNBQWMsNEhBQTRILCtEQUErRCxRQUFRLE1BQU0sb0JBQW9CLGdKQUFnSixTQUFTLHFCQUFxQixtTUFBbU0sT0FBTyxxQ0FBcUMsZUFBZSxFQUFFLG1CQUFtQixZQUFZLG1CQUFtQixZQUFZLHNCQUFzQixRQUFRLGlCQUFpQixrTkFBa04sVUFBVSxjQUFjLGVBQWUsK0NBQStDLFlBQVksb0JBQW9CLGtDQUFrQyxRQUFRLHdGQUF3RixZQUFZLG9CQUFvQixnSUFBZ0ksWUFBWSwwRkFBMEYsd0JBQXdCLHlCQUF5QixZQUFZLFdBQVcseUNBQXlDLFlBQVksZUFBZSx5QkFBeUIsV0FBVyxrQkFBa0IsV0FBVyxrREFBa0QsdUNBQXVDLFVBQVUsOEJBQThCLGtEQUFrRCxVQUFVLDhCQUE4QixnQ0FBZ0MsbUJBQW1CLGdDQUFnQyw0R0FBNEcsMERBQTBELDhEQUE4RCxpQkFBaUIsZ0NBQWdDLDJGQUEyRiwwREFBMEQsOEVBQThFLFdBQVcsK0ZBQStGLFdBQVcseUVBQXlFLHNCQUFzQiw2QkFBNkIsYUFBYSx3RUFBd0UscUNBQXFDLHdEQUF3RCx3QkFBd0Is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QStCLGNBQWMsb0JBQW9CLFFBQVEsaUZBQWlGLE9BQU8sc0JBQXNCLG9CQUFvQiwyREFBMkQsZ0JBQWdCLElBQUksaUJBQWlCLGtJQUFrSSxVQUFVLHNDQUFzQyxTQUFTLHVDQUF1QyxrQkFBa0IsNENBQTRDLDRCQUE0QixzTkFBc04sMkNBQTJDLDhEQUE4RCxFQUFFLElBQUksZ0JBQWdCLG9UQUFvVCwyQ0FBMkMsOERBQThELEVBQUUsSUFBSSxvQkFBb0IseUNBQXlDLDJIQUEySCx5Q0FBeUMsRUFBRSxrQkFBa0IseUNBQXlDLGdNQUFnTSx5Q0FBeUMsRUFBRSxRQUFRLHFDQUFxQyxpQkFBaUIsc0JBQXNCLGlCQUFpQixzQkFBc0IsY0FBYyxtQkFBbUIsa0JBQWtCLGdDQUFnQyxrQkFBa0IsZ0NBQWdDLGdCQUFnQixvQ0FBb0MsZUFBZSxtQ0FBbUMsbUJBQW1CLDRCQUE0QixxQkFBcUIsc0ZBQXNGLGVBQWUsaUNBQWlDLHNCQUFzQix3Q0FBd0MsV0FBVyw2QkFBNkIsWUFBWSxtQkFBbUIsb0JBQW9CLDJCQUEyQixpQkFBaUIsb0NBQW9DLGdCQUFnQiw2QkFBNkIsY0FBYyxvQkFBb0IsUUFBUSxlQUFlLFdBQVcsc0NBQXNDLG9CQUFvQixrQkFBa0Isa0JBQWtCLDREQUE0RCxjQUFjLDhNQUE4TSxpQkFBaUIseUhBQXlILHVDQUF1QyxTQUFTLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb29wZXJhdGl2YS1hZ3JpY29sYS1kZWktY29sbGkvLi9ub2RlX21vZHVsZXMvLnBucG0vcGFnZS1mbGlwQDIuMC43L25vZGVfbW9kdWxlcy9wYWdlLWZsaXAvZGlzdC9qcy9wYWdlLWZsaXAuYnJvd3Nlci5qcz9hY2EyIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP2UoZXhwb3J0cyk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJleHBvcnRzXCJdLGUpOmUoKHQ9dHx8c2VsZikuU3Q9e30pfSh0aGlzLChmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtjbGFzcyBle2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5zdGF0ZT17YW5nbGU6MCxhcmVhOltdLHBvc2l0aW9uOnt4OjAseTowfSxoYXJkQW5nbGU6MCxoYXJkRHJhd2luZ0FuZ2xlOjB9LHRoaXMuY3JlYXRlZERlbnNpdHk9ZSx0aGlzLm5vd0RyYXdpbmdEZW5zaXR5PXRoaXMuY3JlYXRlZERlbnNpdHksdGhpcy5yZW5kZXI9dH1zZXREZW5zaXR5KHQpe3RoaXMuY3JlYXRlZERlbnNpdHk9dCx0aGlzLm5vd0RyYXdpbmdEZW5zaXR5PXR9c2V0RHJhd2luZ0RlbnNpdHkodCl7dGhpcy5ub3dEcmF3aW5nRGVuc2l0eT10fXNldFBvc2l0aW9uKHQpe3RoaXMuc3RhdGUucG9zaXRpb249dH1zZXRBbmdsZSh0KXt0aGlzLnN0YXRlLmFuZ2xlPXR9c2V0QXJlYSh0KXt0aGlzLnN0YXRlLmFyZWE9dH1zZXRIYXJkRHJhd2luZ0FuZ2xlKHQpe3RoaXMuc3RhdGUuaGFyZERyYXdpbmdBbmdsZT10fXNldEhhcmRBbmdsZSh0KXt0aGlzLnN0YXRlLmhhcmRBbmdsZT10LHRoaXMuc3RhdGUuaGFyZERyYXdpbmdBbmdsZT10fXNldE9yaWVudGF0aW9uKHQpe3RoaXMub3JpZW50YXRpb249dH1nZXREcmF3aW5nRGVuc2l0eSgpe3JldHVybiB0aGlzLm5vd0RyYXdpbmdEZW5zaXR5fWdldERlbnNpdHkoKXtyZXR1cm4gdGhpcy5jcmVhdGVkRGVuc2l0eX1nZXRIYXJkQW5nbGUoKXtyZXR1cm4gdGhpcy5zdGF0ZS5oYXJkQW5nbGV9fWNsYXNzIGkgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHQsZSxpKXtzdXBlcih0LGkpLHRoaXMuaW1hZ2U9bnVsbCx0aGlzLmlzTG9hZD0hMSx0aGlzLmxvYWRpbmdBbmdsZT0wLHRoaXMuaW1hZ2U9bmV3IEltYWdlLHRoaXMuaW1hZ2Uuc3JjPWV9ZHJhdyh0KXtjb25zdCBlPXRoaXMucmVuZGVyLmdldENvbnRleHQoKSxpPXRoaXMucmVuZGVyLmNvbnZlcnRUb0dsb2JhbCh0aGlzLnN0YXRlLnBvc2l0aW9uKSxzPXRoaXMucmVuZGVyLmdldFJlY3QoKS5wYWdlV2lkdGgsbj10aGlzLnJlbmRlci5nZXRSZWN0KCkuaGVpZ2h0O2Uuc2F2ZSgpLGUudHJhbnNsYXRlKGkueCxpLnkpLGUuYmVnaW5QYXRoKCk7Zm9yKGxldCB0IG9mIHRoaXMuc3RhdGUuYXJlYSludWxsIT09dCYmKHQ9dGhpcy5yZW5kZXIuY29udmVydFRvR2xvYmFsKHQpLGUubGluZVRvKHQueC1pLngsdC55LWkueSkpO2Uucm90YXRlKHRoaXMuc3RhdGUuYW5nbGUpLGUuY2xpcCgpLHRoaXMuaXNMb2FkP2UuZHJhd0ltYWdlKHRoaXMuaW1hZ2UsMCwwLHMsbik6dGhpcy5kcmF3TG9hZGVyKGUse3g6MCx5OjB9LHMsbiksZS5yZXN0b3JlKCl9c2ltcGxlRHJhdyh0KXtjb25zdCBlPXRoaXMucmVuZGVyLmdldFJlY3QoKSxpPXRoaXMucmVuZGVyLmdldENvbnRleHQoKSxzPWUucGFnZVdpZHRoLG49ZS5oZWlnaHQsaD0xPT09dD9lLmxlZnQrZS5wYWdlV2lkdGg6ZS5sZWZ0LHI9ZS50b3A7dGhpcy5pc0xvYWQ/aS5kcmF3SW1hZ2UodGhpcy5pbWFnZSxoLHIscyxuKTp0aGlzLmRyYXdMb2FkZXIoaSx7eDpoLHk6cn0scyxuKX1kcmF3TG9hZGVyKHQsZSxpLHMpe3QuYmVnaW5QYXRoKCksdC5zdHJva2VTdHlsZT1cInJnYigyMDAsIDIwMCwgMjAwKVwiLHQuZmlsbFN0eWxlPVwicmdiKDI1NSwgMjU1LCAyNTUpXCIsdC5saW5lV2lkdGg9MSx0LnJlY3QoZS54KzEsZS55KzEsaS0xLHMtMSksdC5zdHJva2UoKSx0LmZpbGwoKTtjb25zdCBuPXt4OmUueCtpLzIseTplLnkrcy8yfTt0LmJlZ2luUGF0aCgpLHQubGluZVdpZHRoPTEwLHQuYXJjKG4ueCxuLnksMjAsdGhpcy5sb2FkaW5nQW5nbGUsMypNYXRoLlBJLzIrdGhpcy5sb2FkaW5nQW5nbGUpLHQuc3Ryb2tlKCksdC5jbG9zZVBhdGgoKSx0aGlzLmxvYWRpbmdBbmdsZSs9LjA3LHRoaXMubG9hZGluZ0FuZ2xlPj0yKk1hdGguUEkmJih0aGlzLmxvYWRpbmdBbmdsZT0wKX1sb2FkKCl7dGhpcy5pc0xvYWR8fCh0aGlzLmltYWdlLm9ubG9hZD0oKT0+e3RoaXMuaXNMb2FkPSEwfSl9bmV3VGVtcG9yYXJ5Q29weSgpe3JldHVybiB0aGlzfWdldFRlbXBvcmFyeUNvcHkoKXtyZXR1cm4gdGhpc31oaWRlVGVtcG9yYXJ5Q29weSgpe319Y2xhc3Mgc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMucGFnZXM9W10sdGhpcy5jdXJyZW50UGFnZUluZGV4PTAsdGhpcy5jdXJyZW50U3ByZWFkSW5kZXg9MCx0aGlzLmxhbmRzY2FwZVNwcmVhZD1bXSx0aGlzLnBvcnRyYWl0U3ByZWFkPVtdLHRoaXMucmVuZGVyPWUsdGhpcy5hcHA9dCx0aGlzLmN1cnJlbnRQYWdlSW5kZXg9MCx0aGlzLmlzU2hvd0NvdmVyPXRoaXMuYXBwLmdldFNldHRpbmdzKCkuc2hvd0NvdmVyfWRlc3Ryb3koKXt0aGlzLnBhZ2VzPVtdfWNyZWF0ZVNwcmVhZCgpe3RoaXMubGFuZHNjYXBlU3ByZWFkPVtdLHRoaXMucG9ydHJhaXRTcHJlYWQ9W107Zm9yKGxldCB0PTA7dDx0aGlzLnBhZ2VzLmxlbmd0aDt0KyspdGhpcy5wb3J0cmFpdFNwcmVhZC5wdXNoKFt0XSk7bGV0IHQ9MDt0aGlzLmlzU2hvd0NvdmVyJiYodGhpcy5wYWdlc1swXS5zZXREZW5zaXR5KFwiaGFyZFwiKSx0aGlzLmxhbmRzY2FwZVNwcmVhZC5wdXNoKFt0XSksdCsrKTtmb3IobGV0IGU9dDtlPHRoaXMucGFnZXMubGVuZ3RoO2UrPTIpZTx0aGlzLnBhZ2VzLmxlbmd0aC0xP3RoaXMubGFuZHNjYXBlU3ByZWFkLnB1c2goW2UsZSsxXSk6KHRoaXMubGFuZHNjYXBlU3ByZWFkLnB1c2goW2VdKSx0aGlzLnBhZ2VzW2VdLnNldERlbnNpdHkoXCJoYXJkXCIpKX1nZXRTcHJlYWQoKXtyZXR1cm5cImxhbmRzY2FwZVwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKT90aGlzLmxhbmRzY2FwZVNwcmVhZDp0aGlzLnBvcnRyYWl0U3ByZWFkfWdldFNwcmVhZEluZGV4QnlQYWdlKHQpe2NvbnN0IGU9dGhpcy5nZXRTcHJlYWQoKTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKylpZih0PT09ZVtpXVswXXx8dD09PWVbaV1bMV0pcmV0dXJuIGk7cmV0dXJuIG51bGx9Z2V0UGFnZUNvdW50KCl7cmV0dXJuIHRoaXMucGFnZXMubGVuZ3RofWdldFBhZ2VzKCl7cmV0dXJuIHRoaXMucGFnZXN9Z2V0UGFnZSh0KXtpZih0Pj0wJiZ0PHRoaXMucGFnZXMubGVuZ3RoKXJldHVybiB0aGlzLnBhZ2VzW3RdO3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFnZSBudW1iZXJcIil9bmV4dEJ5KHQpe2NvbnN0IGU9dGhpcy5wYWdlcy5pbmRleE9mKHQpO3JldHVybiBlPHRoaXMucGFnZXMubGVuZ3RoLTE/dGhpcy5wYWdlc1tlKzFdOm51bGx9cHJldkJ5KHQpe2NvbnN0IGU9dGhpcy5wYWdlcy5pbmRleE9mKHQpO3JldHVybiBlPjA/dGhpcy5wYWdlc1tlLTFdOm51bGx9Z2V0RmxpcHBpbmdQYWdlKHQpe2NvbnN0IGU9dGhpcy5jdXJyZW50U3ByZWFkSW5kZXg7aWYoXCJwb3J0cmFpdFwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKSlyZXR1cm4gMD09PXQ/dGhpcy5wYWdlc1tlXS5uZXdUZW1wb3JhcnlDb3B5KCk6dGhpcy5wYWdlc1tlLTFdO3tjb25zdCBpPTA9PT10P3RoaXMuZ2V0U3ByZWFkKClbZSsxXTp0aGlzLmdldFNwcmVhZCgpW2UtMV07cmV0dXJuIDE9PT1pLmxlbmd0aHx8MD09PXQ/dGhpcy5wYWdlc1tpWzBdXTp0aGlzLnBhZ2VzW2lbMV1dfX1nZXRCb3R0b21QYWdlKHQpe2NvbnN0IGU9dGhpcy5jdXJyZW50U3ByZWFkSW5kZXg7aWYoXCJwb3J0cmFpdFwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKSlyZXR1cm4gMD09PXQ/dGhpcy5wYWdlc1tlKzFdOnRoaXMucGFnZXNbZS0xXTt7Y29uc3QgaT0wPT09dD90aGlzLmdldFNwcmVhZCgpW2UrMV06dGhpcy5nZXRTcHJlYWQoKVtlLTFdO3JldHVybiAxPT09aS5sZW5ndGg/dGhpcy5wYWdlc1tpWzBdXTowPT09dD90aGlzLnBhZ2VzW2lbMV1dOnRoaXMucGFnZXNbaVswXV19fXNob3dOZXh0KCl7dGhpcy5jdXJyZW50U3ByZWFkSW5kZXg8dGhpcy5nZXRTcHJlYWQoKS5sZW5ndGgmJih0aGlzLmN1cnJlbnRTcHJlYWRJbmRleCsrLHRoaXMuc2hvd1NwcmVhZCgpKX1zaG93UHJldigpe3RoaXMuY3VycmVudFNwcmVhZEluZGV4PjAmJih0aGlzLmN1cnJlbnRTcHJlYWRJbmRleC0tLHRoaXMuc2hvd1NwcmVhZCgpKX1nZXRDdXJyZW50UGFnZUluZGV4KCl7cmV0dXJuIHRoaXMuY3VycmVudFBhZ2VJbmRleH1zaG93KHQ9bnVsbCl7aWYobnVsbD09PXQmJih0PXRoaXMuY3VycmVudFBhZ2VJbmRleCksdDwwfHx0Pj10aGlzLnBhZ2VzLmxlbmd0aClyZXR1cm47Y29uc3QgZT10aGlzLmdldFNwcmVhZEluZGV4QnlQYWdlKHQpO251bGwhPT1lJiYodGhpcy5jdXJyZW50U3ByZWFkSW5kZXg9ZSx0aGlzLnNob3dTcHJlYWQoKSl9Z2V0Q3VycmVudFNwcmVhZEluZGV4KCl7cmV0dXJuIHRoaXMuY3VycmVudFNwcmVhZEluZGV4fXNldEN1cnJlbnRTcHJlYWRJbmRleCh0KXtpZighKHQ+PTAmJnQ8dGhpcy5nZXRTcHJlYWQoKS5sZW5ndGgpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFnZVwiKTt0aGlzLmN1cnJlbnRTcHJlYWRJbmRleD10fXNob3dTcHJlYWQoKXtjb25zdCB0PXRoaXMuZ2V0U3ByZWFkKClbdGhpcy5jdXJyZW50U3ByZWFkSW5kZXhdOzI9PT10Lmxlbmd0aD8odGhpcy5yZW5kZXIuc2V0TGVmdFBhZ2UodGhpcy5wYWdlc1t0WzBdXSksdGhpcy5yZW5kZXIuc2V0UmlnaHRQYWdlKHRoaXMucGFnZXNbdFsxXV0pKTpcImxhbmRzY2FwZVwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKSYmdFswXT09PXRoaXMucGFnZXMubGVuZ3RoLTE/KHRoaXMucmVuZGVyLnNldExlZnRQYWdlKHRoaXMucGFnZXNbdFswXV0pLHRoaXMucmVuZGVyLnNldFJpZ2h0UGFnZShudWxsKSk6KHRoaXMucmVuZGVyLnNldExlZnRQYWdlKG51bGwpLHRoaXMucmVuZGVyLnNldFJpZ2h0UGFnZSh0aGlzLnBhZ2VzW3RbMF1dKSksdGhpcy5jdXJyZW50UGFnZUluZGV4PXRbMF0sdGhpcy5hcHAudXBkYXRlUGFnZUluZGV4KHRoaXMuY3VycmVudFBhZ2VJbmRleCl9fWNsYXNzIG4gZXh0ZW5kcyBze2NvbnN0cnVjdG9yKHQsZSxpKXtzdXBlcih0LGUpLHRoaXMuaW1hZ2VzSHJlZj1pfWxvYWQoKXtmb3IoY29uc3QgdCBvZiB0aGlzLmltYWdlc0hyZWYpe2NvbnN0IGU9bmV3IGkodGhpcy5yZW5kZXIsdCxcInNvZnRcIik7ZS5sb2FkKCksdGhpcy5wYWdlcy5wdXNoKGUpfXRoaXMuY3JlYXRlU3ByZWFkKCl9fWNsYXNzIGh7c3RhdGljIEdldERpc3RhbmNlQmV0d2VlblR3b1BvaW50KHQsZSl7cmV0dXJuIG51bGw9PT10fHxudWxsPT09ZT8xLzA6TWF0aC5zcXJ0KE1hdGgucG93KGUueC10LngsMikrTWF0aC5wb3coZS55LXQueSwyKSl9c3RhdGljIEdldFNlZ21lbnRMZW5ndGgodCl7cmV0dXJuIGguR2V0RGlzdGFuY2VCZXR3ZWVuVHdvUG9pbnQodFswXSx0WzFdKX1zdGF0aWMgR2V0QW5nbGVCZXR3ZWVuVHdvTGluZSh0LGUpe2NvbnN0IGk9dFswXS55LXRbMV0ueSxzPWVbMF0ueS1lWzFdLnksbj10WzFdLngtdFswXS54LGg9ZVsxXS54LWVbMF0ueDtyZXR1cm4gTWF0aC5hY29zKChpKnMrbipoKS8oTWF0aC5zcXJ0KGkqaStuKm4pKk1hdGguc3FydChzKnMraCpoKSkpfXN0YXRpYyBQb2ludEluUmVjdCh0LGUpe3JldHVybiBudWxsPT09ZT9udWxsOmUueD49dC5sZWZ0JiZlLng8PXQud2lkdGgrdC5sZWZ0JiZlLnk+PXQudG9wJiZlLnk8PXQudG9wK3QuaGVpZ2h0P2U6bnVsbH1zdGF0aWMgR2V0Um90YXRlZFBvaW50KHQsZSxpKXtyZXR1cm57eDp0LngqTWF0aC5jb3MoaSkrdC55Kk1hdGguc2luKGkpK2UueCx5OnQueSpNYXRoLmNvcyhpKS10LngqTWF0aC5zaW4oaSkrZS55fX1zdGF0aWMgTGltaXRQb2ludFRvQ2lyY2xlKHQsZSxpKXtpZihoLkdldERpc3RhbmNlQmV0d2VlblR3b1BvaW50KHQsaSk8PWUpcmV0dXJuIGk7Y29uc3Qgcz10Lngsbj10Lnkscj1pLngsbz1pLnk7bGV0IGE9TWF0aC5zcXJ0KE1hdGgucG93KGUsMikqTWF0aC5wb3cocy1yLDIpLyhNYXRoLnBvdyhzLXIsMikrTWF0aC5wb3cobi1vLDIpKSkrcztpLng8MCYmKGEqPS0xKTtsZXQgZz0oYS1zKSoobi1vKS8ocy1yKStuO3JldHVybiBzLXIrbj09PTAmJihnPWUpLHt4OmEseTpnfX1zdGF0aWMgR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQodCxlLGkpe3JldHVybiBoLlBvaW50SW5SZWN0KHQsaC5HZXRJbnRlcnNlY3RCZWV0d2VuVHdvTGluZShlLGkpKX1zdGF0aWMgR2V0SW50ZXJzZWN0QmVldHdlblR3b0xpbmUodCxlKXtjb25zdCBpPXRbMF0ueS10WzFdLnkscz1lWzBdLnktZVsxXS55LG49dFsxXS54LXRbMF0ueCxoPWVbMV0ueC1lWzBdLngscj10WzBdLngqdFsxXS55LXRbMV0ueCp0WzBdLnksbz1lWzBdLngqZVsxXS55LWVbMV0ueCplWzBdLnksYT1pKm8tcypyLGc9bipvLWgqcixsPS0ocipoLW8qbikvKGkqaC1zKm4pLGQ9LShpKm8tcypyKS8oaSpoLXMqbik7aWYoaXNGaW5pdGUobCkmJmlzRmluaXRlKGQpKXJldHVybnt4OmwseTpkfTtpZihNYXRoLmFicyhhLWcpPC4xKXRocm93IG5ldyBFcnJvcihcIlNlZ21lbnQgaW5jbHVkZWRcIik7cmV0dXJuIG51bGx9c3RhdGljIEdldENvcmRzRnJvbVR3b1BvaW50KHQsZSl7Y29uc3QgaT1NYXRoLmFicyh0LngtZS54KSxzPU1hdGguYWJzKHQueS1lLnkpLG49TWF0aC5tYXgoaSxzKSxoPVt0XTtmdW5jdGlvbiByKHQsZSxpLHMsbil7cmV0dXJuIGU+dD90K24qKGkvcyk6ZTx0P3QtbiooaS9zKTp0fWZvcihsZXQgbz0xO288PW47bys9MSloLnB1c2goe3g6cih0LngsZS54LGksbixvKSx5OnIodC55LGUueSxzLG4sbyl9KTtyZXR1cm4gaH19Y2xhc3MgciBleHRlbmRzIGV7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQsaSksdGhpcy5jb3BpZWRFbGVtZW50PW51bGwsdGhpcy50ZW1wb3JhcnlDb3B5PW51bGwsdGhpcy5pc0xvYWQ9ITEsdGhpcy5lbGVtZW50PWUsdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzdGZfX2l0ZW1cIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCItLVwiK2kpfW5ld1RlbXBvcmFyeUNvcHkoKXtyZXR1cm5cImhhcmRcIj09PXRoaXMubm93RHJhd2luZ0RlbnNpdHk/dGhpczoobnVsbD09PXRoaXMudGVtcG9yYXJ5Q29weSYmKHRoaXMuY29waWVkRWxlbWVudD10aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCEwKSx0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNvcGllZEVsZW1lbnQpLHRoaXMudGVtcG9yYXJ5Q29weT1uZXcgcih0aGlzLnJlbmRlcix0aGlzLmNvcGllZEVsZW1lbnQsdGhpcy5ub3dEcmF3aW5nRGVuc2l0eSkpLHRoaXMuZ2V0VGVtcG9yYXJ5Q29weSgpKX1nZXRUZW1wb3JhcnlDb3B5KCl7cmV0dXJuIHRoaXMudGVtcG9yYXJ5Q29weX1oaWRlVGVtcG9yYXJ5Q29weSgpe251bGwhPT10aGlzLnRlbXBvcmFyeUNvcHkmJih0aGlzLmNvcGllZEVsZW1lbnQucmVtb3ZlKCksdGhpcy5jb3BpZWRFbGVtZW50PW51bGwsdGhpcy50ZW1wb3JhcnlDb3B5PW51bGwpfWRyYXcodCl7Y29uc3QgZT10fHx0aGlzLm5vd0RyYXdpbmdEZW5zaXR5LGk9dGhpcy5yZW5kZXIuY29udmVydFRvR2xvYmFsKHRoaXMuc3RhdGUucG9zaXRpb24pLHM9dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLnBhZ2VXaWR0aCxuPXRoaXMucmVuZGVyLmdldFJlY3QoKS5oZWlnaHQ7dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCItLXNpbXBsZVwiKTtjb25zdCBoPWBcXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgICAgICAgICB6LWluZGV4OiAke3RoaXMuZWxlbWVudC5zdHlsZS56SW5kZXh9O1xcbiAgICAgICAgICAgIGxlZnQ6IDA7XFxuICAgICAgICAgICAgdG9wOiAwO1xcbiAgICAgICAgICAgIHdpZHRoOiAke3N9cHg7XFxuICAgICAgICAgICAgaGVpZ2h0OiAke259cHg7XFxuICAgICAgICBgO1wiaGFyZFwiPT09ZT90aGlzLmRyYXdIYXJkKGgpOnRoaXMuZHJhd1NvZnQoaSxoKX1kcmF3SGFyZCh0PVwiXCIpe2NvbnN0IGU9dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLmxlZnQrdGhpcy5yZW5kZXIuZ2V0UmVjdCgpLndpZHRoLzIsaT10aGlzLnN0YXRlLmhhcmREcmF3aW5nQW5nbGUscz10K1wiXFxuICAgICAgICAgICAgICAgIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XFxuICAgICAgICAgICAgICAgIGNsaXAtcGF0aDogbm9uZTtcXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1jbGlwLXBhdGg6IG5vbmU7XFxuICAgICAgICAgICAgXCIrKDA9PT10aGlzLm9yaWVudGF0aW9uP2B0cmFuc2Zvcm0tb3JpZ2luOiAke3RoaXMucmVuZGVyLmdldFJlY3QoKS5wYWdlV2lkdGh9cHggMDsgXFxuICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCkgcm90YXRlWSgke2l9ZGVnKTtgOmB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7IFxcbiAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCR7ZX1weCwgMCwgMCkgcm90YXRlWSgke2l9ZGVnKTtgKTt0aGlzLmVsZW1lbnQuc3R5bGUuY3NzVGV4dD1zfWRyYXdTb2Z0KHQsZT1cIlwiKXtsZXQgaT1cInBvbHlnb24oIFwiO2Zvcihjb25zdCB0IG9mIHRoaXMuc3RhdGUuYXJlYSlpZihudWxsIT09dCl7bGV0IGU9MT09PXRoaXMucmVuZGVyLmdldERpcmVjdGlvbigpP3t4Oi10LngrdGhpcy5zdGF0ZS5wb3NpdGlvbi54LHk6dC55LXRoaXMuc3RhdGUucG9zaXRpb24ueX06e3g6dC54LXRoaXMuc3RhdGUucG9zaXRpb24ueCx5OnQueS10aGlzLnN0YXRlLnBvc2l0aW9uLnl9O2U9aC5HZXRSb3RhdGVkUG9pbnQoZSx7eDowLHk6MH0sdGhpcy5zdGF0ZS5hbmdsZSksaSs9ZS54K1wicHggXCIrZS55K1wicHgsIFwifWk9aS5zbGljZSgwLC0yKSxpKz1cIilcIjtjb25zdCBzPWUrYHRyYW5zZm9ybS1vcmlnaW46IDAgMDsgY2xpcC1wYXRoOiAke2l9OyAtd2Via2l0LWNsaXAtcGF0aDogJHtpfTtgKyh0aGlzLnJlbmRlci5pc1NhZmFyaSgpJiYwPT09dGhpcy5zdGF0ZS5hbmdsZT9gdHJhbnNmb3JtOiB0cmFuc2xhdGUoJHt0Lnh9cHgsICR7dC55fXB4KTtgOmB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCR7dC54fXB4LCAke3QueX1weCwgMCkgcm90YXRlKCR7dGhpcy5zdGF0ZS5hbmdsZX1yYWQpO2ApO3RoaXMuZWxlbWVudC5zdHlsZS5jc3NUZXh0PXN9c2ltcGxlRHJhdyh0KXtjb25zdCBlPXRoaXMucmVuZGVyLmdldFJlY3QoKSxpPWUucGFnZVdpZHRoLHM9ZS5oZWlnaHQsbj0xPT09dD9lLmxlZnQrZS5wYWdlV2lkdGg6ZS5sZWZ0LGg9ZS50b3A7dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCItLXNpbXBsZVwiKSx0aGlzLmVsZW1lbnQuc3R5bGUuY3NzVGV4dD1gXFxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyBcXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jazsgXFxuICAgICAgICAgICAgaGVpZ2h0OiAke3N9cHg7IFxcbiAgICAgICAgICAgIGxlZnQ6ICR7bn1weDsgXFxuICAgICAgICAgICAgdG9wOiAke2h9cHg7IFxcbiAgICAgICAgICAgIHdpZHRoOiAke2l9cHg7IFxcbiAgICAgICAgICAgIHotaW5kZXg6ICR7dGhpcy5yZW5kZXIuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCsxfTtgfWdldEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5lbGVtZW50fWxvYWQoKXt0aGlzLmlzTG9hZD0hMH1zZXRPcmllbnRhdGlvbih0KXtzdXBlci5zZXRPcmllbnRhdGlvbih0KSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIi0tbGVmdFwiLFwiLS1yaWdodFwiKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgxPT09dD9cIi0tcmlnaHRcIjpcIi0tbGVmdFwiKX1zZXREcmF3aW5nRGVuc2l0eSh0KXt0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIi0tc29mdFwiLFwiLS1oYXJkXCIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiLS1cIit0KSxzdXBlci5zZXREcmF3aW5nRGVuc2l0eSh0KX19Y2xhc3MgbyBleHRlbmRzIHN7Y29uc3RydWN0b3IodCxlLGkscyl7c3VwZXIodCxlKSx0aGlzLmVsZW1lbnQ9aSx0aGlzLnBhZ2VzRWxlbWVudD1zfWxvYWQoKXtmb3IoY29uc3QgdCBvZiB0aGlzLnBhZ2VzRWxlbWVudCl7Y29uc3QgZT1uZXcgcih0aGlzLnJlbmRlcix0LFwiaGFyZFwiPT09dC5kYXRhc2V0LmRlbnNpdHk/XCJoYXJkXCI6XCJzb2Z0XCIpO2UubG9hZCgpLHRoaXMucGFnZXMucHVzaChlKX10aGlzLmNyZWF0ZVNwcmVhZCgpfX1jbGFzcyBhe2NvbnN0cnVjdG9yKHQsZSxpLHMpe3RoaXMuZGlyZWN0aW9uPXQsdGhpcy5jb3JuZXI9ZSx0aGlzLnRvcEludGVyc2VjdFBvaW50PW51bGwsdGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ9bnVsbCx0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50PW51bGwsdGhpcy5wYWdlV2lkdGg9cGFyc2VJbnQoaSwxMCksdGhpcy5wYWdlSGVpZ2h0PXBhcnNlSW50KHMsMTApfWNhbGModCl7dHJ5e3JldHVybiB0aGlzLnBvc2l0aW9uPXRoaXMuY2FsY0FuZ2xlQW5kUG9zaXRpb24odCksdGhpcy5jYWxjdWxhdGVJbnRlcnNlY3RQb2ludCh0aGlzLnBvc2l0aW9uKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19Z2V0RmxpcHBpbmdDbGlwQXJlYSgpe2NvbnN0IHQ9W107bGV0IGU9ITE7cmV0dXJuIHQucHVzaCh0aGlzLnJlY3QudG9wTGVmdCksdC5wdXNoKHRoaXMudG9wSW50ZXJzZWN0UG9pbnQpLG51bGw9PT10aGlzLnNpZGVJbnRlcnNlY3RQb2ludD9lPSEwOih0LnB1c2godGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQpLG51bGw9PT10aGlzLmJvdHRvbUludGVyc2VjdFBvaW50JiYoZT0hMSkpLHQucHVzaCh0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50KSwoZXx8XCJib3R0b21cIj09PXRoaXMuY29ybmVyKSYmdC5wdXNoKHRoaXMucmVjdC5ib3R0b21MZWZ0KSx0fWdldEJvdHRvbUNsaXBBcmVhKCl7Y29uc3QgdD1bXTtyZXR1cm4gdC5wdXNoKHRoaXMudG9wSW50ZXJzZWN0UG9pbnQpLFwidG9wXCI9PT10aGlzLmNvcm5lcj90LnB1c2goe3g6dGhpcy5wYWdlV2lkdGgseTowfSk6KG51bGwhPT10aGlzLnRvcEludGVyc2VjdFBvaW50JiZ0LnB1c2goe3g6dGhpcy5wYWdlV2lkdGgseTowfSksdC5wdXNoKHt4OnRoaXMucGFnZVdpZHRoLHk6dGhpcy5wYWdlSGVpZ2h0fSkpLG51bGwhPT10aGlzLnNpZGVJbnRlcnNlY3RQb2ludD9oLkdldERpc3RhbmNlQmV0d2VlblR3b1BvaW50KHRoaXMuc2lkZUludGVyc2VjdFBvaW50LHRoaXMudG9wSW50ZXJzZWN0UG9pbnQpPj0xMCYmdC5wdXNoKHRoaXMuc2lkZUludGVyc2VjdFBvaW50KTpcInRvcFwiPT09dGhpcy5jb3JuZXImJnQucHVzaCh7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH0pLHQucHVzaCh0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50KSx0LnB1c2godGhpcy50b3BJbnRlcnNlY3RQb2ludCksdH1nZXRBbmdsZSgpe3JldHVybiAwPT09dGhpcy5kaXJlY3Rpb24/LXRoaXMuYW5nbGU6dGhpcy5hbmdsZX1nZXRSZWN0KCl7cmV0dXJuIHRoaXMucmVjdH1nZXRQb3NpdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9ufWdldEFjdGl2ZUNvcm5lcigpe3JldHVybiAwPT09dGhpcy5kaXJlY3Rpb24/dGhpcy5yZWN0LnRvcExlZnQ6dGhpcy5yZWN0LnRvcFJpZ2h0fWdldERpcmVjdGlvbigpe3JldHVybiB0aGlzLmRpcmVjdGlvbn1nZXRGbGlwcGluZ1Byb2dyZXNzKCl7cmV0dXJuIE1hdGguYWJzKCh0aGlzLnBvc2l0aW9uLngtdGhpcy5wYWdlV2lkdGgpLygyKnRoaXMucGFnZVdpZHRoKSoxMDApfWdldENvcm5lcigpe3JldHVybiB0aGlzLmNvcm5lcn1nZXRCb3R0b21QYWdlUG9zaXRpb24oKXtyZXR1cm4gMT09PXRoaXMuZGlyZWN0aW9uP3t4OnRoaXMucGFnZVdpZHRoLHk6MH06e3g6MCx5OjB9fWdldFNoYWRvd1N0YXJ0UG9pbnQoKXtyZXR1cm5cInRvcFwiPT09dGhpcy5jb3JuZXI/dGhpcy50b3BJbnRlcnNlY3RQb2ludDpudWxsIT09dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ/dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ6dGhpcy50b3BJbnRlcnNlY3RQb2ludH1nZXRTaGFkb3dBbmdsZSgpe2NvbnN0IHQ9aC5HZXRBbmdsZUJldHdlZW5Ud29MaW5lKHRoaXMuZ2V0U2VnbWVudFRvU2hhZG93TGluZSgpLFt7eDowLHk6MH0se3g6dGhpcy5wYWdlV2lkdGgseTowfV0pO3JldHVybiAwPT09dGhpcy5kaXJlY3Rpb24/dDpNYXRoLlBJLXR9Y2FsY0FuZ2xlQW5kUG9zaXRpb24odCl7bGV0IGU9dDtpZih0aGlzLnVwZGF0ZUFuZ2xlQW5kR2VvbWV0cnkoZSksZT1cInRvcFwiPT09dGhpcy5jb3JuZXI/dGhpcy5jaGVja1Bvc2l0aW9uQXRDZW50ZXJMaW5lKGUse3g6MCx5OjB9LHt4OjAseTp0aGlzLnBhZ2VIZWlnaHR9KTp0aGlzLmNoZWNrUG9zaXRpb25BdENlbnRlckxpbmUoZSx7eDowLHk6dGhpcy5wYWdlSGVpZ2h0fSx7eDowLHk6MH0pLE1hdGguYWJzKGUueC10aGlzLnBhZ2VXaWR0aCk8MSYmTWF0aC5hYnMoZS55KTwxKXRocm93IG5ldyBFcnJvcihcIlBvaW50IGlzIHRvbyBzbWFsbFwiKTtyZXR1cm4gZX11cGRhdGVBbmdsZUFuZEdlb21ldHJ5KHQpe3RoaXMuYW5nbGU9dGhpcy5jYWxjdWxhdGVBbmdsZSh0KSx0aGlzLnJlY3Q9dGhpcy5nZXRQYWdlUmVjdCh0KX1jYWxjdWxhdGVBbmdsZSh0KXtjb25zdCBlPXRoaXMucGFnZVdpZHRoLXQueCsxLGk9XCJib3R0b21cIj09PXRoaXMuY29ybmVyP3RoaXMucGFnZUhlaWdodC10Lnk6dC55O2xldCBzPTIqTWF0aC5hY29zKGUvTWF0aC5zcXJ0KGkqaStlKmUpKTtpPDAmJihzPS1zKTtjb25zdCBuPU1hdGguUEktcztpZighaXNGaW5pdGUocyl8fG4+PTAmJm48LjAwMyl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgRyBwb2ludCBpcyB0b28gc21hbGxcIik7cmV0dXJuXCJib3R0b21cIj09PXRoaXMuY29ybmVyJiYocz0tcyksc31nZXRQYWdlUmVjdCh0KXtyZXR1cm5cInRvcFwiPT09dGhpcy5jb3JuZXI/dGhpcy5nZXRSZWN0RnJvbUJhc2VQb2ludChbe3g6MCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6MH0se3g6MCx5OnRoaXMucGFnZUhlaWdodH0se3g6dGhpcy5wYWdlV2lkdGgseTp0aGlzLnBhZ2VIZWlnaHR9XSx0KTp0aGlzLmdldFJlY3RGcm9tQmFzZVBvaW50KFt7eDowLHk6LXRoaXMucGFnZUhlaWdodH0se3g6dGhpcy5wYWdlV2lkdGgseTotdGhpcy5wYWdlSGVpZ2h0fSx7eDowLHk6MH0se3g6dGhpcy5wYWdlV2lkdGgseTowfV0sdCl9Z2V0UmVjdEZyb21CYXNlUG9pbnQodCxlKXtyZXR1cm57dG9wTGVmdDp0aGlzLmdldFJvdGF0ZWRQb2ludCh0WzBdLGUpLHRvcFJpZ2h0OnRoaXMuZ2V0Um90YXRlZFBvaW50KHRbMV0sZSksYm90dG9tTGVmdDp0aGlzLmdldFJvdGF0ZWRQb2ludCh0WzJdLGUpLGJvdHRvbVJpZ2h0OnRoaXMuZ2V0Um90YXRlZFBvaW50KHRbM10sZSl9fWdldFJvdGF0ZWRQb2ludCh0LGUpe3JldHVybnt4OnQueCpNYXRoLmNvcyh0aGlzLmFuZ2xlKSt0LnkqTWF0aC5zaW4odGhpcy5hbmdsZSkrZS54LHk6dC55Kk1hdGguY29zKHRoaXMuYW5nbGUpLXQueCpNYXRoLnNpbih0aGlzLmFuZ2xlKStlLnl9fWNhbGN1bGF0ZUludGVyc2VjdFBvaW50KHQpe2NvbnN0IGU9e2xlZnQ6LTEsdG9wOi0xLHdpZHRoOnRoaXMucGFnZVdpZHRoKzIsaGVpZ2h0OnRoaXMucGFnZUhlaWdodCsyfTtcInRvcFwiPT09dGhpcy5jb3JuZXI/KHRoaXMudG9wSW50ZXJzZWN0UG9pbnQ9aC5HZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudChlLFt0LHRoaXMucmVjdC50b3BSaWdodF0sW3t4OjAseTowfSx7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9XSksdGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ9aC5HZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudChlLFt0LHRoaXMucmVjdC5ib3R0b21MZWZ0XSxbe3g6dGhpcy5wYWdlV2lkdGgseTowfSx7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH1dKSx0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50PWguR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQoZSxbdGhpcy5yZWN0LmJvdHRvbUxlZnQsdGhpcy5yZWN0LmJvdHRvbVJpZ2h0XSxbe3g6MCx5OnRoaXMucGFnZUhlaWdodH0se3g6dGhpcy5wYWdlV2lkdGgseTp0aGlzLnBhZ2VIZWlnaHR9XSkpOih0aGlzLnRvcEludGVyc2VjdFBvaW50PWguR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQoZSxbdGhpcy5yZWN0LnRvcExlZnQsdGhpcy5yZWN0LnRvcFJpZ2h0XSxbe3g6MCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6MH1dKSx0aGlzLnNpZGVJbnRlcnNlY3RQb2ludD1oLkdldEludGVyc2VjdEJldHdlZW5Ud29TZWdtZW50KGUsW3QsdGhpcy5yZWN0LnRvcExlZnRdLFt7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6dGhpcy5wYWdlSGVpZ2h0fV0pLHRoaXMuYm90dG9tSW50ZXJzZWN0UG9pbnQ9aC5HZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudChlLFt0aGlzLnJlY3QuYm90dG9tTGVmdCx0aGlzLnJlY3QuYm90dG9tUmlnaHRdLFt7eDowLHk6dGhpcy5wYWdlSGVpZ2h0fSx7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH1dKSl9Y2hlY2tQb3NpdGlvbkF0Q2VudGVyTGluZSh0LGUsaSl7bGV0IHM9dDtjb25zdCBuPWguTGltaXRQb2ludFRvQ2lyY2xlKGUsdGhpcy5wYWdlV2lkdGgscyk7cyE9PW4mJihzPW4sdGhpcy51cGRhdGVBbmdsZUFuZEdlb21ldHJ5KHMpKTtjb25zdCByPU1hdGguc3FydChNYXRoLnBvdyh0aGlzLnBhZ2VXaWR0aCwyKStNYXRoLnBvdyh0aGlzLnBhZ2VIZWlnaHQsMikpO2xldCBvPXRoaXMucmVjdC5ib3R0b21SaWdodCxhPXRoaXMucmVjdC50b3BMZWZ0O2lmKFwiYm90dG9tXCI9PT10aGlzLmNvcm5lciYmKG89dGhpcy5yZWN0LnRvcFJpZ2h0LGE9dGhpcy5yZWN0LmJvdHRvbUxlZnQpLG8ueDw9MCl7Y29uc3QgdD1oLkxpbWl0UG9pbnRUb0NpcmNsZShpLHIsYSk7dCE9PXMmJihzPXQsdGhpcy51cGRhdGVBbmdsZUFuZEdlb21ldHJ5KHMpKX1yZXR1cm4gc31nZXRTZWdtZW50VG9TaGFkb3dMaW5lKCl7Y29uc3QgdD10aGlzLmdldFNoYWRvd1N0YXJ0UG9pbnQoKTtyZXR1cm5bdCx0IT09dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQmJm51bGwhPT10aGlzLnNpZGVJbnRlcnNlY3RQb2ludD90aGlzLnNpZGVJbnRlcnNlY3RQb2ludDp0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50XX19Y2xhc3MgZ3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuZmxpcHBpbmdQYWdlPW51bGwsdGhpcy5ib3R0b21QYWdlPW51bGwsdGhpcy5jYWxjPW51bGwsdGhpcy5zdGF0ZT1cInJlYWRcIix0aGlzLnJlbmRlcj10LHRoaXMuYXBwPWV9Zm9sZCh0KXt0aGlzLnNldFN0YXRlKFwidXNlcl9mb2xkXCIpLG51bGw9PT10aGlzLmNhbGMmJnRoaXMuc3RhcnQodCksdGhpcy5kbyh0aGlzLnJlbmRlci5jb252ZXJ0VG9QYWdlKHQpKX1mbGlwKHQpe2lmKHRoaXMuYXBwLmdldFNldHRpbmdzKCkuZGlzYWJsZUZsaXBCeUNsaWNrJiYhdGhpcy5pc1BvaW50T25Db3JuZXJzKHQpKXJldHVybjtpZihudWxsIT09dGhpcy5jYWxjJiZ0aGlzLnJlbmRlci5maW5pc2hBbmltYXRpb24oKSwhdGhpcy5zdGFydCh0KSlyZXR1cm47Y29uc3QgZT10aGlzLmdldEJvdW5kc1JlY3QoKTt0aGlzLnNldFN0YXRlKFwiZmxpcHBpbmdcIik7Y29uc3QgaT1lLmhlaWdodC8xMCxzPVwiYm90dG9tXCI9PT10aGlzLmNhbGMuZ2V0Q29ybmVyKCk/ZS5oZWlnaHQtaTppLG49XCJib3R0b21cIj09PXRoaXMuY2FsYy5nZXRDb3JuZXIoKT9lLmhlaWdodDowO3RoaXMuY2FsYy5jYWxjKHt4OmUucGFnZVdpZHRoLWkseTpzfSksdGhpcy5hbmltYXRlRmxpcHBpbmdUbyh7eDplLnBhZ2VXaWR0aC1pLHk6c30se3g6LWUucGFnZVdpZHRoLHk6bn0sITApfXN0YXJ0KHQpe3RoaXMucmVzZXQoKTtjb25zdCBlPXRoaXMucmVuZGVyLmNvbnZlcnRUb0Jvb2sodCksaT10aGlzLmdldEJvdW5kc1JlY3QoKSxzPXRoaXMuZ2V0RGlyZWN0aW9uQnlQb2ludChlKSxuPWUueT49aS5oZWlnaHQvMj9cImJvdHRvbVwiOlwidG9wXCI7aWYoIXRoaXMuY2hlY2tEaXJlY3Rpb24ocykpcmV0dXJuITE7dHJ5e2lmKHRoaXMuZmxpcHBpbmdQYWdlPXRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuZ2V0RmxpcHBpbmdQYWdlKHMpLHRoaXMuYm90dG9tUGFnZT10aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLmdldEJvdHRvbVBhZ2UocyksXCJsYW5kc2NhcGVcIj09PXRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCkpaWYoMT09PXMpe2NvbnN0IHQ9dGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5uZXh0QnkodGhpcy5mbGlwcGluZ1BhZ2UpO251bGwhPT10JiZ0aGlzLmZsaXBwaW5nUGFnZS5nZXREZW5zaXR5KCkhPT10LmdldERlbnNpdHkoKSYmKHRoaXMuZmxpcHBpbmdQYWdlLnNldERyYXdpbmdEZW5zaXR5KFwiaGFyZFwiKSx0LnNldERyYXdpbmdEZW5zaXR5KFwiaGFyZFwiKSl9ZWxzZXtjb25zdCB0PXRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkucHJldkJ5KHRoaXMuZmxpcHBpbmdQYWdlKTtudWxsIT09dCYmdGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RGVuc2l0eSgpIT09dC5nZXREZW5zaXR5KCkmJih0aGlzLmZsaXBwaW5nUGFnZS5zZXREcmF3aW5nRGVuc2l0eShcImhhcmRcIiksdC5zZXREcmF3aW5nRGVuc2l0eShcImhhcmRcIikpfXJldHVybiB0aGlzLnJlbmRlci5zZXREaXJlY3Rpb24ocyksdGhpcy5jYWxjPW5ldyBhKHMsbixpLnBhZ2VXaWR0aC50b1N0cmluZygxMCksaS5oZWlnaHQudG9TdHJpbmcoMTApKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19ZG8odCl7aWYobnVsbCE9PXRoaXMuY2FsYyYmdGhpcy5jYWxjLmNhbGModCkpe2NvbnN0IHQ9dGhpcy5jYWxjLmdldEZsaXBwaW5nUHJvZ3Jlc3MoKTt0aGlzLmJvdHRvbVBhZ2Uuc2V0QXJlYSh0aGlzLmNhbGMuZ2V0Qm90dG9tQ2xpcEFyZWEoKSksdGhpcy5ib3R0b21QYWdlLnNldFBvc2l0aW9uKHRoaXMuY2FsYy5nZXRCb3R0b21QYWdlUG9zaXRpb24oKSksdGhpcy5ib3R0b21QYWdlLnNldEFuZ2xlKDApLHRoaXMuYm90dG9tUGFnZS5zZXRIYXJkQW5nbGUoMCksdGhpcy5mbGlwcGluZ1BhZ2Uuc2V0QXJlYSh0aGlzLmNhbGMuZ2V0RmxpcHBpbmdDbGlwQXJlYSgpKSx0aGlzLmZsaXBwaW5nUGFnZS5zZXRQb3NpdGlvbih0aGlzLmNhbGMuZ2V0QWN0aXZlQ29ybmVyKCkpLHRoaXMuZmxpcHBpbmdQYWdlLnNldEFuZ2xlKHRoaXMuY2FsYy5nZXRBbmdsZSgpKSwwPT09dGhpcy5jYWxjLmdldERpcmVjdGlvbigpP3RoaXMuZmxpcHBpbmdQYWdlLnNldEhhcmRBbmdsZSg5MCooMjAwLTIqdCkvMTAwKTp0aGlzLmZsaXBwaW5nUGFnZS5zZXRIYXJkQW5nbGUoLTkwKigyMDAtMip0KS8xMDApLHRoaXMucmVuZGVyLnNldFBhZ2VSZWN0KHRoaXMuY2FsYy5nZXRSZWN0KCkpLHRoaXMucmVuZGVyLnNldEJvdHRvbVBhZ2UodGhpcy5ib3R0b21QYWdlKSx0aGlzLnJlbmRlci5zZXRGbGlwcGluZ1BhZ2UodGhpcy5mbGlwcGluZ1BhZ2UpLHRoaXMucmVuZGVyLnNldFNoYWRvd0RhdGEodGhpcy5jYWxjLmdldFNoYWRvd1N0YXJ0UG9pbnQoKSx0aGlzLmNhbGMuZ2V0U2hhZG93QW5nbGUoKSx0LHRoaXMuY2FsYy5nZXREaXJlY3Rpb24oKSl9fWZsaXBUb1BhZ2UodCxlKXtjb25zdCBpPXRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuZ2V0Q3VycmVudFNwcmVhZEluZGV4KCkscz10aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLmdldFNwcmVhZEluZGV4QnlQYWdlKHQpO3RyeXtzPmkmJih0aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLnNldEN1cnJlbnRTcHJlYWRJbmRleChzLTEpLHRoaXMuZmxpcE5leHQoZSkpLHM8aSYmKHRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuc2V0Q3VycmVudFNwcmVhZEluZGV4KHMrMSksdGhpcy5mbGlwUHJldihlKSl9Y2F0Y2godCl7fX1mbGlwTmV4dCh0KXt0aGlzLmZsaXAoe3g6dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLmxlZnQrMip0aGlzLnJlbmRlci5nZXRSZWN0KCkucGFnZVdpZHRoLTEwLHk6XCJ0b3BcIj09PXQ/MTp0aGlzLnJlbmRlci5nZXRSZWN0KCkuaGVpZ2h0LTJ9KX1mbGlwUHJldih0KXt0aGlzLmZsaXAoe3g6MTAseTpcInRvcFwiPT09dD8xOnRoaXMucmVuZGVyLmdldFJlY3QoKS5oZWlnaHQtMn0pfXN0b3BNb3ZlKCl7aWYobnVsbD09PXRoaXMuY2FsYylyZXR1cm47Y29uc3QgdD10aGlzLmNhbGMuZ2V0UG9zaXRpb24oKSxlPXRoaXMuZ2V0Qm91bmRzUmVjdCgpLGk9XCJib3R0b21cIj09PXRoaXMuY2FsYy5nZXRDb3JuZXIoKT9lLmhlaWdodDowO3QueDw9MD90aGlzLmFuaW1hdGVGbGlwcGluZ1RvKHQse3g6LWUucGFnZVdpZHRoLHk6aX0sITApOnRoaXMuYW5pbWF0ZUZsaXBwaW5nVG8odCx7eDplLnBhZ2VXaWR0aCx5Oml9LCExKX1zaG93Q29ybmVyKHQpe2lmKCF0aGlzLmNoZWNrU3RhdGUoXCJyZWFkXCIsXCJmb2xkX2Nvcm5lclwiKSlyZXR1cm47Y29uc3QgZT10aGlzLmdldEJvdW5kc1JlY3QoKSxpPWUucGFnZVdpZHRoO2lmKHRoaXMuaXNQb2ludE9uQ29ybmVycyh0KSlpZihudWxsPT09dGhpcy5jYWxjKXtpZighdGhpcy5zdGFydCh0KSlyZXR1cm47dGhpcy5zZXRTdGF0ZShcImZvbGRfY29ybmVyXCIpLHRoaXMuY2FsYy5jYWxjKHt4OmktMSx5OjF9KTtjb25zdCBzPTUwLG49XCJib3R0b21cIj09PXRoaXMuY2FsYy5nZXRDb3JuZXIoKT9lLmhlaWdodC0xOjEsaD1cImJvdHRvbVwiPT09dGhpcy5jYWxjLmdldENvcm5lcigpP2UuaGVpZ2h0LXM6czt0aGlzLmFuaW1hdGVGbGlwcGluZ1RvKHt4OmktMSx5Om59LHt4Omktcyx5Omh9LCExLCExKX1lbHNlIHRoaXMuZG8odGhpcy5yZW5kZXIuY29udmVydFRvUGFnZSh0KSk7ZWxzZSB0aGlzLnNldFN0YXRlKFwicmVhZFwiKSx0aGlzLnJlbmRlci5maW5pc2hBbmltYXRpb24oKSx0aGlzLnN0b3BNb3ZlKCl9YW5pbWF0ZUZsaXBwaW5nVG8odCxlLGkscz0hMCl7Y29uc3Qgbj1oLkdldENvcmRzRnJvbVR3b1BvaW50KHQsZSkscj1bXTtmb3IoY29uc3QgdCBvZiBuKXIucHVzaCgoKT0+dGhpcy5kbyh0KSk7Y29uc3Qgbz10aGlzLmdldEFuaW1hdGlvbkR1cmF0aW9uKG4ubGVuZ3RoKTt0aGlzLnJlbmRlci5zdGFydEFuaW1hdGlvbihyLG8sKCk9Pnt0aGlzLmNhbGMmJihpJiYoMT09PXRoaXMuY2FsYy5nZXREaXJlY3Rpb24oKT90aGlzLmFwcC50dXJuVG9QcmV2UGFnZSgpOnRoaXMuYXBwLnR1cm5Ub05leHRQYWdlKCkpLHMmJih0aGlzLnJlbmRlci5zZXRCb3R0b21QYWdlKG51bGwpLHRoaXMucmVuZGVyLnNldEZsaXBwaW5nUGFnZShudWxsKSx0aGlzLnJlbmRlci5jbGVhclNoYWRvdygpLHRoaXMuc2V0U3RhdGUoXCJyZWFkXCIpLHRoaXMucmVzZXQoKSkpfSl9Z2V0Q2FsY3VsYXRpb24oKXtyZXR1cm4gdGhpcy5jYWxjfWdldFN0YXRlKCl7cmV0dXJuIHRoaXMuc3RhdGV9c2V0U3RhdGUodCl7dGhpcy5zdGF0ZSE9PXQmJih0aGlzLmFwcC51cGRhdGVTdGF0ZSh0KSx0aGlzLnN0YXRlPXQpfWdldERpcmVjdGlvbkJ5UG9pbnQodCl7Y29uc3QgZT10aGlzLmdldEJvdW5kc1JlY3QoKTtpZihcInBvcnRyYWl0XCI9PT10aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpKXtpZih0LngtZS5wYWdlV2lkdGg8PWUud2lkdGgvNSlyZXR1cm4gMX1lbHNlIGlmKHQueDxlLndpZHRoLzIpcmV0dXJuIDE7cmV0dXJuIDB9Z2V0QW5pbWF0aW9uRHVyYXRpb24odCl7Y29uc3QgZT10aGlzLmFwcC5nZXRTZXR0aW5ncygpLmZsaXBwaW5nVGltZTtyZXR1cm4gdD49MWUzP2U6dC8xZTMqZX1jaGVja0RpcmVjdGlvbih0KXtyZXR1cm4gMD09PXQ/dGhpcy5hcHAuZ2V0Q3VycmVudFBhZ2VJbmRleCgpPHRoaXMuYXBwLmdldFBhZ2VDb3VudCgpLTE6dGhpcy5hcHAuZ2V0Q3VycmVudFBhZ2VJbmRleCgpPj0xfXJlc2V0KCl7dGhpcy5jYWxjPW51bGwsdGhpcy5mbGlwcGluZ1BhZ2U9bnVsbCx0aGlzLmJvdHRvbVBhZ2U9bnVsbH1nZXRCb3VuZHNSZWN0KCl7cmV0dXJuIHRoaXMucmVuZGVyLmdldFJlY3QoKX1jaGVja1N0YXRlKC4uLnQpe2Zvcihjb25zdCBlIG9mIHQpaWYodGhpcy5zdGF0ZT09PWUpcmV0dXJuITA7cmV0dXJuITF9aXNQb2ludE9uQ29ybmVycyh0KXtjb25zdCBlPXRoaXMuZ2V0Qm91bmRzUmVjdCgpLGk9ZS5wYWdlV2lkdGgscz1NYXRoLnNxcnQoTWF0aC5wb3coaSwyKStNYXRoLnBvdyhlLmhlaWdodCwyKSkvNSxuPXRoaXMucmVuZGVyLmNvbnZlcnRUb0Jvb2sodCk7cmV0dXJuIG4ueD4wJiZuLnk+MCYmbi54PGUud2lkdGgmJm4ueTxlLmhlaWdodCYmKG4ueDxzfHxuLng+ZS53aWR0aC1zKSYmKG4ueTxzfHxuLnk+ZS5oZWlnaHQtcyl9fWNsYXNzIGx7Y29uc3RydWN0b3IodCxlKXt0aGlzLmxlZnRQYWdlPW51bGwsdGhpcy5yaWdodFBhZ2U9bnVsbCx0aGlzLmZsaXBwaW5nUGFnZT1udWxsLHRoaXMuYm90dG9tUGFnZT1udWxsLHRoaXMuZGlyZWN0aW9uPW51bGwsdGhpcy5vcmllbnRhdGlvbj1udWxsLHRoaXMuc2hhZG93PW51bGwsdGhpcy5hbmltYXRpb249bnVsbCx0aGlzLnBhZ2VSZWN0PW51bGwsdGhpcy5ib3VuZHNSZWN0PW51bGwsdGhpcy50aW1lcj0wLHRoaXMuc2FmYXJpPSExLHRoaXMuc2V0dGluZz1lLHRoaXMuYXBwPXQ7Y29uc3QgaT1uZXcgUmVnRXhwKFwiVmVyc2lvblxcXFwvW1xcXFxkXFxcXC5dKy4qU2FmYXJpL1wiKTt0aGlzLnNhZmFyaT1udWxsIT09aS5leGVjKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KX1yZW5kZXIodCl7aWYobnVsbCE9PXRoaXMuYW5pbWF0aW9uKXtjb25zdCBlPU1hdGgucm91bmQoKHQtdGhpcy5hbmltYXRpb24uc3RhcnRlZEF0KS90aGlzLmFuaW1hdGlvbi5kdXJhdGlvbkZyYW1lKTtlPHRoaXMuYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGg/dGhpcy5hbmltYXRpb24uZnJhbWVzW2VdKCk6KHRoaXMuYW5pbWF0aW9uLm9uQW5pbWF0ZUVuZCgpLHRoaXMuYW5pbWF0aW9uPW51bGwpfXRoaXMudGltZXI9dCx0aGlzLmRyYXdGcmFtZSgpfXN0YXJ0KCl7dGhpcy51cGRhdGUoKTtjb25zdCB0PWU9Pnt0aGlzLnJlbmRlcihlKSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodCl9O3JlcXVlc3RBbmltYXRpb25GcmFtZSh0KX1zdGFydEFuaW1hdGlvbih0LGUsaSl7dGhpcy5maW5pc2hBbmltYXRpb24oKSx0aGlzLmFuaW1hdGlvbj17ZnJhbWVzOnQsZHVyYXRpb246ZSxkdXJhdGlvbkZyYW1lOmUvdC5sZW5ndGgsb25BbmltYXRlRW5kOmksc3RhcnRlZEF0OnRoaXMudGltZXJ9fWZpbmlzaEFuaW1hdGlvbigpe251bGwhPT10aGlzLmFuaW1hdGlvbiYmKHRoaXMuYW5pbWF0aW9uLmZyYW1lc1t0aGlzLmFuaW1hdGlvbi5mcmFtZXMubGVuZ3RoLTFdKCksbnVsbCE9PXRoaXMuYW5pbWF0aW9uLm9uQW5pbWF0ZUVuZCYmdGhpcy5hbmltYXRpb24ub25BbmltYXRlRW5kKCkpLHRoaXMuYW5pbWF0aW9uPW51bGx9dXBkYXRlKCl7dGhpcy5ib3VuZHNSZWN0PW51bGw7Y29uc3QgdD10aGlzLmNhbGN1bGF0ZUJvdW5kc1JlY3QoKTt0aGlzLm9yaWVudGF0aW9uIT09dCYmKHRoaXMub3JpZW50YXRpb249dCx0aGlzLmFwcC51cGRhdGVPcmllbnRhdGlvbih0KSl9Y2FsY3VsYXRlQm91bmRzUmVjdCgpe2xldCB0PVwibGFuZHNjYXBlXCI7Y29uc3QgZT10aGlzLmdldEJsb2NrV2lkdGgoKSxpPWUvMixzPXRoaXMuZ2V0QmxvY2tIZWlnaHQoKS8yLG49dGhpcy5zZXR0aW5nLndpZHRoL3RoaXMuc2V0dGluZy5oZWlnaHQ7bGV0IGg9dGhpcy5zZXR0aW5nLndpZHRoLHI9dGhpcy5zZXR0aW5nLmhlaWdodCxvPWktaDtyZXR1cm5cInN0cmV0Y2hcIj09PXRoaXMuc2V0dGluZy5zaXplPyhlPDIqdGhpcy5zZXR0aW5nLm1pbldpZHRoJiZ0aGlzLmFwcC5nZXRTZXR0aW5ncygpLnVzZVBvcnRyYWl0JiYodD1cInBvcnRyYWl0XCIpLGg9XCJwb3J0cmFpdFwiPT09dD90aGlzLmdldEJsb2NrV2lkdGgoKTp0aGlzLmdldEJsb2NrV2lkdGgoKS8yLGg+dGhpcy5zZXR0aW5nLm1heFdpZHRoJiYoaD10aGlzLnNldHRpbmcubWF4V2lkdGgpLHI9aC9uLHI+dGhpcy5nZXRCbG9ja0hlaWdodCgpJiYocj10aGlzLmdldEJsb2NrSGVpZ2h0KCksaD1yKm4pLG89XCJwb3J0cmFpdFwiPT09dD9pLWgvMi1oOmktaCk6ZTwyKmgmJnRoaXMuYXBwLmdldFNldHRpbmdzKCkudXNlUG9ydHJhaXQmJih0PVwicG9ydHJhaXRcIixvPWktaC8yLWgpLHRoaXMuYm91bmRzUmVjdD17bGVmdDpvLHRvcDpzLXIvMix3aWR0aDoyKmgsaGVpZ2h0OnIscGFnZVdpZHRoOmh9LHR9c2V0U2hhZG93RGF0YSh0LGUsaSxzKXtpZighdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5kcmF3U2hhZG93KXJldHVybjtjb25zdCBuPTEwMCp0aGlzLmdldFNldHRpbmdzKCkubWF4U2hhZG93T3BhY2l0eTt0aGlzLnNoYWRvdz17cG9zOnQsYW5nbGU6ZSx3aWR0aDozKnRoaXMuZ2V0UmVjdCgpLnBhZ2VXaWR0aC80KmkvMTAwLG9wYWNpdHk6KDEwMC1pKSpuLzEwMC8xMDAsZGlyZWN0aW9uOnMscHJvZ3Jlc3M6MippfX1jbGVhclNoYWRvdygpe3RoaXMuc2hhZG93PW51bGx9Z2V0QmxvY2tXaWR0aCgpe3JldHVybiB0aGlzLmFwcC5nZXRVSSgpLmdldERpc3RFbGVtZW50KCkub2Zmc2V0V2lkdGh9Z2V0QmxvY2tIZWlnaHQoKXtyZXR1cm4gdGhpcy5hcHAuZ2V0VUkoKS5nZXREaXN0RWxlbWVudCgpLm9mZnNldEhlaWdodH1nZXREaXJlY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJlY3Rpb259Z2V0UmVjdCgpe3JldHVybiBudWxsPT09dGhpcy5ib3VuZHNSZWN0JiZ0aGlzLmNhbGN1bGF0ZUJvdW5kc1JlY3QoKSx0aGlzLmJvdW5kc1JlY3R9Z2V0U2V0dGluZ3MoKXtyZXR1cm4gdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKX1nZXRPcmllbnRhdGlvbigpe3JldHVybiB0aGlzLm9yaWVudGF0aW9ufXNldFBhZ2VSZWN0KHQpe3RoaXMucGFnZVJlY3Q9dH1zZXREaXJlY3Rpb24odCl7dGhpcy5kaXJlY3Rpb249dH1zZXRSaWdodFBhZ2UodCl7bnVsbCE9PXQmJnQuc2V0T3JpZW50YXRpb24oMSksdGhpcy5yaWdodFBhZ2U9dH1zZXRMZWZ0UGFnZSh0KXtudWxsIT09dCYmdC5zZXRPcmllbnRhdGlvbigwKSx0aGlzLmxlZnRQYWdlPXR9c2V0Qm90dG9tUGFnZSh0KXtudWxsIT09dCYmdC5zZXRPcmllbnRhdGlvbigxPT09dGhpcy5kaXJlY3Rpb24/MDoxKSx0aGlzLmJvdHRvbVBhZ2U9dH1zZXRGbGlwcGluZ1BhZ2UodCl7bnVsbCE9PXQmJnQuc2V0T3JpZW50YXRpb24oMD09PXRoaXMuZGlyZWN0aW9uJiZcInBvcnRyYWl0XCIhPT10aGlzLm9yaWVudGF0aW9uPzA6MSksdGhpcy5mbGlwcGluZ1BhZ2U9dH1jb252ZXJ0VG9Cb29rKHQpe2NvbnN0IGU9dGhpcy5nZXRSZWN0KCk7cmV0dXJue3g6dC54LWUubGVmdCx5OnQueS1lLnRvcH19aXNTYWZhcmkoKXtyZXR1cm4gdGhpcy5zYWZhcml9Y29udmVydFRvUGFnZSh0LGUpe2V8fChlPXRoaXMuZGlyZWN0aW9uKTtjb25zdCBpPXRoaXMuZ2V0UmVjdCgpO3JldHVybnt4OjA9PT1lP3QueC1pLmxlZnQtaS53aWR0aC8yOmkud2lkdGgvMi10LngraS5sZWZ0LHk6dC55LWkudG9wfX1jb252ZXJ0VG9HbG9iYWwodCxlKXtpZihlfHwoZT10aGlzLmRpcmVjdGlvbiksbnVsbD09dClyZXR1cm4gbnVsbDtjb25zdCBpPXRoaXMuZ2V0UmVjdCgpO3JldHVybnt4OjA9PT1lP3QueCtpLmxlZnQraS53aWR0aC8yOmkud2lkdGgvMi10LngraS5sZWZ0LHk6dC55K2kudG9wfX1jb252ZXJ0UmVjdFRvR2xvYmFsKHQsZSl7cmV0dXJuIGV8fChlPXRoaXMuZGlyZWN0aW9uKSx7dG9wTGVmdDp0aGlzLmNvbnZlcnRUb0dsb2JhbCh0LnRvcExlZnQsZSksdG9wUmlnaHQ6dGhpcy5jb252ZXJ0VG9HbG9iYWwodC50b3BSaWdodCxlKSxib3R0b21MZWZ0OnRoaXMuY29udmVydFRvR2xvYmFsKHQuYm90dG9tTGVmdCxlKSxib3R0b21SaWdodDp0aGlzLmNvbnZlcnRUb0dsb2JhbCh0LmJvdHRvbVJpZ2h0LGUpfX19Y2xhc3MgZCBleHRlbmRzIGx7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQsZSksdGhpcy5jYW52YXM9aSx0aGlzLmN0eD1pLmdldENvbnRleHQoXCIyZFwiKX1nZXRDb250ZXh0KCl7cmV0dXJuIHRoaXMuY3R4fXJlbG9hZCgpe31kcmF3RnJhbWUoKXt0aGlzLmNsZWFyKCksXCJwb3J0cmFpdFwiIT09dGhpcy5vcmllbnRhdGlvbiYmbnVsbCE9dGhpcy5sZWZ0UGFnZSYmdGhpcy5sZWZ0UGFnZS5zaW1wbGVEcmF3KDApLG51bGwhPXRoaXMucmlnaHRQYWdlJiZ0aGlzLnJpZ2h0UGFnZS5zaW1wbGVEcmF3KDEpLG51bGwhPXRoaXMuYm90dG9tUGFnZSYmdGhpcy5ib3R0b21QYWdlLmRyYXcoKSx0aGlzLmRyYXdCb29rU2hhZG93KCksbnVsbCE9dGhpcy5mbGlwcGluZ1BhZ2UmJnRoaXMuZmxpcHBpbmdQYWdlLmRyYXcoKSxudWxsIT10aGlzLnNoYWRvdyYmKHRoaXMuZHJhd091dGVyU2hhZG93KCksdGhpcy5kcmF3SW5uZXJTaGFkb3coKSk7Y29uc3QgdD10aGlzLmdldFJlY3QoKTtcInBvcnRyYWl0XCI9PT10aGlzLm9yaWVudGF0aW9uJiYodGhpcy5jdHguYmVnaW5QYXRoKCksdGhpcy5jdHgucmVjdCh0LmxlZnQrdC5wYWdlV2lkdGgsdC50b3AsdC53aWR0aCx0LmhlaWdodCksdGhpcy5jdHguY2xpcCgpKX1kcmF3Qm9va1NoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCk7dGhpcy5jdHguc2F2ZSgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpO2NvbnN0IGU9dC53aWR0aC8yMDt0aGlzLmN0eC5yZWN0KHQubGVmdCx0LnRvcCx0LndpZHRoLHQuaGVpZ2h0KTtjb25zdCBpPXt4OnQubGVmdCt0LndpZHRoLzItZS8yLHk6MH07dGhpcy5jdHgudHJhbnNsYXRlKGkueCxpLnkpO2NvbnN0IHM9dGhpcy5jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwwLGUsMCk7cy5hZGRDb2xvclN0b3AoMCxcInJnYmEoMCwgMCwgMCwgMClcIikscy5hZGRDb2xvclN0b3AoLjQsXCJyZ2JhKDAsIDAsIDAsIDAuMilcIikscy5hZGRDb2xvclN0b3AoLjQ5LFwicmdiYSgwLCAwLCAwLCAwLjEpXCIpLHMuYWRkQ29sb3JTdG9wKC41LFwicmdiYSgwLCAwLCAwLCAwLjUpXCIpLHMuYWRkQ29sb3JTdG9wKC41MSxcInJnYmEoMCwgMCwgMCwgMC40KVwiKSxzLmFkZENvbG9yU3RvcCgxLFwicmdiYSgwLCAwLCAwLCAwKVwiKSx0aGlzLmN0eC5jbGlwKCksdGhpcy5jdHguZmlsbFN0eWxlPXMsdGhpcy5jdHguZmlsbFJlY3QoMCwwLGUsMip0LmhlaWdodCksdGhpcy5jdHgucmVzdG9yZSgpfWRyYXdPdXRlclNoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCk7dGhpcy5jdHguc2F2ZSgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4LnJlY3QodC5sZWZ0LHQudG9wLHQud2lkdGgsdC5oZWlnaHQpO2NvbnN0IGU9dGhpcy5jb252ZXJ0VG9HbG9iYWwoe3g6dGhpcy5zaGFkb3cucG9zLngseTp0aGlzLnNoYWRvdy5wb3MueX0pO3RoaXMuY3R4LnRyYW5zbGF0ZShlLngsZS55KSx0aGlzLmN0eC5yb3RhdGUoTWF0aC5QSSt0aGlzLnNoYWRvdy5hbmdsZStNYXRoLlBJLzIpO2NvbnN0IGk9dGhpcy5jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwwLHRoaXMuc2hhZG93LndpZHRoLDApOzA9PT10aGlzLnNoYWRvdy5kaXJlY3Rpb24/KHRoaXMuY3R4LnRyYW5zbGF0ZSgwLC0xMDApLGkuYWRkQ29sb3JTdG9wKDAsXCJyZ2JhKDAsIDAsIDAsIFwiK3RoaXMuc2hhZG93Lm9wYWNpdHkrXCIpXCIpLGkuYWRkQ29sb3JTdG9wKDEsXCJyZ2JhKDAsIDAsIDAsIDApXCIpKToodGhpcy5jdHgudHJhbnNsYXRlKC10aGlzLnNoYWRvdy53aWR0aCwtMTAwKSxpLmFkZENvbG9yU3RvcCgwLFwicmdiYSgwLCAwLCAwLCAwKVwiKSxpLmFkZENvbG9yU3RvcCgxLFwicmdiYSgwLCAwLCAwLCBcIit0aGlzLnNoYWRvdy5vcGFjaXR5K1wiKVwiKSksdGhpcy5jdHguY2xpcCgpLHRoaXMuY3R4LmZpbGxTdHlsZT1pLHRoaXMuY3R4LmZpbGxSZWN0KDAsMCx0aGlzLnNoYWRvdy53aWR0aCwyKnQuaGVpZ2h0KSx0aGlzLmN0eC5yZXN0b3JlKCl9ZHJhd0lubmVyU2hhZG93KCl7Y29uc3QgdD10aGlzLmdldFJlY3QoKTt0aGlzLmN0eC5zYXZlKCksdGhpcy5jdHguYmVnaW5QYXRoKCk7Y29uc3QgZT10aGlzLmNvbnZlcnRUb0dsb2JhbCh7eDp0aGlzLnNoYWRvdy5wb3MueCx5OnRoaXMuc2hhZG93LnBvcy55fSksaT10aGlzLmNvbnZlcnRSZWN0VG9HbG9iYWwodGhpcy5wYWdlUmVjdCk7dGhpcy5jdHgubW92ZVRvKGkudG9wTGVmdC54LGkudG9wTGVmdC55KSx0aGlzLmN0eC5saW5lVG8oaS50b3BSaWdodC54LGkudG9wUmlnaHQueSksdGhpcy5jdHgubGluZVRvKGkuYm90dG9tUmlnaHQueCxpLmJvdHRvbVJpZ2h0LnkpLHRoaXMuY3R4LmxpbmVUbyhpLmJvdHRvbUxlZnQueCxpLmJvdHRvbUxlZnQueSksdGhpcy5jdHgudHJhbnNsYXRlKGUueCxlLnkpLHRoaXMuY3R4LnJvdGF0ZShNYXRoLlBJK3RoaXMuc2hhZG93LmFuZ2xlK01hdGguUEkvMik7Y29uc3Qgcz0zKnRoaXMuc2hhZG93LndpZHRoLzQsbj10aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLDAscywwKTswPT09dGhpcy5zaGFkb3cuZGlyZWN0aW9uPyh0aGlzLmN0eC50cmFuc2xhdGUoLXMsLTEwMCksbi5hZGRDb2xvclN0b3AoMSxcInJnYmEoMCwgMCwgMCwgXCIrdGhpcy5zaGFkb3cub3BhY2l0eStcIilcIiksbi5hZGRDb2xvclN0b3AoLjksXCJyZ2JhKDAsIDAsIDAsIDAuMDUpXCIpLG4uYWRkQ29sb3JTdG9wKC43LFwicmdiYSgwLCAwLCAwLCBcIit0aGlzLnNoYWRvdy5vcGFjaXR5K1wiKVwiKSxuLmFkZENvbG9yU3RvcCgwLFwicmdiYSgwLCAwLCAwLCAwKVwiKSk6KHRoaXMuY3R4LnRyYW5zbGF0ZSgwLC0xMDApLG4uYWRkQ29sb3JTdG9wKDAsXCJyZ2JhKDAsIDAsIDAsIFwiK3RoaXMuc2hhZG93Lm9wYWNpdHkrXCIpXCIpLG4uYWRkQ29sb3JTdG9wKC4xLFwicmdiYSgwLCAwLCAwLCAwLjA1KVwiKSxuLmFkZENvbG9yU3RvcCguMyxcInJnYmEoMCwgMCwgMCwgXCIrdGhpcy5zaGFkb3cub3BhY2l0eStcIilcIiksbi5hZGRDb2xvclN0b3AoMSxcInJnYmEoMCwgMCwgMCwgMClcIikpLHRoaXMuY3R4LmNsaXAoKSx0aGlzLmN0eC5maWxsU3R5bGU9bix0aGlzLmN0eC5maWxsUmVjdCgwLDAscywyKnQuaGVpZ2h0KSx0aGlzLmN0eC5yZXN0b3JlKCl9Y2xlYXIoKXt0aGlzLmN0eC5maWxsU3R5bGU9XCJ3aGl0ZVwiLHRoaXMuY3R4LmZpbGxSZWN0KDAsMCx0aGlzLmNhbnZhcy53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQpfX1jbGFzcyBwe2NvbnN0cnVjdG9yKHQsZSxpKXt0aGlzLnRvdWNoUG9pbnQ9bnVsbCx0aGlzLnN3aXBlVGltZW91dD0yNTAsdGhpcy5vblJlc2l6ZT0oKT0+e3RoaXMudXBkYXRlKCl9LHRoaXMub25Nb3VzZURvd249dD0+e2lmKHRoaXMuY2hlY2tUYXJnZXQodC50YXJnZXQpKXtjb25zdCBlPXRoaXMuZ2V0TW91c2VQb3ModC5jbGllbnRYLHQuY2xpZW50WSk7dGhpcy5hcHAuc3RhcnRVc2VyVG91Y2goZSksdC5wcmV2ZW50RGVmYXVsdCgpfX0sdGhpcy5vblRvdWNoU3RhcnQ9dD0+e2lmKHRoaXMuY2hlY2tUYXJnZXQodC50YXJnZXQpJiZ0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aD4wKXtjb25zdCBlPXQuY2hhbmdlZFRvdWNoZXNbMF0saT10aGlzLmdldE1vdXNlUG9zKGUuY2xpZW50WCxlLmNsaWVudFkpO3RoaXMudG91Y2hQb2ludD17cG9pbnQ6aSx0aW1lOkRhdGUubm93KCl9LHNldFRpbWVvdXQoKCk9PntudWxsIT09dGhpcy50b3VjaFBvaW50JiZ0aGlzLmFwcC5zdGFydFVzZXJUb3VjaChpKX0sdGhpcy5zd2lwZVRpbWVvdXQpLHRoaXMuYXBwLmdldFNldHRpbmdzKCkubW9iaWxlU2Nyb2xsU3VwcG9ydHx8dC5wcmV2ZW50RGVmYXVsdCgpfX0sdGhpcy5vbk1vdXNlVXA9dD0+e2NvbnN0IGU9dGhpcy5nZXRNb3VzZVBvcyh0LmNsaWVudFgsdC5jbGllbnRZKTt0aGlzLmFwcC51c2VyU3RvcChlKX0sdGhpcy5vbk1vdXNlTW92ZT10PT57Y29uc3QgZT10aGlzLmdldE1vdXNlUG9zKHQuY2xpZW50WCx0LmNsaWVudFkpO3RoaXMuYXBwLnVzZXJNb3ZlKGUsITEpfSx0aGlzLm9uVG91Y2hNb3ZlPXQ9PntpZih0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aD4wKXtjb25zdCBlPXQuY2hhbmdlZFRvdWNoZXNbMF0saT10aGlzLmdldE1vdXNlUG9zKGUuY2xpZW50WCxlLmNsaWVudFkpO3RoaXMuYXBwLmdldFNldHRpbmdzKCkubW9iaWxlU2Nyb2xsU3VwcG9ydD8obnVsbCE9PXRoaXMudG91Y2hQb2ludCYmKE1hdGguYWJzKHRoaXMudG91Y2hQb2ludC5wb2ludC54LWkueCk+MTB8fFwicmVhZFwiIT09dGhpcy5hcHAuZ2V0U3RhdGUoKSkmJnQuY2FuY2VsYWJsZSYmdGhpcy5hcHAudXNlck1vdmUoaSwhMCksXCJyZWFkXCIhPT10aGlzLmFwcC5nZXRTdGF0ZSgpJiZ0LnByZXZlbnREZWZhdWx0KCkpOnRoaXMuYXBwLnVzZXJNb3ZlKGksITApfX0sdGhpcy5vblRvdWNoRW5kPXQ9PntpZih0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aD4wKXtjb25zdCBlPXQuY2hhbmdlZFRvdWNoZXNbMF0saT10aGlzLmdldE1vdXNlUG9zKGUuY2xpZW50WCxlLmNsaWVudFkpO2xldCBzPSExO2lmKG51bGwhPT10aGlzLnRvdWNoUG9pbnQpe2NvbnN0IHQ9aS54LXRoaXMudG91Y2hQb2ludC5wb2ludC54LGU9TWF0aC5hYnMoaS55LXRoaXMudG91Y2hQb2ludC5wb2ludC55KTtNYXRoLmFicyh0KT50aGlzLnN3aXBlRGlzdGFuY2UmJmU8Mip0aGlzLnN3aXBlRGlzdGFuY2UmJkRhdGUubm93KCktdGhpcy50b3VjaFBvaW50LnRpbWU8dGhpcy5zd2lwZVRpbWVvdXQmJih0PjA/dGhpcy5hcHAuZmxpcFByZXYodGhpcy50b3VjaFBvaW50LnBvaW50Lnk8dGhpcy5hcHAuZ2V0UmVuZGVyKCkuZ2V0UmVjdCgpLmhlaWdodC8yP1widG9wXCI6XCJib3R0b21cIik6dGhpcy5hcHAuZmxpcE5leHQodGhpcy50b3VjaFBvaW50LnBvaW50Lnk8dGhpcy5hcHAuZ2V0UmVuZGVyKCkuZ2V0UmVjdCgpLmhlaWdodC8yP1widG9wXCI6XCJib3R0b21cIikscz0hMCksdGhpcy50b3VjaFBvaW50PW51bGx9dGhpcy5hcHAudXNlclN0b3AoaSxzKX19LHRoaXMucGFyZW50RWxlbWVudD10LHQuY2xhc3NMaXN0LmFkZChcInN0Zl9fcGFyZW50XCIpLHQuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJiZWdpblwiLCc8ZGl2IGNsYXNzPVwic3RmX193cmFwcGVyXCI+PC9kaXY+JyksdGhpcy53cmFwcGVyPXQucXVlcnlTZWxlY3RvcihcIi5zdGZfX3dyYXBwZXJcIiksdGhpcy5hcHA9ZTtjb25zdCBzPXRoaXMuYXBwLmdldFNldHRpbmdzKCkudXNlUG9ydHJhaXQ/MToyO3Quc3R5bGUubWluV2lkdGg9aS5taW5XaWR0aCpzK1wicHhcIix0LnN0eWxlLm1pbkhlaWdodD1pLm1pbkhlaWdodCtcInB4XCIsXCJmaXhlZFwiPT09aS5zaXplJiYodC5zdHlsZS5taW5XaWR0aD1pLndpZHRoKnMrXCJweFwiLHQuc3R5bGUubWluSGVpZ2h0PWkuaGVpZ2h0K1wicHhcIiksaS5hdXRvU2l6ZSYmKHQuc3R5bGUud2lkdGg9XCIxMDAlXCIsdC5zdHlsZS5tYXhXaWR0aD0yKmkubWF4V2lkdGgrXCJweFwiKSx0LnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5vblJlc2l6ZSwhMSksdGhpcy5zd2lwZURpc3RhbmNlPWkuc3dpcGVEaXN0YW5jZX1kZXN0cm95KCl7dGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS51c2VNb3VzZUV2ZW50cyYmdGhpcy5yZW1vdmVIYW5kbGVycygpLHRoaXMuZGlzdEVsZW1lbnQucmVtb3ZlKCksdGhpcy53cmFwcGVyLnJlbW92ZSgpfWdldERpc3RFbGVtZW50KCl7cmV0dXJuIHRoaXMuZGlzdEVsZW1lbnR9Z2V0V3JhcHBlcigpe3JldHVybiB0aGlzLndyYXBwZXJ9c2V0T3JpZW50YXRpb25TdHlsZSh0KXt0aGlzLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZShcIi0tcG9ydHJhaXRcIixcIi0tbGFuZHNjYXBlXCIpLFwicG9ydHJhaXRcIj09PXQ/KHRoaXMuYXBwLmdldFNldHRpbmdzKCkuYXV0b1NpemUmJih0aGlzLndyYXBwZXIuc3R5bGUucGFkZGluZ0JvdHRvbT10aGlzLmFwcC5nZXRTZXR0aW5ncygpLmhlaWdodC90aGlzLmFwcC5nZXRTZXR0aW5ncygpLndpZHRoKjEwMCtcIiVcIiksdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCItLXBvcnRyYWl0XCIpKToodGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5hdXRvU2l6ZSYmKHRoaXMud3JhcHBlci5zdHlsZS5wYWRkaW5nQm90dG9tPXRoaXMuYXBwLmdldFNldHRpbmdzKCkuaGVpZ2h0LygyKnRoaXMuYXBwLmdldFNldHRpbmdzKCkud2lkdGgpKjEwMCtcIiVcIiksdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCItLWxhbmRzY2FwZVwiKSksdGhpcy51cGRhdGUoKX1yZW1vdmVIYW5kbGVycygpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5vblJlc2l6ZSksdGhpcy5kaXN0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbk1vdXNlRG93biksdGhpcy5kaXN0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMub25Ub3VjaFN0YXJ0KSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3VzZU1vdmUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblRvdWNoTW92ZSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbk1vdXNlVXApLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm9uVG91Y2hFbmQpfXNldEhhbmRsZXJzKCl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLm9uUmVzaXplLCExKSx0aGlzLmFwcC5nZXRTZXR0aW5ncygpLnVzZU1vdXNlRXZlbnRzJiYodGhpcy5kaXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbk1vdXNlRG93biksdGhpcy5kaXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMub25Ub3VjaFN0YXJ0KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3VzZU1vdmUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblRvdWNoTW92ZSx7cGFzc2l2ZTohdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5tb2JpbGVTY3JvbGxTdXBwb3J0fSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbk1vdXNlVXApLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm9uVG91Y2hFbmQpKX1nZXRNb3VzZVBvcyh0LGUpe2NvbnN0IGk9dGhpcy5kaXN0RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57eDp0LWkubGVmdCx5OmUtaS50b3B9fWNoZWNrVGFyZ2V0KHQpe3JldHVybiF0aGlzLmFwcC5nZXRTZXR0aW5ncygpLmNsaWNrRXZlbnRGb3J3YXJkfHwhW1wiYVwiLFwiYnV0dG9uXCJdLmluY2x1ZGVzKHQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKX19Y2xhc3MgYyBleHRlbmRzIHB7Y29uc3RydWN0b3IodCxlLGkscyl7c3VwZXIodCxlLGkpLHRoaXMud3JhcHBlci5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmJlZ2luXCIsJzxkaXYgY2xhc3M9XCJzdGZfX2Jsb2NrXCI+PC9kaXY+JyksdGhpcy5kaXN0RWxlbWVudD10LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19ibG9ja1wiKSx0aGlzLml0ZW1zPXM7Zm9yKGNvbnN0IHQgb2Ygcyl0aGlzLmRpc3RFbGVtZW50LmFwcGVuZENoaWxkKHQpO3RoaXMuc2V0SGFuZGxlcnMoKX1jbGVhcigpe2Zvcihjb25zdCB0IG9mIHRoaXMuaXRlbXMpdGhpcy5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHQpfXVwZGF0ZUl0ZW1zKHQpe3RoaXMucmVtb3ZlSGFuZGxlcnMoKSx0aGlzLmRpc3RFbGVtZW50LmlubmVySFRNTD1cIlwiO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5kaXN0RWxlbWVudC5hcHBlbmRDaGlsZChlKTt0aGlzLml0ZW1zPXQsdGhpcy5zZXRIYW5kbGVycygpfXVwZGF0ZSgpe3RoaXMuYXBwLmdldFJlbmRlcigpLnVwZGF0ZSgpfX1jbGFzcyB1IGV4dGVuZHMgcHtjb25zdHJ1Y3Rvcih0LGUsaSl7c3VwZXIodCxlLGkpLHRoaXMud3JhcHBlci5pbm5lckhUTUw9JzxjYW52YXMgY2xhc3M9XCJzdGZfX2NhbnZhc1wiPjwvY2FudmFzPicsdGhpcy5jYW52YXM9dC5xdWVyeVNlbGVjdG9yQWxsKFwiY2FudmFzXCIpWzBdLHRoaXMuZGlzdEVsZW1lbnQ9dGhpcy5jYW52YXMsdGhpcy5yZXNpemVDYW52YXMoKSx0aGlzLnNldEhhbmRsZXJzKCl9cmVzaXplQ2FudmFzKCl7Y29uc3QgdD1nZXRDb21wdXRlZFN0eWxlKHRoaXMuY2FudmFzKSxlPXBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIpLDEwKSxpPXBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZShcImhlaWdodFwiKSwxMCk7dGhpcy5jYW52YXMud2lkdGg9ZSx0aGlzLmNhbnZhcy5oZWlnaHQ9aX1nZXRDYW52YXMoKXtyZXR1cm4gdGhpcy5jYW52YXN9dXBkYXRlKCl7dGhpcy5yZXNpemVDYW52YXMoKSx0aGlzLmFwcC5nZXRSZW5kZXIoKS51cGRhdGUoKX19Y2xhc3MgdyBleHRlbmRzIGx7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQsZSksdGhpcy5vdXRlclNoYWRvdz1udWxsLHRoaXMuaW5uZXJTaGFkb3c9bnVsbCx0aGlzLmhhcmRTaGFkb3c9bnVsbCx0aGlzLmhhcmRJbm5lclNoYWRvdz1udWxsLHRoaXMuZWxlbWVudD1pLHRoaXMuY3JlYXRlU2hhZG93cygpfWNyZWF0ZVNoYWRvd3MoKXt0aGlzLmVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsJzxkaXYgY2xhc3M9XCJzdGZfX291dGVyU2hhZG93XCI+PC9kaXY+XFxuICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGZfX2lubmVyU2hhZG93XCI+PC9kaXY+XFxuICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGZfX2hhcmRTaGFkb3dcIj48L2Rpdj5cXG4gICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0Zl9faGFyZElubmVyU2hhZG93XCI+PC9kaXY+JyksdGhpcy5vdXRlclNoYWRvdz10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGZfX291dGVyU2hhZG93XCIpLHRoaXMuaW5uZXJTaGFkb3c9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19pbm5lclNoYWRvd1wiKSx0aGlzLmhhcmRTaGFkb3c9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19oYXJkU2hhZG93XCIpLHRoaXMuaGFyZElubmVyU2hhZG93PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0Zl9faGFyZElubmVyU2hhZG93XCIpfWNsZWFyU2hhZG93KCl7c3VwZXIuY2xlYXJTaGFkb3coKSx0aGlzLm91dGVyU2hhZG93LnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OiBub25lXCIsdGhpcy5pbm5lclNoYWRvdy5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTogbm9uZVwiLHRoaXMuaGFyZFNoYWRvdy5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTogbm9uZVwiLHRoaXMuaGFyZElubmVyU2hhZG93LnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OiBub25lXCJ9cmVsb2FkKCl7dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19vdXRlclNoYWRvd1wiKXx8dGhpcy5jcmVhdGVTaGFkb3dzKCl9ZHJhd0hhcmRJbm5lclNoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCksZT10aGlzLnNoYWRvdy5wcm9ncmVzcz4xMDA/MjAwLXRoaXMuc2hhZG93LnByb2dyZXNzOnRoaXMuc2hhZG93LnByb2dyZXNzO2xldCBpPSgxMDAtZSkqKDIuNSp0LnBhZ2VXaWR0aCkvMTAwKzIwO2k+dC5wYWdlV2lkdGgmJihpPXQucGFnZVdpZHRoKTtsZXQgcz1gXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgICAgei1pbmRleDogJHsodGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzUpLnRvU3RyaW5nKDEwKX07XFxuICAgICAgICAgICAgd2lkdGg6ICR7aX1weDtcXG4gICAgICAgICAgICBoZWlnaHQ6ICR7dC5oZWlnaHR9cHg7XFxuICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LFxcbiAgICAgICAgICAgICAgICByZ2JhKDAsIDAsIDAsICR7dGhpcy5zaGFkb3cub3BhY2l0eSplLzEwMH0pIDUlLFxcbiAgICAgICAgICAgICAgICByZ2JhKDAsIDAsIDAsIDApIDEwMCUpO1xcbiAgICAgICAgICAgIGxlZnQ6ICR7dC5sZWZ0K3Qud2lkdGgvMn1weDtcXG4gICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XFxuICAgICAgICBgO3MrPTA9PT10aGlzLmdldERpcmVjdGlvbigpJiZ0aGlzLnNoYWRvdy5wcm9ncmVzcz4xMDB8fDE9PT10aGlzLmdldERpcmVjdGlvbigpJiZ0aGlzLnNoYWRvdy5wcm9ncmVzczw9MTAwP1widHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcIjpcInRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCkgcm90YXRlWSgxODBkZWcpO1wiLHRoaXMuaGFyZElubmVyU2hhZG93LnN0eWxlLmNzc1RleHQ9c31kcmF3SGFyZE91dGVyU2hhZG93KCl7Y29uc3QgdD10aGlzLmdldFJlY3QoKTtsZXQgZT0oMTAwLSh0aGlzLnNoYWRvdy5wcm9ncmVzcz4xMDA/MjAwLXRoaXMuc2hhZG93LnByb2dyZXNzOnRoaXMuc2hhZG93LnByb2dyZXNzKSkqKDIuNSp0LnBhZ2VXaWR0aCkvMTAwKzIwO2U+dC5wYWdlV2lkdGgmJihlPXQucGFnZVdpZHRoKTtsZXQgaT1gXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgICAgei1pbmRleDogJHsodGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzQpLnRvU3RyaW5nKDEwKX07XFxuICAgICAgICAgICAgd2lkdGg6ICR7ZX1weDtcXG4gICAgICAgICAgICBoZWlnaHQ6ICR7dC5oZWlnaHR9cHg7XFxuICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGxlZnQsIHJnYmEoMCwgMCwgMCwgJHt0aGlzLnNoYWRvdy5vcGFjaXR5fSkgNSUsIHJnYmEoMCwgMCwgMCwgMCkgMTAwJSk7XFxuICAgICAgICAgICAgbGVmdDogJHt0LmxlZnQrdC53aWR0aC8yfXB4O1xcbiAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcXG4gICAgICAgIGA7aSs9MD09PXRoaXMuZ2V0RGlyZWN0aW9uKCkmJnRoaXMuc2hhZG93LnByb2dyZXNzPjEwMHx8MT09PXRoaXMuZ2V0RGlyZWN0aW9uKCkmJnRoaXMuc2hhZG93LnByb2dyZXNzPD0xMDA/XCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApIHJvdGF0ZVkoMTgwZGVnKTtcIjpcInRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7XCIsdGhpcy5oYXJkU2hhZG93LnN0eWxlLmNzc1RleHQ9aX1kcmF3SW5uZXJTaGFkb3coKXtjb25zdCB0PXRoaXMuZ2V0UmVjdCgpLGU9Myp0aGlzLnNoYWRvdy53aWR0aC80LGk9MD09PXRoaXMuZ2V0RGlyZWN0aW9uKCk/ZTowLHM9MD09PXRoaXMuZ2V0RGlyZWN0aW9uKCk/XCJ0byBsZWZ0XCI6XCJ0byByaWdodFwiLG49dGhpcy5jb252ZXJ0VG9HbG9iYWwodGhpcy5zaGFkb3cucG9zKSxyPXRoaXMuc2hhZG93LmFuZ2xlKzMqTWF0aC5QSS8yLG89W3RoaXMucGFnZVJlY3QudG9wTGVmdCx0aGlzLnBhZ2VSZWN0LnRvcFJpZ2h0LHRoaXMucGFnZVJlY3QuYm90dG9tUmlnaHQsdGhpcy5wYWdlUmVjdC5ib3R0b21MZWZ0XTtsZXQgYT1cInBvbHlnb24oIFwiO2Zvcihjb25zdCB0IG9mIG8pe2xldCBlPTE9PT10aGlzLmdldERpcmVjdGlvbigpP3t4Oi10LngrdGhpcy5zaGFkb3cucG9zLngseTp0LnktdGhpcy5zaGFkb3cucG9zLnl9Ont4OnQueC10aGlzLnNoYWRvdy5wb3MueCx5OnQueS10aGlzLnNoYWRvdy5wb3MueX07ZT1oLkdldFJvdGF0ZWRQb2ludChlLHt4OmkseToxMDB9LHIpLGErPWUueCtcInB4IFwiK2UueStcInB4LCBcIn1hPWEuc2xpY2UoMCwtMiksYSs9XCIpXCI7Y29uc3QgZz1gXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgICAgei1pbmRleDogJHsodGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzEwKS50b1N0cmluZygxMCl9O1xcbiAgICAgICAgICAgIHdpZHRoOiAke2V9cHg7XFxuICAgICAgICAgICAgaGVpZ2h0OiAkezIqdC5oZWlnaHR9cHg7XFxuICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KCR7c30sXFxuICAgICAgICAgICAgICAgIHJnYmEoMCwgMCwgMCwgJHt0aGlzLnNoYWRvdy5vcGFjaXR5fSkgNSUsXFxuICAgICAgICAgICAgICAgIHJnYmEoMCwgMCwgMCwgMC4wNSkgMTUlLFxcbiAgICAgICAgICAgICAgICByZ2JhKDAsIDAsIDAsICR7dGhpcy5zaGFkb3cub3BhY2l0eX0pIDM1JSxcXG4gICAgICAgICAgICAgICAgcmdiYSgwLCAwLCAwLCAwKSAxMDAlKTtcXG4gICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAke2l9cHggMTAwcHg7XFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgke24ueC1pfXB4LCAke24ueS0xMDB9cHgsIDApIHJvdGF0ZSgke3J9cmFkKTtcXG4gICAgICAgICAgICBjbGlwLXBhdGg6ICR7YX07XFxuICAgICAgICAgICAgLXdlYmtpdC1jbGlwLXBhdGg6ICR7YX07XFxuICAgICAgICBgO3RoaXMuaW5uZXJTaGFkb3cuc3R5bGUuY3NzVGV4dD1nfWRyYXdPdXRlclNoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCksZT10aGlzLmNvbnZlcnRUb0dsb2JhbCh7eDp0aGlzLnNoYWRvdy5wb3MueCx5OnRoaXMuc2hhZG93LnBvcy55fSksaT10aGlzLnNoYWRvdy5hbmdsZSszKk1hdGguUEkvMixzPTE9PT10aGlzLmdldERpcmVjdGlvbigpP3RoaXMuc2hhZG93LndpZHRoOjAsbj0wPT09dGhpcy5nZXREaXJlY3Rpb24oKT9cInRvIHJpZ2h0XCI6XCJ0byBsZWZ0XCIscj1be3g6MCx5OjB9LHt4OnQucGFnZVdpZHRoLHk6MH0se3g6dC5wYWdlV2lkdGgseTp0LmhlaWdodH0se3g6MCx5OnQuaGVpZ2h0fV07bGV0IG89XCJwb2x5Z29uKCBcIjtmb3IoY29uc3QgdCBvZiByKWlmKG51bGwhPT10KXtsZXQgZT0xPT09dGhpcy5nZXREaXJlY3Rpb24oKT97eDotdC54K3RoaXMuc2hhZG93LnBvcy54LHk6dC55LXRoaXMuc2hhZG93LnBvcy55fTp7eDp0LngtdGhpcy5zaGFkb3cucG9zLngseTp0LnktdGhpcy5zaGFkb3cucG9zLnl9O2U9aC5HZXRSb3RhdGVkUG9pbnQoZSx7eDpzLHk6MTAwfSxpKSxvKz1lLngrXCJweCBcIitlLnkrXCJweCwgXCJ9bz1vLnNsaWNlKDAsLTIpLG8rPVwiKVwiO2NvbnN0IGE9YFxcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICAgICAgICAgIHotaW5kZXg6ICR7KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCsxMCkudG9TdHJpbmcoMTApfTtcXG4gICAgICAgICAgICB3aWR0aDogJHt0aGlzLnNoYWRvdy53aWR0aH1weDtcXG4gICAgICAgICAgICBoZWlnaHQ6ICR7Mip0LmhlaWdodH1weDtcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoJHtufSwgcmdiYSgwLCAwLCAwLCAke3RoaXMuc2hhZG93Lm9wYWNpdHl9KSwgcmdiYSgwLCAwLCAwLCAwKSk7XFxuICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogJHtzfXB4IDEwMHB4O1xcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoJHtlLngtc31weCwgJHtlLnktMTAwfXB4LCAwKSByb3RhdGUoJHtpfXJhZCk7XFxuICAgICAgICAgICAgY2xpcC1wYXRoOiAke299O1xcbiAgICAgICAgICAgIC13ZWJraXQtY2xpcC1wYXRoOiAke299O1xcbiAgICAgICAgYDt0aGlzLm91dGVyU2hhZG93LnN0eWxlLmNzc1RleHQ9YX1kcmF3TGVmdFBhZ2UoKXtcInBvcnRyYWl0XCIhPT10aGlzLm9yaWVudGF0aW9uJiZudWxsIT09dGhpcy5sZWZ0UGFnZSYmKDE9PT10aGlzLmRpcmVjdGlvbiYmbnVsbCE9PXRoaXMuZmxpcHBpbmdQYWdlJiZcImhhcmRcIj09PXRoaXMuZmxpcHBpbmdQYWdlLmdldERyYXdpbmdEZW5zaXR5KCk/KHRoaXMubGVmdFBhZ2UuZ2V0RWxlbWVudCgpLnN0eWxlLnpJbmRleD0odGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzUpLnRvU3RyaW5nKDEwKSx0aGlzLmxlZnRQYWdlLnNldEhhcmREcmF3aW5nQW5nbGUoMTgwK3RoaXMuZmxpcHBpbmdQYWdlLmdldEhhcmRBbmdsZSgpKSx0aGlzLmxlZnRQYWdlLmRyYXcodGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RHJhd2luZ0RlbnNpdHkoKSkpOnRoaXMubGVmdFBhZ2Uuc2ltcGxlRHJhdygwKSl9ZHJhd1JpZ2h0UGFnZSgpe251bGwhPT10aGlzLnJpZ2h0UGFnZSYmKDA9PT10aGlzLmRpcmVjdGlvbiYmbnVsbCE9PXRoaXMuZmxpcHBpbmdQYWdlJiZcImhhcmRcIj09PXRoaXMuZmxpcHBpbmdQYWdlLmdldERyYXdpbmdEZW5zaXR5KCk/KHRoaXMucmlnaHRQYWdlLmdldEVsZW1lbnQoKS5zdHlsZS56SW5kZXg9KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCs1KS50b1N0cmluZygxMCksdGhpcy5yaWdodFBhZ2Uuc2V0SGFyZERyYXdpbmdBbmdsZSgxODArdGhpcy5mbGlwcGluZ1BhZ2UuZ2V0SGFyZEFuZ2xlKCkpLHRoaXMucmlnaHRQYWdlLmRyYXcodGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RHJhd2luZ0RlbnNpdHkoKSkpOnRoaXMucmlnaHRQYWdlLnNpbXBsZURyYXcoMSkpfWRyYXdCb3R0b21QYWdlKCl7aWYobnVsbD09PXRoaXMuYm90dG9tUGFnZSlyZXR1cm47Y29uc3QgdD1udWxsIT10aGlzLmZsaXBwaW5nUGFnZT90aGlzLmZsaXBwaW5nUGFnZS5nZXREcmF3aW5nRGVuc2l0eSgpOm51bGw7XCJwb3J0cmFpdFwiPT09dGhpcy5vcmllbnRhdGlvbiYmMT09PXRoaXMuZGlyZWN0aW9ufHwodGhpcy5ib3R0b21QYWdlLmdldEVsZW1lbnQoKS5zdHlsZS56SW5kZXg9KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCszKS50b1N0cmluZygxMCksdGhpcy5ib3R0b21QYWdlLmRyYXcodCkpfWRyYXdGcmFtZSgpe3RoaXMuY2xlYXIoKSx0aGlzLmRyYXdMZWZ0UGFnZSgpLHRoaXMuZHJhd1JpZ2h0UGFnZSgpLHRoaXMuZHJhd0JvdHRvbVBhZ2UoKSxudWxsIT10aGlzLmZsaXBwaW5nUGFnZSYmKHRoaXMuZmxpcHBpbmdQYWdlLmdldEVsZW1lbnQoKS5zdHlsZS56SW5kZXg9KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCs1KS50b1N0cmluZygxMCksdGhpcy5mbGlwcGluZ1BhZ2UuZHJhdygpKSxudWxsIT10aGlzLnNoYWRvdyYmbnVsbCE9PXRoaXMuZmxpcHBpbmdQYWdlJiYoXCJzb2Z0XCI9PT10aGlzLmZsaXBwaW5nUGFnZS5nZXREcmF3aW5nRGVuc2l0eSgpPyh0aGlzLmRyYXdPdXRlclNoYWRvdygpLHRoaXMuZHJhd0lubmVyU2hhZG93KCkpOih0aGlzLmRyYXdIYXJkT3V0ZXJTaGFkb3coKSx0aGlzLmRyYXdIYXJkSW5uZXJTaGFkb3coKSkpfWNsZWFyKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5nZXRQYWdlcygpKXQhPT10aGlzLmxlZnRQYWdlJiZ0IT09dGhpcy5yaWdodFBhZ2UmJnQhPT10aGlzLmZsaXBwaW5nUGFnZSYmdCE9PXRoaXMuYm90dG9tUGFnZSYmKHQuZ2V0RWxlbWVudCgpLnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OiBub25lXCIpLHQuZ2V0VGVtcG9yYXJ5Q29weSgpIT09dGhpcy5mbGlwcGluZ1BhZ2UmJnQuaGlkZVRlbXBvcmFyeUNvcHkoKX11cGRhdGUoKXtzdXBlci51cGRhdGUoKSxudWxsIT09dGhpcy5yaWdodFBhZ2UmJnRoaXMucmlnaHRQYWdlLnNldE9yaWVudGF0aW9uKDEpLG51bGwhPT10aGlzLmxlZnRQYWdlJiZ0aGlzLmxlZnRQYWdlLnNldE9yaWVudGF0aW9uKDApfX1jbGFzcyB4e2NvbnN0cnVjdG9yKCl7dGhpcy5fZGVmYXVsdD17c3RhcnRQYWdlOjAsc2l6ZTpcImZpeGVkXCIsd2lkdGg6MCxoZWlnaHQ6MCxtaW5XaWR0aDowLG1heFdpZHRoOjAsbWluSGVpZ2h0OjAsbWF4SGVpZ2h0OjAsZHJhd1NoYWRvdzohMCxmbGlwcGluZ1RpbWU6MWUzLHVzZVBvcnRyYWl0OiEwLHN0YXJ0WkluZGV4OjAsYXV0b1NpemU6ITAsbWF4U2hhZG93T3BhY2l0eToxLHNob3dDb3ZlcjohMSxtb2JpbGVTY3JvbGxTdXBwb3J0OiEwLHN3aXBlRGlzdGFuY2U6MzAsY2xpY2tFdmVudEZvcndhcmQ6ITAsdXNlTW91c2VFdmVudHM6ITAsc2hvd1BhZ2VDb3JuZXJzOiEwLGRpc2FibGVGbGlwQnlDbGljazohMX19Z2V0U2V0dGluZ3ModCl7Y29uc3QgZT10aGlzLl9kZWZhdWx0O2lmKE9iamVjdC5hc3NpZ24oZSx0KSxcInN0cmV0Y2hcIiE9PWUuc2l6ZSYmXCJmaXhlZFwiIT09ZS5zaXplKXRocm93IG5ldyBFcnJvcignSW52YWxpZCBzaXplIHR5cGUuIEF2YWlsYWJsZSBvbmx5IFwiZml4ZWRcIiBhbmQgXCJzdHJldGNoXCIgdmFsdWUnKTtpZihlLndpZHRoPD0wfHxlLmhlaWdodDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHdpZHRoIG9yIGhlaWdodFwiKTtpZihlLmZsaXBwaW5nVGltZTw9MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGZsaXBwaW5nIHRpbWVcIik7cmV0dXJuXCJzdHJldGNoXCI9PT1lLnNpemU/KGUubWluV2lkdGg8PTAmJihlLm1pbldpZHRoPTEwMCksZS5tYXhXaWR0aDxlLm1pbldpZHRoJiYoZS5tYXhXaWR0aD0yZTMpLGUubWluSGVpZ2h0PD0wJiYoZS5taW5IZWlnaHQ9MTAwKSxlLm1heEhlaWdodDxlLm1pbkhlaWdodCYmKGUubWF4SGVpZ2h0PTJlMykpOihlLm1pbldpZHRoPWUud2lkdGgsZS5tYXhXaWR0aD1lLndpZHRoLGUubWluSGVpZ2h0PWUuaGVpZ2h0LGUubWF4SGVpZ2h0PWUuaGVpZ2h0KSxlfX0hZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIGk9ZS5pbnNlcnRBdDtpZih0JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQpe3ZhciBzPWRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtuLnR5cGU9XCJ0ZXh0L2Nzc1wiLFwidG9wXCI9PT1pJiZzLmZpcnN0Q2hpbGQ/cy5pbnNlcnRCZWZvcmUobixzLmZpcnN0Q2hpbGQpOnMuYXBwZW5kQ2hpbGQobiksbi5zdHlsZVNoZWV0P24uc3R5bGVTaGVldC5jc3NUZXh0PXQ6bi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0KSl9fShcIi5zdGZfX3BhcmVudCB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7XFxuXFxuICAtbXMtdG91Y2gtYWN0aW9uOiBwYW4teTtcXG4gIHRvdWNoLWFjdGlvbjogcGFuLXk7XFxufVxcblxcbi5zZnRfX3dyYXBwZXIge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbn1cXG5cXG4uc3RmX19wYXJlbnQgY2FudmFzIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG59XFxuXFxuLnN0Zl9fYmxvY2sge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgcGVyc3BlY3RpdmU6IDIwMDBweDtcXG59XFxuXFxuLnN0Zl9faXRlbSB7XFxuICBkaXNwbGF5OiBub25lO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcXG59XFxuXFxuLnN0Zl9fb3V0ZXJTaGFkb3cge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG59XFxuXFxuLnN0Zl9faW5uZXJTaGFkb3cge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG59XFxuXFxuLnN0Zl9faGFyZFNoYWRvdyB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbn1cXG5cXG4uc3RmX19oYXJkSW5uZXJTaGFkb3cge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG59XCIpO3QuUGFnZUZsaXA9Y2xhc3MgZXh0ZW5kcyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuZXZlbnRzPW5ldyBNYXB9b24odCxlKXtyZXR1cm4gdGhpcy5ldmVudHMuaGFzKHQpP3RoaXMuZXZlbnRzLmdldCh0KS5wdXNoKGUpOnRoaXMuZXZlbnRzLnNldCh0LFtlXSksdGhpc31vZmYodCl7dGhpcy5ldmVudHMuZGVsZXRlKHQpfXRyaWdnZXIodCxlLGk9bnVsbCl7aWYodGhpcy5ldmVudHMuaGFzKHQpKWZvcihjb25zdCBzIG9mIHRoaXMuZXZlbnRzLmdldCh0KSlzKHtkYXRhOmksb2JqZWN0OmV9KX19e2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLmlzVXNlclRvdWNoPSExLHRoaXMuaXNVc2VyTW92ZT0hMSx0aGlzLnNldHRpbmc9bnVsbCx0aGlzLnBhZ2VzPW51bGwsdGhpcy5zZXR0aW5nPShuZXcgeCkuZ2V0U2V0dGluZ3MoZSksdGhpcy5ibG9jaz10fWRlc3Ryb3koKXt0aGlzLnVpLmRlc3Ryb3koKSx0aGlzLmJsb2NrLnJlbW92ZSgpfXVwZGF0ZSgpe3RoaXMucmVuZGVyLnVwZGF0ZSgpLHRoaXMucGFnZXMuc2hvdygpfWxvYWRGcm9tSW1hZ2VzKHQpe3RoaXMudWk9bmV3IHUodGhpcy5ibG9jayx0aGlzLHRoaXMuc2V0dGluZyk7Y29uc3QgZT10aGlzLnVpLmdldENhbnZhcygpO3RoaXMucmVuZGVyPW5ldyBkKHRoaXMsdGhpcy5zZXR0aW5nLGUpLHRoaXMuZmxpcENvbnRyb2xsZXI9bmV3IGcodGhpcy5yZW5kZXIsdGhpcyksdGhpcy5wYWdlcz1uZXcgbih0aGlzLHRoaXMucmVuZGVyLHQpLHRoaXMucGFnZXMubG9hZCgpLHRoaXMucmVuZGVyLnN0YXJ0KCksdGhpcy5wYWdlcy5zaG93KHRoaXMuc2V0dGluZy5zdGFydFBhZ2UpLHNldFRpbWVvdXQoKCk9Pnt0aGlzLnVpLnVwZGF0ZSgpLHRoaXMudHJpZ2dlcihcImluaXRcIix0aGlzLHtwYWdlOnRoaXMuc2V0dGluZy5zdGFydFBhZ2UsbW9kZTp0aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpfSl9LDEpfWxvYWRGcm9tSFRNTCh0KXt0aGlzLnVpPW5ldyBjKHRoaXMuYmxvY2ssdGhpcyx0aGlzLnNldHRpbmcsdCksdGhpcy5yZW5kZXI9bmV3IHcodGhpcyx0aGlzLnNldHRpbmcsdGhpcy51aS5nZXREaXN0RWxlbWVudCgpKSx0aGlzLmZsaXBDb250cm9sbGVyPW5ldyBnKHRoaXMucmVuZGVyLHRoaXMpLHRoaXMucGFnZXM9bmV3IG8odGhpcyx0aGlzLnJlbmRlcix0aGlzLnVpLmdldERpc3RFbGVtZW50KCksdCksdGhpcy5wYWdlcy5sb2FkKCksdGhpcy5yZW5kZXIuc3RhcnQoKSx0aGlzLnBhZ2VzLnNob3codGhpcy5zZXR0aW5nLnN0YXJ0UGFnZSksc2V0VGltZW91dCgoKT0+e3RoaXMudWkudXBkYXRlKCksdGhpcy50cmlnZ2VyKFwiaW5pdFwiLHRoaXMse3BhZ2U6dGhpcy5zZXR0aW5nLnN0YXJ0UGFnZSxtb2RlOnRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCl9KX0sMSl9dXBkYXRlRnJvbUltYWdlcyh0KXtjb25zdCBlPXRoaXMucGFnZXMuZ2V0Q3VycmVudFBhZ2VJbmRleCgpO3RoaXMucGFnZXMuZGVzdHJveSgpLHRoaXMucGFnZXM9bmV3IG4odGhpcyx0aGlzLnJlbmRlcix0KSx0aGlzLnBhZ2VzLmxvYWQoKSx0aGlzLnBhZ2VzLnNob3coZSksdGhpcy50cmlnZ2VyKFwidXBkYXRlXCIsdGhpcyx7cGFnZTplLG1vZGU6dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKX0pfXVwZGF0ZUZyb21IdG1sKHQpe2NvbnN0IGU9dGhpcy5wYWdlcy5nZXRDdXJyZW50UGFnZUluZGV4KCk7dGhpcy5wYWdlcy5kZXN0cm95KCksdGhpcy5wYWdlcz1uZXcgbyh0aGlzLHRoaXMucmVuZGVyLHRoaXMudWkuZ2V0RGlzdEVsZW1lbnQoKSx0KSx0aGlzLnBhZ2VzLmxvYWQoKSx0aGlzLnVpLnVwZGF0ZUl0ZW1zKHQpLHRoaXMucmVuZGVyLnJlbG9hZCgpLHRoaXMucGFnZXMuc2hvdyhlKSx0aGlzLnRyaWdnZXIoXCJ1cGRhdGVcIix0aGlzLHtwYWdlOmUsbW9kZTp0aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpfSl9Y2xlYXIoKXt0aGlzLnBhZ2VzLmRlc3Ryb3koKSx0aGlzLnVpLmNsZWFyKCl9dHVyblRvUHJldlBhZ2UoKXt0aGlzLnBhZ2VzLnNob3dQcmV2KCl9dHVyblRvTmV4dFBhZ2UoKXt0aGlzLnBhZ2VzLnNob3dOZXh0KCl9dHVyblRvUGFnZSh0KXt0aGlzLnBhZ2VzLnNob3codCl9ZmxpcE5leHQodD1cInRvcFwiKXt0aGlzLmZsaXBDb250cm9sbGVyLmZsaXBOZXh0KHQpfWZsaXBQcmV2KHQ9XCJ0b3BcIil7dGhpcy5mbGlwQ29udHJvbGxlci5mbGlwUHJldih0KX1mbGlwKHQsZT1cInRvcFwiKXt0aGlzLmZsaXBDb250cm9sbGVyLmZsaXBUb1BhZ2UodCxlKX11cGRhdGVTdGF0ZSh0KXt0aGlzLnRyaWdnZXIoXCJjaGFuZ2VTdGF0ZVwiLHRoaXMsdCl9dXBkYXRlUGFnZUluZGV4KHQpe3RoaXMudHJpZ2dlcihcImZsaXBcIix0aGlzLHQpfXVwZGF0ZU9yaWVudGF0aW9uKHQpe3RoaXMudWkuc2V0T3JpZW50YXRpb25TdHlsZSh0KSx0aGlzLnVwZGF0ZSgpLHRoaXMudHJpZ2dlcihcImNoYW5nZU9yaWVudGF0aW9uXCIsdGhpcyx0KX1nZXRQYWdlQ291bnQoKXtyZXR1cm4gdGhpcy5wYWdlcy5nZXRQYWdlQ291bnQoKX1nZXRDdXJyZW50UGFnZUluZGV4KCl7cmV0dXJuIHRoaXMucGFnZXMuZ2V0Q3VycmVudFBhZ2VJbmRleCgpfWdldFBhZ2UodCl7cmV0dXJuIHRoaXMucGFnZXMuZ2V0UGFnZSh0KX1nZXRSZW5kZXIoKXtyZXR1cm4gdGhpcy5yZW5kZXJ9Z2V0RmxpcENvbnRyb2xsZXIoKXtyZXR1cm4gdGhpcy5mbGlwQ29udHJvbGxlcn1nZXRPcmllbnRhdGlvbigpe3JldHVybiB0aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpfWdldEJvdW5kc1JlY3QoKXtyZXR1cm4gdGhpcy5yZW5kZXIuZ2V0UmVjdCgpfWdldFNldHRpbmdzKCl7cmV0dXJuIHRoaXMuc2V0dGluZ31nZXRVSSgpe3JldHVybiB0aGlzLnVpfWdldFN0YXRlKCl7cmV0dXJuIHRoaXMuZmxpcENvbnRyb2xsZXIuZ2V0U3RhdGUoKX1nZXRQYWdlQ29sbGVjdGlvbigpe3JldHVybiB0aGlzLnBhZ2VzfXN0YXJ0VXNlclRvdWNoKHQpe3RoaXMubW91c2VQb3NpdGlvbj10LHRoaXMuaXNVc2VyVG91Y2g9ITAsdGhpcy5pc1VzZXJNb3ZlPSExfXVzZXJNb3ZlKHQsZSl7dGhpcy5pc1VzZXJUb3VjaHx8ZXx8IXRoaXMuc2V0dGluZy5zaG93UGFnZUNvcm5lcnM/dGhpcy5pc1VzZXJUb3VjaCYmaC5HZXREaXN0YW5jZUJldHdlZW5Ud29Qb2ludCh0aGlzLm1vdXNlUG9zaXRpb24sdCk+NSYmKHRoaXMuaXNVc2VyTW92ZT0hMCx0aGlzLmZsaXBDb250cm9sbGVyLmZvbGQodCkpOnRoaXMuZmxpcENvbnRyb2xsZXIuc2hvd0Nvcm5lcih0KX11c2VyU3RvcCh0LGU9ITEpe3RoaXMuaXNVc2VyVG91Y2gmJih0aGlzLmlzVXNlclRvdWNoPSExLGV8fCh0aGlzLmlzVXNlck1vdmU/dGhpcy5mbGlwQ29udHJvbGxlci5zdG9wTW92ZSgpOnRoaXMuZmxpcENvbnRyb2xsZXIuZmxpcCh0KSkpfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9KSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/page-flip@2.0.7/node_modules/page-flip/dist/js/page-flip.browser.js\n");

/***/ })

};
;