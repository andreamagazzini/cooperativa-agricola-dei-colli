/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["app/[locale]/story/page"],{

/***/ "(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fandreamagazzini%2Fdev%2Fcooperativa-agricola-dei-colli%2Fsrc%2Fapp%2F%5Blocale%5D%2Fstory%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fandreamagazzini%2Fdev%2Fcooperativa-agricola-dei-colli%2Fsrc%2Fapp%2F%5Blocale%5D%2Fstory%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/[locale]/story/page.tsx */ \"(app-pages-browser)/./src/app/[locale]/story/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9uZXh0QDE0LjIuMzNfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGYW5kcmVhbWFnYXp6aW5pJTJGZGV2JTJGY29vcGVyYXRpdmEtYWdyaWNvbGEtZGVpLWNvbGxpJTJGc3JjJTJGYXBwJTJGJTVCbG9jYWxlJTVEJTJGc3RvcnklMkZwYWdlLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9ZmFsc2UhIiwibWFwcGluZ3MiOiJBQUFBLDRMQUE4SCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvPzM0MTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMvYW5kcmVhbWFnYXp6aW5pL2Rldi9jb29wZXJhdGl2YS1hZ3JpY29sYS1kZWktY29sbGkvc3JjL2FwcC9bbG9jYWxlXS9zdG9yeS9wYWdlLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fandreamagazzini%2Fdev%2Fcooperativa-agricola-dei-colli%2Fsrc%2Fapp%2F%5Blocale%5D%2Fstory%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/.pnpm/page-flip@2.0.7/node_modules/page-flip/dist/js/page-flip.browser.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/.pnpm/page-flip@2.0.7/node_modules/page-flip/dist/js/page-flip.browser.js ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval(__webpack_require__.ts("!function(t,e){ true?e(exports):0}(this,(function(t){\"use strict\";class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();for(let t of this.state.area)null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,s,n):this.drawLoader(e,{x:0,y:0},s,n),e.restore()}simpleDraw(t){const e=this.render.getRect(),i=this.render.getContext(),s=e.pageWidth,n=e.height,h=1===t?e.left+e.pageWidth:e.left,r=e.top;this.isLoad?i.drawImage(this.image,h,r,s,n):this.drawLoader(i,{x:h,y:r},s,n)}drawLoader(t,e,i,s){t.beginPath(),t.strokeStyle=\"rgb(200, 200, 200)\",t.fillStyle=\"rgb(255, 255, 255)\",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,s-1),t.stroke(),t.fill();const n={x:e.x+i/2,y:e.y+s/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity(\"hard\"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity(\"hard\"))}getSpread(){return\"landscape\"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error(\"Invalid page number\")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error(\"Invalid page\");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):\"landscape\"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends s{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(const t of this.imagesHref){const e=new i(this.render,t,\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class h{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return h.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x;return Math.acos((i*s+n*h)/(Math.sqrt(i*i+n*n)*Math.sqrt(s*s+h*h)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(h.GetDistanceBetweenTwoPoint(t,i)<=e)return i;const s=t.x,n=t.y,r=i.x,o=i.y;let a=Math.sqrt(Math.pow(e,2)*Math.pow(s-r,2)/(Math.pow(s-r,2)+Math.pow(n-o,2)))+s;i.x<0&&(a*=-1);let g=(a-s)*(n-o)/(s-r)+n;return s-r+n===0&&(g=e),{x:a,y:g}}static GetIntersectBetweenTwoSegment(t,e,i){return h.PointInRect(t,h.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x,r=t[0].x*t[1].y-t[1].x*t[0].y,o=e[0].x*e[1].y-e[1].x*e[0].y,a=i*o-s*r,g=n*o-h*r,l=-(r*h-o*n)/(i*h-s*n),d=-(i*o-s*r)/(i*h-s*n);if(isFinite(l)&&isFinite(d))return{x:l,y:d};if(Math.abs(a-g)<.1)throw new Error(\"Segment included\");return null}static GetCordsFromTwoPoint(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.max(i,s),h=[t];function r(t,e,i,s,n){return e>t?t+n*(i/s):e<t?t-n*(i/s):t}for(let o=1;o<=n;o+=1)h.push({x:r(t.x,e.x,i,n,o),y:r(t.y,e.y,s,n,o)});return h}}class r extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add(\"stf__item\"),this.element.classList.add(\"--\"+i)}newTemporaryCopy(){return\"hard\"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new r(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove(\"--simple\");const h=`\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\"hard\"===e?this.drawHard(h):this.drawSoft(i,h)}drawHard(t=\"\"){const e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,s=t+\"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \"+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=s}drawSoft(t,e=\"\"){let i=\"polygon( \";for(const t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};e=h.GetRotatedPoint(e,{x:0,y:0},this.state.angle),i+=e.x+\"px \"+e.y+\"px, \"}i=i.slice(0,-2),i+=\")\";const s=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=s}simpleDraw(t){const e=this.render.getRect(),i=e.pageWidth,s=e.height,n=1===t?e.left+e.pageWidth:e.left,h=e.top;this.element.classList.add(\"--simple\"),this.element.style.cssText=`\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove(\"--left\",\"--right\"),this.element.classList.add(1===t?\"--right\":\"--left\")}setDrawingDensity(t){this.element.classList.remove(\"--soft\",\"--hard\"),this.element.classList.add(\"--\"+t),super.setDrawingDensity(t)}}class o extends s{constructor(t,e,i,s){super(t,e),this.element=i,this.pagesElement=s}load(){for(const t of this.pagesElement){const e=new r(this.render,t,\"hard\"===t.dataset.density?\"hard\":\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class a{constructor(t,e,i,s){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(s,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||\"bottom\"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),\"top\"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):\"top\"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return\"top\"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e=\"top\"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error(\"Point is too small\");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,i=\"bottom\"===this.corner?this.pageHeight-t.y:t.y;let s=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(s=-s);const n=Math.PI-s;if(!isFinite(s)||n>=0&&n<.003)throw new Error(\"The G point is too small\");return\"bottom\"===this.corner&&(s=-s),s}getPageRect(t){return\"top\"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};\"top\"===this.corner?(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,i){let s=t;const n=h.LimitPointToCircle(e,this.pageWidth,s);s!==n&&(s=n,this.updateAngleAndGeometry(s));const r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let o=this.rect.bottomRight,a=this.rect.topLeft;if(\"bottom\"===this.corner&&(o=this.rect.topRight,a=this.rect.bottomLeft),o.x<=0){const t=h.LimitPointToCircle(i,r,a);t!==s&&(s=t,this.updateAngleAndGeometry(s))}return s}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state=\"read\",this.render=t,this.app=e}fold(t){this.setState(\"user_fold\"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState(\"flipping\");const i=e.height/10,s=\"bottom\"===this.calc.getCorner()?e.height-i:i,n=\"bottom\"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:s}),this.animateFlippingTo({x:e.pageWidth-i,y:s},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();const e=this.render.convertToBook(t),i=this.getBoundsRect(),s=this.getDirectionByPoint(e),n=e.y>=i.height/2?\"bottom\":\"top\";if(!this.checkDirection(s))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(s),this.bottomPage=this.app.getPageCollection().getBottomPage(s),\"landscape\"===this.render.getOrientation())if(1===s){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}return this.render.setDirection(s),this.calc=new a(s,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const i=this.app.getPageCollection().getCurrentSpreadIndex(),s=this.app.getPageCollection().getSpreadIndexByPage(t);try{s>i&&(this.app.getPageCollection().setCurrentSpreadIndex(s-1),this.flipNext(e)),s<i&&(this.app.getPageCollection().setCurrentSpreadIndex(s+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:\"top\"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:\"top\"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),i=\"bottom\"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState(\"read\",\"fold_corner\"))return;const e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState(\"fold_corner\"),this.calc.calc({x:i-1,y:1});const s=50,n=\"bottom\"===this.calc.getCorner()?e.height-1:1,h=\"bottom\"===this.calc.getCorner()?e.height-s:s;this.animateFlippingTo({x:i-1,y:n},{x:i-s,y:h},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState(\"read\"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,s=!0){const n=h.GetCordsFromTwoPoint(t,e),r=[];for(const t of n)r.push(()=>this.do(t));const o=this.getAnimationDuration(n.length);this.render.startAnimation(r,o,()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),s&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState(\"read\"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if(\"portrait\"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),i=e.pageWidth,s=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);return n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<s||n.x>e.width-s)&&(n.y<s||n.y>e.height-s)}}class l{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const i=new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t=\"landscape\";const e=this.getBlockWidth(),i=e/2,s=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let h=this.setting.width,r=this.setting.height,o=i-h;return\"stretch\"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t=\"portrait\"),h=\"portrait\"===t?this.getBlockWidth():this.getBlockWidth()/2,h>this.setting.maxWidth&&(h=this.setting.maxWidth),r=h/n,r>this.getBlockHeight()&&(r=this.getBlockHeight(),h=r*n),o=\"portrait\"===t?i-h/2-h:i-h):e<2*h&&this.app.getSettings().usePortrait&&(t=\"portrait\",o=i-h/2-h),this.boundsRect={left:o,top:s-r/2,width:2*h,height:r,pageWidth:h},t}setShadowData(t,e,i,s){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:s,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&\"portrait\"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class d extends l{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext(\"2d\")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),\"portrait\"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();\"portrait\"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);const s=this.ctx.createLinearGradient(0,0,e,0);s.addColorStop(0,\"rgba(0, 0, 0, 0)\"),s.addColorStop(.4,\"rgba(0, 0, 0, 0.2)\"),s.addColorStop(.49,\"rgba(0, 0, 0, 0.1)\"),s.addColorStop(.5,\"rgba(0, 0, 0, 0.5)\"),s.addColorStop(.51,\"rgba(0, 0, 0, 0.4)\"),s.addColorStop(1,\"rgba(0, 0, 0, 0)\"),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),i.addColorStop(1,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,\"rgba(0, 0, 0, 0)\"),i.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,s,0);0===this.shadow.direction?(this.ctx.translate(-s,-100),n.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.9,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.7,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(0,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(0,-100),n.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.1,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.3,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(1,\"rgba(0, 0, 0, 0)\")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,s,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle=\"white\",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class p{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(i)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||\"read\"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),\"read\"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);let s=!1;if(null!==this.touchPoint){const t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"),s=!0),this.touchPoint=null}this.app.userStop(i,s)}},this.parentElement=t,t.classList.add(\"stf__parent\"),t.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__wrapper\"></div>'),this.wrapper=t.querySelector(\".stf__wrapper\"),this.app=e;const s=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*s+\"px\",t.style.minHeight=i.minHeight+\"px\",\"fixed\"===i.size&&(t.style.minWidth=i.width*s+\"px\",t.style.minHeight=i.height+\"px\"),i.autoSize&&(t.style.width=\"100%\",t.style.maxWidth=2*i.maxWidth+\"px\"),t.style.display=\"block\",window.addEventListener(\"resize\",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove(\"--portrait\",\"--landscape\"),\"portrait\"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+\"%\"),this.wrapper.classList.add(\"--portrait\")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+\"%\"),this.wrapper.classList.add(\"--landscape\")),this.update()}removeHandlers(){window.removeEventListener(\"resize\",this.onResize),this.distElement.removeEventListener(\"mousedown\",this.onMouseDown),this.distElement.removeEventListener(\"touchstart\",this.onTouchStart),window.removeEventListener(\"mousemove\",this.onMouseMove),window.removeEventListener(\"touchmove\",this.onTouchMove),window.removeEventListener(\"mouseup\",this.onMouseUp),window.removeEventListener(\"touchend\",this.onTouchEnd)}setHandlers(){window.addEventListener(\"resize\",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener(\"mousedown\",this.onMouseDown),this.distElement.addEventListener(\"touchstart\",this.onTouchStart),window.addEventListener(\"mousemove\",this.onMouseMove),window.addEventListener(\"touchmove\",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener(\"mouseup\",this.onMouseUp),window.addEventListener(\"touchend\",this.onTouchEnd))}getMousePos(t,e){const i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||![\"a\",\"button\"].includes(t.tagName.toLowerCase())}}class c extends p{constructor(t,e,i,s){super(t,e,i),this.wrapper.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__block\"></div>'),this.distElement=t.querySelector(\".stf__block\"),this.items=s;for(const t of s)this.distElement.appendChild(t);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML=\"\";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class u extends p{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class=\"stf__canvas\"></canvas>',this.canvas=t.querySelectorAll(\"canvas\")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue(\"width\"),10),i=parseInt(t.getPropertyValue(\"height\"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class w extends l{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML(\"beforeend\",'<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'),this.outerShadow=this.element.querySelector(\".stf__outerShadow\"),this.innerShadow=this.element.querySelector(\".stf__innerShadow\"),this.hardShadow=this.element.querySelector(\".stf__hardShadow\"),this.hardInnerShadow=this.element.querySelector(\".stf__hardInnerShadow\")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText=\"display: none\",this.innerShadow.style.cssText=\"display: none\",this.hardShadow.style.cssText=\"display: none\",this.hardInnerShadow.style.cssText=\"display: none\"}reload(){this.element.querySelector(\".stf__outerShadow\")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let s=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0);\":\"transform: translate3d(0, 0, 0) rotateY(180deg);\",this.hardInnerShadow.style.cssText=s}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0) rotateY(180deg);\":\"transform: translate3d(0, 0, 0);\",this.hardShadow.style.cssText=i}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,s=0===this.getDirection()?\"to left\":\"to right\",n=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,o=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let a=\"polygon( \";for(const t of o){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:i,y:100},r),a+=e.x+\"px \"+e.y+\"px, \"}a=a.slice(0,-2),a+=\")\";const g=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${e}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${r}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;this.innerShadow.style.cssText=g}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,s=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?\"to right\":\"to left\",r=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let o=\"polygon( \";for(const t of r)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:s,y:100},i),o+=e.x+\"px \"+e.y+\"px, \"}o=o.slice(0,-2),o+=\")\";const a=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x-s}px, ${e.y-100}px, 0) rotate(${i}rad);\\n            clip-path: ${o};\\n            -webkit-clip-path: ${o};\\n        `;this.outerShadow.style.cssText=a}drawLeftPage(){\"portrait\"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;\"portrait\"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&(\"soft\"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText=\"display: none\"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:\"fixed\",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),\"stretch\"!==e.size&&\"fixed\"!==e.size)throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');if(e.width<=0||e.height<=0)throw new Error(\"Invalid width or height\");if(e.flippingTime<=0)throw new Error(\"Invalid flipping time\");return\"stretch\"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&\"undefined\"!=typeof document){var s=document.head||document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",\"top\"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(const s of this.events.get(t))s({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new x).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new d(this,this.setting,e),this.flipController=new g(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new c(this.block,this,this.setting,t),this.render=new w(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t=\"top\"){this.flipController.flipNext(t)}flipPrev(t=\"top\"){this.flipController.flipPrev(t)}flip(t,e=\"top\"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger(\"changeState\",this,t)}updatePageIndex(t){this.trigger(\"flip\",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger(\"changeOrientation\",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&h.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,\"__esModule\",{value:!0})}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9wYWdlLWZsaXBAMi4wLjcvbm9kZV9tb2R1bGVzL3BhZ2UtZmxpcC9kaXN0L2pzL3BhZ2UtZmxpcC5icm93c2VyLmpzIiwibWFwcGluZ3MiOiJBQUFBLGVBQWUsS0FBb0QsWUFBWSxDQUFnRixDQUFDLG1CQUFtQixhQUFhLFFBQVEsaUJBQWlCLFlBQVksMEJBQTBCLFFBQVEsZ0NBQWdDLGdGQUFnRixjQUFjLCtDQUErQyxxQkFBcUIseUJBQXlCLGVBQWUsc0JBQXNCLFlBQVksbUJBQW1CLFdBQVcsa0JBQWtCLHVCQUF1Qiw4QkFBOEIsZ0JBQWdCLHFEQUFxRCxrQkFBa0IsbUJBQW1CLG9CQUFvQiw4QkFBOEIsYUFBYSwyQkFBMkIsZUFBZSw2QkFBNkIsa0JBQWtCLG1CQUFtQixvR0FBb0csUUFBUSxxSkFBcUosNENBQTRDLG9HQUFvRyxtR0FBbUcsUUFBUSxrQkFBa0IsY0FBYyw0SEFBNEgsK0RBQStELFFBQVEsTUFBTSxvQkFBb0IsZ0pBQWdKLFNBQVMscUJBQXFCLG1NQUFtTSxPQUFPLHFDQUFxQyxlQUFlLEVBQUUsbUJBQW1CLFlBQVksbUJBQW1CLFlBQVksc0JBQXNCLFFBQVEsaUJBQWlCLGtOQUFrTixVQUFVLGNBQWMsZUFBZSwrQ0FBK0MsWUFBWSxvQkFBb0Isa0NBQWtDLFFBQVEsd0ZBQXdGLFlBQVksb0JBQW9CLGdJQUFnSSxZQUFZLDBGQUEwRix3QkFBd0IseUJBQXlCLFlBQVksV0FBVyx5Q0FBeUMsWUFBWSxlQUFlLHlCQUF5QixXQUFXLGtCQUFrQixXQUFXLGtEQUFrRCx1Q0FBdUMsVUFBVSw4QkFBOEIsa0RBQWtELFVBQVUsOEJBQThCLGdDQUFnQyxtQkFBbUIsZ0NBQWdDLDRHQUE0RywwREFBMEQsOERBQThELGlCQUFpQixnQ0FBZ0MsMkZBQTJGLDBEQUEwRCw4RUFBOEUsV0FBVywrRkFBK0YsV0FBVyx5RUFBeUUsc0JBQXNCLDZCQUE2QixhQUFhLHdFQUF3RSxxQ0FBcUMs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LEdBQUcsR0FBRywrQkFBK0IsY0FBYyxvQkFBb0IsUUFBUSxpRkFBaUYsT0FBTyxzQkFBc0Isb0JBQW9CLDJEQUEyRCxnQkFBZ0IsSUFBSSxpQkFBaUIsa0lBQWtJLFVBQVUsc0NBQXNDLFNBQVMsdUNBQXVDLGtCQUFrQiw0Q0FBNEMsNEJBQTRCLHNOQUFzTiwyQ0FBMkMsOERBQThELEVBQUUsSUFBSSxnQkFBZ0Isb1RBQW9ULDJDQUEyQyw4REFBOEQsRUFBRSxJQUFJLG9CQUFvQix5Q0FBeUMsMkhBQTJILHlDQUF5QyxFQUFFLGtCQUFrQix5Q0FBeUMsZ01BQWdNLHlDQUF5QyxFQUFFLFFBQVEscUNBQXFDLGlCQUFpQixzQkFBc0IsaUJBQWlCLHNCQUFzQixjQUFjLG1CQUFtQixrQkFBa0IsZ0NBQWdDLGtCQUFrQixnQ0FBZ0MsZ0JBQWdCLG9DQUFvQyxlQUFlLG1DQUFtQyxtQkFBbUIsNEJBQTRCLHFCQUFxQixzRkFBc0YsZUFBZSxpQ0FBaUMsc0JBQXNCLHdDQUF3QyxXQUFXLDZCQUE2QixZQUFZLG1CQUFtQixvQkFBb0IsMkJBQTJCLGlCQUFpQixvQ0FBb0MsZ0JBQWdCLDZCQUE2QixjQUFjLG9CQUFvQixRQUFRLGVBQWUsV0FBVyxzQ0FBc0Msb0JBQW9CLGtCQUFrQixrQkFBa0IsNERBQTRELGNBQWMsOE1BQThNLGlCQUFpQix5SEFBeUgsdUNBQXVDLFNBQVMsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvLnBucG0vcGFnZS1mbGlwQDIuMC43L25vZGVfbW9kdWxlcy9wYWdlLWZsaXAvZGlzdC9qcy9wYWdlLWZsaXAuYnJvd3Nlci5qcz85YTdjIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP2UoZXhwb3J0cyk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJleHBvcnRzXCJdLGUpOmUoKHQ9dHx8c2VsZikuU3Q9e30pfSh0aGlzLChmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtjbGFzcyBle2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5zdGF0ZT17YW5nbGU6MCxhcmVhOltdLHBvc2l0aW9uOnt4OjAseTowfSxoYXJkQW5nbGU6MCxoYXJkRHJhd2luZ0FuZ2xlOjB9LHRoaXMuY3JlYXRlZERlbnNpdHk9ZSx0aGlzLm5vd0RyYXdpbmdEZW5zaXR5PXRoaXMuY3JlYXRlZERlbnNpdHksdGhpcy5yZW5kZXI9dH1zZXREZW5zaXR5KHQpe3RoaXMuY3JlYXRlZERlbnNpdHk9dCx0aGlzLm5vd0RyYXdpbmdEZW5zaXR5PXR9c2V0RHJhd2luZ0RlbnNpdHkodCl7dGhpcy5ub3dEcmF3aW5nRGVuc2l0eT10fXNldFBvc2l0aW9uKHQpe3RoaXMuc3RhdGUucG9zaXRpb249dH1zZXRBbmdsZSh0KXt0aGlzLnN0YXRlLmFuZ2xlPXR9c2V0QXJlYSh0KXt0aGlzLnN0YXRlLmFyZWE9dH1zZXRIYXJkRHJhd2luZ0FuZ2xlKHQpe3RoaXMuc3RhdGUuaGFyZERyYXdpbmdBbmdsZT10fXNldEhhcmRBbmdsZSh0KXt0aGlzLnN0YXRlLmhhcmRBbmdsZT10LHRoaXMuc3RhdGUuaGFyZERyYXdpbmdBbmdsZT10fXNldE9yaWVudGF0aW9uKHQpe3RoaXMub3JpZW50YXRpb249dH1nZXREcmF3aW5nRGVuc2l0eSgpe3JldHVybiB0aGlzLm5vd0RyYXdpbmdEZW5zaXR5fWdldERlbnNpdHkoKXtyZXR1cm4gdGhpcy5jcmVhdGVkRGVuc2l0eX1nZXRIYXJkQW5nbGUoKXtyZXR1cm4gdGhpcy5zdGF0ZS5oYXJkQW5nbGV9fWNsYXNzIGkgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHQsZSxpKXtzdXBlcih0LGkpLHRoaXMuaW1hZ2U9bnVsbCx0aGlzLmlzTG9hZD0hMSx0aGlzLmxvYWRpbmdBbmdsZT0wLHRoaXMuaW1hZ2U9bmV3IEltYWdlLHRoaXMuaW1hZ2Uuc3JjPWV9ZHJhdyh0KXtjb25zdCBlPXRoaXMucmVuZGVyLmdldENvbnRleHQoKSxpPXRoaXMucmVuZGVyLmNvbnZlcnRUb0dsb2JhbCh0aGlzLnN0YXRlLnBvc2l0aW9uKSxzPXRoaXMucmVuZGVyLmdldFJlY3QoKS5wYWdlV2lkdGgsbj10aGlzLnJlbmRlci5nZXRSZWN0KCkuaGVpZ2h0O2Uuc2F2ZSgpLGUudHJhbnNsYXRlKGkueCxpLnkpLGUuYmVnaW5QYXRoKCk7Zm9yKGxldCB0IG9mIHRoaXMuc3RhdGUuYXJlYSludWxsIT09dCYmKHQ9dGhpcy5yZW5kZXIuY29udmVydFRvR2xvYmFsKHQpLGUubGluZVRvKHQueC1pLngsdC55LWkueSkpO2Uucm90YXRlKHRoaXMuc3RhdGUuYW5nbGUpLGUuY2xpcCgpLHRoaXMuaXNMb2FkP2UuZHJhd0ltYWdlKHRoaXMuaW1hZ2UsMCwwLHMsbik6dGhpcy5kcmF3TG9hZGVyKGUse3g6MCx5OjB9LHMsbiksZS5yZXN0b3JlKCl9c2ltcGxlRHJhdyh0KXtjb25zdCBlPXRoaXMucmVuZGVyLmdldFJlY3QoKSxpPXRoaXMucmVuZGVyLmdldENvbnRleHQoKSxzPWUucGFnZVdpZHRoLG49ZS5oZWlnaHQsaD0xPT09dD9lLmxlZnQrZS5wYWdlV2lkdGg6ZS5sZWZ0LHI9ZS50b3A7dGhpcy5pc0xvYWQ/aS5kcmF3SW1hZ2UodGhpcy5pbWFnZSxoLHIscyxuKTp0aGlzLmRyYXdMb2FkZXIoaSx7eDpoLHk6cn0scyxuKX1kcmF3TG9hZGVyKHQsZSxpLHMpe3QuYmVnaW5QYXRoKCksdC5zdHJva2VTdHlsZT1cInJnYigyMDAsIDIwMCwgMjAwKVwiLHQuZmlsbFN0eWxlPVwicmdiKDI1NSwgMjU1LCAyNTUpXCIsdC5saW5lV2lkdGg9MSx0LnJlY3QoZS54KzEsZS55KzEsaS0xLHMtMSksdC5zdHJva2UoKSx0LmZpbGwoKTtjb25zdCBuPXt4OmUueCtpLzIseTplLnkrcy8yfTt0LmJlZ2luUGF0aCgpLHQubGluZVdpZHRoPTEwLHQuYXJjKG4ueCxuLnksMjAsdGhpcy5sb2FkaW5nQW5nbGUsMypNYXRoLlBJLzIrdGhpcy5sb2FkaW5nQW5nbGUpLHQuc3Ryb2tlKCksdC5jbG9zZVBhdGgoKSx0aGlzLmxvYWRpbmdBbmdsZSs9LjA3LHRoaXMubG9hZGluZ0FuZ2xlPj0yKk1hdGguUEkmJih0aGlzLmxvYWRpbmdBbmdsZT0wKX1sb2FkKCl7dGhpcy5pc0xvYWR8fCh0aGlzLmltYWdlLm9ubG9hZD0oKT0+e3RoaXMuaXNMb2FkPSEwfSl9bmV3VGVtcG9yYXJ5Q29weSgpe3JldHVybiB0aGlzfWdldFRlbXBvcmFyeUNvcHkoKXtyZXR1cm4gdGhpc31oaWRlVGVtcG9yYXJ5Q29weSgpe319Y2xhc3Mgc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMucGFnZXM9W10sdGhpcy5jdXJyZW50UGFnZUluZGV4PTAsdGhpcy5jdXJyZW50U3ByZWFkSW5kZXg9MCx0aGlzLmxhbmRzY2FwZVNwcmVhZD1bXSx0aGlzLnBvcnRyYWl0U3ByZWFkPVtdLHRoaXMucmVuZGVyPWUsdGhpcy5hcHA9dCx0aGlzLmN1cnJlbnRQYWdlSW5kZXg9MCx0aGlzLmlzU2hvd0NvdmVyPXRoaXMuYXBwLmdldFNldHRpbmdzKCkuc2hvd0NvdmVyfWRlc3Ryb3koKXt0aGlzLnBhZ2VzPVtdfWNyZWF0ZVNwcmVhZCgpe3RoaXMubGFuZHNjYXBlU3ByZWFkPVtdLHRoaXMucG9ydHJhaXRTcHJlYWQ9W107Zm9yKGxldCB0PTA7dDx0aGlzLnBhZ2VzLmxlbmd0aDt0KyspdGhpcy5wb3J0cmFpdFNwcmVhZC5wdXNoKFt0XSk7bGV0IHQ9MDt0aGlzLmlzU2hvd0NvdmVyJiYodGhpcy5wYWdlc1swXS5zZXREZW5zaXR5KFwiaGFyZFwiKSx0aGlzLmxhbmRzY2FwZVNwcmVhZC5wdXNoKFt0XSksdCsrKTtmb3IobGV0IGU9dDtlPHRoaXMucGFnZXMubGVuZ3RoO2UrPTIpZTx0aGlzLnBhZ2VzLmxlbmd0aC0xP3RoaXMubGFuZHNjYXBlU3ByZWFkLnB1c2goW2UsZSsxXSk6KHRoaXMubGFuZHNjYXBlU3ByZWFkLnB1c2goW2VdKSx0aGlzLnBhZ2VzW2VdLnNldERlbnNpdHkoXCJoYXJkXCIpKX1nZXRTcHJlYWQoKXtyZXR1cm5cImxhbmRzY2FwZVwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKT90aGlzLmxhbmRzY2FwZVNwcmVhZDp0aGlzLnBvcnRyYWl0U3ByZWFkfWdldFNwcmVhZEluZGV4QnlQYWdlKHQpe2NvbnN0IGU9dGhpcy5nZXRTcHJlYWQoKTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKylpZih0PT09ZVtpXVswXXx8dD09PWVbaV1bMV0pcmV0dXJuIGk7cmV0dXJuIG51bGx9Z2V0UGFnZUNvdW50KCl7cmV0dXJuIHRoaXMucGFnZXMubGVuZ3RofWdldFBhZ2VzKCl7cmV0dXJuIHRoaXMucGFnZXN9Z2V0UGFnZSh0KXtpZih0Pj0wJiZ0PHRoaXMucGFnZXMubGVuZ3RoKXJldHVybiB0aGlzLnBhZ2VzW3RdO3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFnZSBudW1iZXJcIil9bmV4dEJ5KHQpe2NvbnN0IGU9dGhpcy5wYWdlcy5pbmRleE9mKHQpO3JldHVybiBlPHRoaXMucGFnZXMubGVuZ3RoLTE/dGhpcy5wYWdlc1tlKzFdOm51bGx9cHJldkJ5KHQpe2NvbnN0IGU9dGhpcy5wYWdlcy5pbmRleE9mKHQpO3JldHVybiBlPjA/dGhpcy5wYWdlc1tlLTFdOm51bGx9Z2V0RmxpcHBpbmdQYWdlKHQpe2NvbnN0IGU9dGhpcy5jdXJyZW50U3ByZWFkSW5kZXg7aWYoXCJwb3J0cmFpdFwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKSlyZXR1cm4gMD09PXQ/dGhpcy5wYWdlc1tlXS5uZXdUZW1wb3JhcnlDb3B5KCk6dGhpcy5wYWdlc1tlLTFdO3tjb25zdCBpPTA9PT10P3RoaXMuZ2V0U3ByZWFkKClbZSsxXTp0aGlzLmdldFNwcmVhZCgpW2UtMV07cmV0dXJuIDE9PT1pLmxlbmd0aHx8MD09PXQ/dGhpcy5wYWdlc1tpWzBdXTp0aGlzLnBhZ2VzW2lbMV1dfX1nZXRCb3R0b21QYWdlKHQpe2NvbnN0IGU9dGhpcy5jdXJyZW50U3ByZWFkSW5kZXg7aWYoXCJwb3J0cmFpdFwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKSlyZXR1cm4gMD09PXQ/dGhpcy5wYWdlc1tlKzFdOnRoaXMucGFnZXNbZS0xXTt7Y29uc3QgaT0wPT09dD90aGlzLmdldFNwcmVhZCgpW2UrMV06dGhpcy5nZXRTcHJlYWQoKVtlLTFdO3JldHVybiAxPT09aS5sZW5ndGg/dGhpcy5wYWdlc1tpWzBdXTowPT09dD90aGlzLnBhZ2VzW2lbMV1dOnRoaXMucGFnZXNbaVswXV19fXNob3dOZXh0KCl7dGhpcy5jdXJyZW50U3ByZWFkSW5kZXg8dGhpcy5nZXRTcHJlYWQoKS5sZW5ndGgmJih0aGlzLmN1cnJlbnRTcHJlYWRJbmRleCsrLHRoaXMuc2hvd1NwcmVhZCgpKX1zaG93UHJldigpe3RoaXMuY3VycmVudFNwcmVhZEluZGV4PjAmJih0aGlzLmN1cnJlbnRTcHJlYWRJbmRleC0tLHRoaXMuc2hvd1NwcmVhZCgpKX1nZXRDdXJyZW50UGFnZUluZGV4KCl7cmV0dXJuIHRoaXMuY3VycmVudFBhZ2VJbmRleH1zaG93KHQ9bnVsbCl7aWYobnVsbD09PXQmJih0PXRoaXMuY3VycmVudFBhZ2VJbmRleCksdDwwfHx0Pj10aGlzLnBhZ2VzLmxlbmd0aClyZXR1cm47Y29uc3QgZT10aGlzLmdldFNwcmVhZEluZGV4QnlQYWdlKHQpO251bGwhPT1lJiYodGhpcy5jdXJyZW50U3ByZWFkSW5kZXg9ZSx0aGlzLnNob3dTcHJlYWQoKSl9Z2V0Q3VycmVudFNwcmVhZEluZGV4KCl7cmV0dXJuIHRoaXMuY3VycmVudFNwcmVhZEluZGV4fXNldEN1cnJlbnRTcHJlYWRJbmRleCh0KXtpZighKHQ+PTAmJnQ8dGhpcy5nZXRTcHJlYWQoKS5sZW5ndGgpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFnZVwiKTt0aGlzLmN1cnJlbnRTcHJlYWRJbmRleD10fXNob3dTcHJlYWQoKXtjb25zdCB0PXRoaXMuZ2V0U3ByZWFkKClbdGhpcy5jdXJyZW50U3ByZWFkSW5kZXhdOzI9PT10Lmxlbmd0aD8odGhpcy5yZW5kZXIuc2V0TGVmdFBhZ2UodGhpcy5wYWdlc1t0WzBdXSksdGhpcy5yZW5kZXIuc2V0UmlnaHRQYWdlKHRoaXMucGFnZXNbdFsxXV0pKTpcImxhbmRzY2FwZVwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKSYmdFswXT09PXRoaXMucGFnZXMubGVuZ3RoLTE/KHRoaXMucmVuZGVyLnNldExlZnRQYWdlKHRoaXMucGFnZXNbdFswXV0pLHRoaXMucmVuZGVyLnNldFJpZ2h0UGFnZShudWxsKSk6KHRoaXMucmVuZGVyLnNldExlZnRQYWdlKG51bGwpLHRoaXMucmVuZGVyLnNldFJpZ2h0UGFnZSh0aGlzLnBhZ2VzW3RbMF1dKSksdGhpcy5jdXJyZW50UGFnZUluZGV4PXRbMF0sdGhpcy5hcHAudXBkYXRlUGFnZUluZGV4KHRoaXMuY3VycmVudFBhZ2VJbmRleCl9fWNsYXNzIG4gZXh0ZW5kcyBze2NvbnN0cnVjdG9yKHQsZSxpKXtzdXBlcih0LGUpLHRoaXMuaW1hZ2VzSHJlZj1pfWxvYWQoKXtmb3IoY29uc3QgdCBvZiB0aGlzLmltYWdlc0hyZWYpe2NvbnN0IGU9bmV3IGkodGhpcy5yZW5kZXIsdCxcInNvZnRcIik7ZS5sb2FkKCksdGhpcy5wYWdlcy5wdXNoKGUpfXRoaXMuY3JlYXRlU3ByZWFkKCl9fWNsYXNzIGh7c3RhdGljIEdldERpc3RhbmNlQmV0d2VlblR3b1BvaW50KHQsZSl7cmV0dXJuIG51bGw9PT10fHxudWxsPT09ZT8xLzA6TWF0aC5zcXJ0KE1hdGgucG93KGUueC10LngsMikrTWF0aC5wb3coZS55LXQueSwyKSl9c3RhdGljIEdldFNlZ21lbnRMZW5ndGgodCl7cmV0dXJuIGguR2V0RGlzdGFuY2VCZXR3ZWVuVHdvUG9pbnQodFswXSx0WzFdKX1zdGF0aWMgR2V0QW5nbGVCZXR3ZWVuVHdvTGluZSh0LGUpe2NvbnN0IGk9dFswXS55LXRbMV0ueSxzPWVbMF0ueS1lWzFdLnksbj10WzFdLngtdFswXS54LGg9ZVsxXS54LWVbMF0ueDtyZXR1cm4gTWF0aC5hY29zKChpKnMrbipoKS8oTWF0aC5zcXJ0KGkqaStuKm4pKk1hdGguc3FydChzKnMraCpoKSkpfXN0YXRpYyBQb2ludEluUmVjdCh0LGUpe3JldHVybiBudWxsPT09ZT9udWxsOmUueD49dC5sZWZ0JiZlLng8PXQud2lkdGgrdC5sZWZ0JiZlLnk+PXQudG9wJiZlLnk8PXQudG9wK3QuaGVpZ2h0P2U6bnVsbH1zdGF0aWMgR2V0Um90YXRlZFBvaW50KHQsZSxpKXtyZXR1cm57eDp0LngqTWF0aC5jb3MoaSkrdC55Kk1hdGguc2luKGkpK2UueCx5OnQueSpNYXRoLmNvcyhpKS10LngqTWF0aC5zaW4oaSkrZS55fX1zdGF0aWMgTGltaXRQb2ludFRvQ2lyY2xlKHQsZSxpKXtpZihoLkdldERpc3RhbmNlQmV0d2VlblR3b1BvaW50KHQsaSk8PWUpcmV0dXJuIGk7Y29uc3Qgcz10Lngsbj10Lnkscj1pLngsbz1pLnk7bGV0IGE9TWF0aC5zcXJ0KE1hdGgucG93KGUsMikqTWF0aC5wb3cocy1yLDIpLyhNYXRoLnBvdyhzLXIsMikrTWF0aC5wb3cobi1vLDIpKSkrcztpLng8MCYmKGEqPS0xKTtsZXQgZz0oYS1zKSoobi1vKS8ocy1yKStuO3JldHVybiBzLXIrbj09PTAmJihnPWUpLHt4OmEseTpnfX1zdGF0aWMgR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQodCxlLGkpe3JldHVybiBoLlBvaW50SW5SZWN0KHQsaC5HZXRJbnRlcnNlY3RCZWV0d2VuVHdvTGluZShlLGkpKX1zdGF0aWMgR2V0SW50ZXJzZWN0QmVldHdlblR3b0xpbmUodCxlKXtjb25zdCBpPXRbMF0ueS10WzFdLnkscz1lWzBdLnktZVsxXS55LG49dFsxXS54LXRbMF0ueCxoPWVbMV0ueC1lWzBdLngscj10WzBdLngqdFsxXS55LXRbMV0ueCp0WzBdLnksbz1lWzBdLngqZVsxXS55LWVbMV0ueCplWzBdLnksYT1pKm8tcypyLGc9bipvLWgqcixsPS0ocipoLW8qbikvKGkqaC1zKm4pLGQ9LShpKm8tcypyKS8oaSpoLXMqbik7aWYoaXNGaW5pdGUobCkmJmlzRmluaXRlKGQpKXJldHVybnt4OmwseTpkfTtpZihNYXRoLmFicyhhLWcpPC4xKXRocm93IG5ldyBFcnJvcihcIlNlZ21lbnQgaW5jbHVkZWRcIik7cmV0dXJuIG51bGx9c3RhdGljIEdldENvcmRzRnJvbVR3b1BvaW50KHQsZSl7Y29uc3QgaT1NYXRoLmFicyh0LngtZS54KSxzPU1hdGguYWJzKHQueS1lLnkpLG49TWF0aC5tYXgoaSxzKSxoPVt0XTtmdW5jdGlvbiByKHQsZSxpLHMsbil7cmV0dXJuIGU+dD90K24qKGkvcyk6ZTx0P3QtbiooaS9zKTp0fWZvcihsZXQgbz0xO288PW47bys9MSloLnB1c2goe3g6cih0LngsZS54LGksbixvKSx5OnIodC55LGUueSxzLG4sbyl9KTtyZXR1cm4gaH19Y2xhc3MgciBleHRlbmRzIGV7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQsaSksdGhpcy5jb3BpZWRFbGVtZW50PW51bGwsdGhpcy50ZW1wb3JhcnlDb3B5PW51bGwsdGhpcy5pc0xvYWQ9ITEsdGhpcy5lbGVtZW50PWUsdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzdGZfX2l0ZW1cIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCItLVwiK2kpfW5ld1RlbXBvcmFyeUNvcHkoKXtyZXR1cm5cImhhcmRcIj09PXRoaXMubm93RHJhd2luZ0RlbnNpdHk/dGhpczoobnVsbD09PXRoaXMudGVtcG9yYXJ5Q29weSYmKHRoaXMuY29waWVkRWxlbWVudD10aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCEwKSx0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNvcGllZEVsZW1lbnQpLHRoaXMudGVtcG9yYXJ5Q29weT1uZXcgcih0aGlzLnJlbmRlcix0aGlzLmNvcGllZEVsZW1lbnQsdGhpcy5ub3dEcmF3aW5nRGVuc2l0eSkpLHRoaXMuZ2V0VGVtcG9yYXJ5Q29weSgpKX1nZXRUZW1wb3JhcnlDb3B5KCl7cmV0dXJuIHRoaXMudGVtcG9yYXJ5Q29weX1oaWRlVGVtcG9yYXJ5Q29weSgpe251bGwhPT10aGlzLnRlbXBvcmFyeUNvcHkmJih0aGlzLmNvcGllZEVsZW1lbnQucmVtb3ZlKCksdGhpcy5jb3BpZWRFbGVtZW50PW51bGwsdGhpcy50ZW1wb3JhcnlDb3B5PW51bGwpfWRyYXcodCl7Y29uc3QgZT10fHx0aGlzLm5vd0RyYXdpbmdEZW5zaXR5LGk9dGhpcy5yZW5kZXIuY29udmVydFRvR2xvYmFsKHRoaXMuc3RhdGUucG9zaXRpb24pLHM9dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLnBhZ2VXaWR0aCxuPXRoaXMucmVuZGVyLmdldFJlY3QoKS5oZWlnaHQ7dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCItLXNpbXBsZVwiKTtjb25zdCBoPWBcXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgICAgICAgICB6LWluZGV4OiAke3RoaXMuZWxlbWVudC5zdHlsZS56SW5kZXh9O1xcbiAgICAgICAgICAgIGxlZnQ6IDA7XFxuICAgICAgICAgICAgdG9wOiAwO1xcbiAgICAgICAgICAgIHdpZHRoOiAke3N9cHg7XFxuICAgICAgICAgICAgaGVpZ2h0OiAke259cHg7XFxuICAgICAgICBgO1wiaGFyZFwiPT09ZT90aGlzLmRyYXdIYXJkKGgpOnRoaXMuZHJhd1NvZnQoaSxoKX1kcmF3SGFyZCh0PVwiXCIpe2NvbnN0IGU9dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLmxlZnQrdGhpcy5yZW5kZXIuZ2V0UmVjdCgpLndpZHRoLzIsaT10aGlzLnN0YXRlLmhhcmREcmF3aW5nQW5nbGUscz10K1wiXFxuICAgICAgICAgICAgICAgIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XFxuICAgICAgICAgICAgICAgIGNsaXAtcGF0aDogbm9uZTtcXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1jbGlwLXBhdGg6IG5vbmU7XFxuICAgICAgICAgICAgXCIrKDA9PT10aGlzLm9yaWVudGF0aW9uP2B0cmFuc2Zvcm0tb3JpZ2luOiAke3RoaXMucmVuZGVyLmdldFJlY3QoKS5wYWdlV2lkdGh9cHggMDsgXFxuICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCkgcm90YXRlWSgke2l9ZGVnKTtgOmB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7IFxcbiAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCR7ZX1weCwgMCwgMCkgcm90YXRlWSgke2l9ZGVnKTtgKTt0aGlzLmVsZW1lbnQuc3R5bGUuY3NzVGV4dD1zfWRyYXdTb2Z0KHQsZT1cIlwiKXtsZXQgaT1cInBvbHlnb24oIFwiO2Zvcihjb25zdCB0IG9mIHRoaXMuc3RhdGUuYXJlYSlpZihudWxsIT09dCl7bGV0IGU9MT09PXRoaXMucmVuZGVyLmdldERpcmVjdGlvbigpP3t4Oi10LngrdGhpcy5zdGF0ZS5wb3NpdGlvbi54LHk6dC55LXRoaXMuc3RhdGUucG9zaXRpb24ueX06e3g6dC54LXRoaXMuc3RhdGUucG9zaXRpb24ueCx5OnQueS10aGlzLnN0YXRlLnBvc2l0aW9uLnl9O2U9aC5HZXRSb3RhdGVkUG9pbnQoZSx7eDowLHk6MH0sdGhpcy5zdGF0ZS5hbmdsZSksaSs9ZS54K1wicHggXCIrZS55K1wicHgsIFwifWk9aS5zbGljZSgwLC0yKSxpKz1cIilcIjtjb25zdCBzPWUrYHRyYW5zZm9ybS1vcmlnaW46IDAgMDsgY2xpcC1wYXRoOiAke2l9OyAtd2Via2l0LWNsaXAtcGF0aDogJHtpfTtgKyh0aGlzLnJlbmRlci5pc1NhZmFyaSgpJiYwPT09dGhpcy5zdGF0ZS5hbmdsZT9gdHJhbnNmb3JtOiB0cmFuc2xhdGUoJHt0Lnh9cHgsICR7dC55fXB4KTtgOmB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCR7dC54fXB4LCAke3QueX1weCwgMCkgcm90YXRlKCR7dGhpcy5zdGF0ZS5hbmdsZX1yYWQpO2ApO3RoaXMuZWxlbWVudC5zdHlsZS5jc3NUZXh0PXN9c2ltcGxlRHJhdyh0KXtjb25zdCBlPXRoaXMucmVuZGVyLmdldFJlY3QoKSxpPWUucGFnZVdpZHRoLHM9ZS5oZWlnaHQsbj0xPT09dD9lLmxlZnQrZS5wYWdlV2lkdGg6ZS5sZWZ0LGg9ZS50b3A7dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCItLXNpbXBsZVwiKSx0aGlzLmVsZW1lbnQuc3R5bGUuY3NzVGV4dD1gXFxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyBcXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jazsgXFxuICAgICAgICAgICAgaGVpZ2h0OiAke3N9cHg7IFxcbiAgICAgICAgICAgIGxlZnQ6ICR7bn1weDsgXFxuICAgICAgICAgICAgdG9wOiAke2h9cHg7IFxcbiAgICAgICAgICAgIHdpZHRoOiAke2l9cHg7IFxcbiAgICAgICAgICAgIHotaW5kZXg6ICR7dGhpcy5yZW5kZXIuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCsxfTtgfWdldEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5lbGVtZW50fWxvYWQoKXt0aGlzLmlzTG9hZD0hMH1zZXRPcmllbnRhdGlvbih0KXtzdXBlci5zZXRPcmllbnRhdGlvbih0KSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIi0tbGVmdFwiLFwiLS1yaWdodFwiKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgxPT09dD9cIi0tcmlnaHRcIjpcIi0tbGVmdFwiKX1zZXREcmF3aW5nRGVuc2l0eSh0KXt0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIi0tc29mdFwiLFwiLS1oYXJkXCIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiLS1cIit0KSxzdXBlci5zZXREcmF3aW5nRGVuc2l0eSh0KX19Y2xhc3MgbyBleHRlbmRzIHN7Y29uc3RydWN0b3IodCxlLGkscyl7c3VwZXIodCxlKSx0aGlzLmVsZW1lbnQ9aSx0aGlzLnBhZ2VzRWxlbWVudD1zfWxvYWQoKXtmb3IoY29uc3QgdCBvZiB0aGlzLnBhZ2VzRWxlbWVudCl7Y29uc3QgZT1uZXcgcih0aGlzLnJlbmRlcix0LFwiaGFyZFwiPT09dC5kYXRhc2V0LmRlbnNpdHk/XCJoYXJkXCI6XCJzb2Z0XCIpO2UubG9hZCgpLHRoaXMucGFnZXMucHVzaChlKX10aGlzLmNyZWF0ZVNwcmVhZCgpfX1jbGFzcyBhe2NvbnN0cnVjdG9yKHQsZSxpLHMpe3RoaXMuZGlyZWN0aW9uPXQsdGhpcy5jb3JuZXI9ZSx0aGlzLnRvcEludGVyc2VjdFBvaW50PW51bGwsdGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ9bnVsbCx0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50PW51bGwsdGhpcy5wYWdlV2lkdGg9cGFyc2VJbnQoaSwxMCksdGhpcy5wYWdlSGVpZ2h0PXBhcnNlSW50KHMsMTApfWNhbGModCl7dHJ5e3JldHVybiB0aGlzLnBvc2l0aW9uPXRoaXMuY2FsY0FuZ2xlQW5kUG9zaXRpb24odCksdGhpcy5jYWxjdWxhdGVJbnRlcnNlY3RQb2ludCh0aGlzLnBvc2l0aW9uKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19Z2V0RmxpcHBpbmdDbGlwQXJlYSgpe2NvbnN0IHQ9W107bGV0IGU9ITE7cmV0dXJuIHQucHVzaCh0aGlzLnJlY3QudG9wTGVmdCksdC5wdXNoKHRoaXMudG9wSW50ZXJzZWN0UG9pbnQpLG51bGw9PT10aGlzLnNpZGVJbnRlcnNlY3RQb2ludD9lPSEwOih0LnB1c2godGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQpLG51bGw9PT10aGlzLmJvdHRvbUludGVyc2VjdFBvaW50JiYoZT0hMSkpLHQucHVzaCh0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50KSwoZXx8XCJib3R0b21cIj09PXRoaXMuY29ybmVyKSYmdC5wdXNoKHRoaXMucmVjdC5ib3R0b21MZWZ0KSx0fWdldEJvdHRvbUNsaXBBcmVhKCl7Y29uc3QgdD1bXTtyZXR1cm4gdC5wdXNoKHRoaXMudG9wSW50ZXJzZWN0UG9pbnQpLFwidG9wXCI9PT10aGlzLmNvcm5lcj90LnB1c2goe3g6dGhpcy5wYWdlV2lkdGgseTowfSk6KG51bGwhPT10aGlzLnRvcEludGVyc2VjdFBvaW50JiZ0LnB1c2goe3g6dGhpcy5wYWdlV2lkdGgseTowfSksdC5wdXNoKHt4OnRoaXMucGFnZVdpZHRoLHk6dGhpcy5wYWdlSGVpZ2h0fSkpLG51bGwhPT10aGlzLnNpZGVJbnRlcnNlY3RQb2ludD9oLkdldERpc3RhbmNlQmV0d2VlblR3b1BvaW50KHRoaXMuc2lkZUludGVyc2VjdFBvaW50LHRoaXMudG9wSW50ZXJzZWN0UG9pbnQpPj0xMCYmdC5wdXNoKHRoaXMuc2lkZUludGVyc2VjdFBvaW50KTpcInRvcFwiPT09dGhpcy5jb3JuZXImJnQucHVzaCh7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH0pLHQucHVzaCh0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50KSx0LnB1c2godGhpcy50b3BJbnRlcnNlY3RQb2ludCksdH1nZXRBbmdsZSgpe3JldHVybiAwPT09dGhpcy5kaXJlY3Rpb24/LXRoaXMuYW5nbGU6dGhpcy5hbmdsZX1nZXRSZWN0KCl7cmV0dXJuIHRoaXMucmVjdH1nZXRQb3NpdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9ufWdldEFjdGl2ZUNvcm5lcigpe3JldHVybiAwPT09dGhpcy5kaXJlY3Rpb24/dGhpcy5yZWN0LnRvcExlZnQ6dGhpcy5yZWN0LnRvcFJpZ2h0fWdldERpcmVjdGlvbigpe3JldHVybiB0aGlzLmRpcmVjdGlvbn1nZXRGbGlwcGluZ1Byb2dyZXNzKCl7cmV0dXJuIE1hdGguYWJzKCh0aGlzLnBvc2l0aW9uLngtdGhpcy5wYWdlV2lkdGgpLygyKnRoaXMucGFnZVdpZHRoKSoxMDApfWdldENvcm5lcigpe3JldHVybiB0aGlzLmNvcm5lcn1nZXRCb3R0b21QYWdlUG9zaXRpb24oKXtyZXR1cm4gMT09PXRoaXMuZGlyZWN0aW9uP3t4OnRoaXMucGFnZVdpZHRoLHk6MH06e3g6MCx5OjB9fWdldFNoYWRvd1N0YXJ0UG9pbnQoKXtyZXR1cm5cInRvcFwiPT09dGhpcy5jb3JuZXI/dGhpcy50b3BJbnRlcnNlY3RQb2ludDpudWxsIT09dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ/dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ6dGhpcy50b3BJbnRlcnNlY3RQb2ludH1nZXRTaGFkb3dBbmdsZSgpe2NvbnN0IHQ9aC5HZXRBbmdsZUJldHdlZW5Ud29MaW5lKHRoaXMuZ2V0U2VnbWVudFRvU2hhZG93TGluZSgpLFt7eDowLHk6MH0se3g6dGhpcy5wYWdlV2lkdGgseTowfV0pO3JldHVybiAwPT09dGhpcy5kaXJlY3Rpb24/dDpNYXRoLlBJLXR9Y2FsY0FuZ2xlQW5kUG9zaXRpb24odCl7bGV0IGU9dDtpZih0aGlzLnVwZGF0ZUFuZ2xlQW5kR2VvbWV0cnkoZSksZT1cInRvcFwiPT09dGhpcy5jb3JuZXI/dGhpcy5jaGVja1Bvc2l0aW9uQXRDZW50ZXJMaW5lKGUse3g6MCx5OjB9LHt4OjAseTp0aGlzLnBhZ2VIZWlnaHR9KTp0aGlzLmNoZWNrUG9zaXRpb25BdENlbnRlckxpbmUoZSx7eDowLHk6dGhpcy5wYWdlSGVpZ2h0fSx7eDowLHk6MH0pLE1hdGguYWJzKGUueC10aGlzLnBhZ2VXaWR0aCk8MSYmTWF0aC5hYnMoZS55KTwxKXRocm93IG5ldyBFcnJvcihcIlBvaW50IGlzIHRvbyBzbWFsbFwiKTtyZXR1cm4gZX11cGRhdGVBbmdsZUFuZEdlb21ldHJ5KHQpe3RoaXMuYW5nbGU9dGhpcy5jYWxjdWxhdGVBbmdsZSh0KSx0aGlzLnJlY3Q9dGhpcy5nZXRQYWdlUmVjdCh0KX1jYWxjdWxhdGVBbmdsZSh0KXtjb25zdCBlPXRoaXMucGFnZVdpZHRoLXQueCsxLGk9XCJib3R0b21cIj09PXRoaXMuY29ybmVyP3RoaXMucGFnZUhlaWdodC10Lnk6dC55O2xldCBzPTIqTWF0aC5hY29zKGUvTWF0aC5zcXJ0KGkqaStlKmUpKTtpPDAmJihzPS1zKTtjb25zdCBuPU1hdGguUEktcztpZighaXNGaW5pdGUocyl8fG4+PTAmJm48LjAwMyl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgRyBwb2ludCBpcyB0b28gc21hbGxcIik7cmV0dXJuXCJib3R0b21cIj09PXRoaXMuY29ybmVyJiYocz0tcyksc31nZXRQYWdlUmVjdCh0KXtyZXR1cm5cInRvcFwiPT09dGhpcy5jb3JuZXI/dGhpcy5nZXRSZWN0RnJvbUJhc2VQb2ludChbe3g6MCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6MH0se3g6MCx5OnRoaXMucGFnZUhlaWdodH0se3g6dGhpcy5wYWdlV2lkdGgseTp0aGlzLnBhZ2VIZWlnaHR9XSx0KTp0aGlzLmdldFJlY3RGcm9tQmFzZVBvaW50KFt7eDowLHk6LXRoaXMucGFnZUhlaWdodH0se3g6dGhpcy5wYWdlV2lkdGgseTotdGhpcy5wYWdlSGVpZ2h0fSx7eDowLHk6MH0se3g6dGhpcy5wYWdlV2lkdGgseTowfV0sdCl9Z2V0UmVjdEZyb21CYXNlUG9pbnQodCxlKXtyZXR1cm57dG9wTGVmdDp0aGlzLmdldFJvdGF0ZWRQb2ludCh0WzBdLGUpLHRvcFJpZ2h0OnRoaXMuZ2V0Um90YXRlZFBvaW50KHRbMV0sZSksYm90dG9tTGVmdDp0aGlzLmdldFJvdGF0ZWRQb2ludCh0WzJdLGUpLGJvdHRvbVJpZ2h0OnRoaXMuZ2V0Um90YXRlZFBvaW50KHRbM10sZSl9fWdldFJvdGF0ZWRQb2ludCh0LGUpe3JldHVybnt4OnQueCpNYXRoLmNvcyh0aGlzLmFuZ2xlKSt0LnkqTWF0aC5zaW4odGhpcy5hbmdsZSkrZS54LHk6dC55Kk1hdGguY29zKHRoaXMuYW5nbGUpLXQueCpNYXRoLnNpbih0aGlzLmFuZ2xlKStlLnl9fWNhbGN1bGF0ZUludGVyc2VjdFBvaW50KHQpe2NvbnN0IGU9e2xlZnQ6LTEsdG9wOi0xLHdpZHRoOnRoaXMucGFnZVdpZHRoKzIsaGVpZ2h0OnRoaXMucGFnZUhlaWdodCsyfTtcInRvcFwiPT09dGhpcy5jb3JuZXI/KHRoaXMudG9wSW50ZXJzZWN0UG9pbnQ9aC5HZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudChlLFt0LHRoaXMucmVjdC50b3BSaWdodF0sW3t4OjAseTowfSx7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9XSksdGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQ9aC5HZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudChlLFt0LHRoaXMucmVjdC5ib3R0b21MZWZ0XSxbe3g6dGhpcy5wYWdlV2lkdGgseTowfSx7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH1dKSx0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50PWguR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQoZSxbdGhpcy5yZWN0LmJvdHRvbUxlZnQsdGhpcy5yZWN0LmJvdHRvbVJpZ2h0XSxbe3g6MCx5OnRoaXMucGFnZUhlaWdodH0se3g6dGhpcy5wYWdlV2lkdGgseTp0aGlzLnBhZ2VIZWlnaHR9XSkpOih0aGlzLnRvcEludGVyc2VjdFBvaW50PWguR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQoZSxbdGhpcy5yZWN0LnRvcExlZnQsdGhpcy5yZWN0LnRvcFJpZ2h0XSxbe3g6MCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6MH1dKSx0aGlzLnNpZGVJbnRlcnNlY3RQb2ludD1oLkdldEludGVyc2VjdEJldHdlZW5Ud29TZWdtZW50KGUsW3QsdGhpcy5yZWN0LnRvcExlZnRdLFt7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6dGhpcy5wYWdlSGVpZ2h0fV0pLHRoaXMuYm90dG9tSW50ZXJzZWN0UG9pbnQ9aC5HZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudChlLFt0aGlzLnJlY3QuYm90dG9tTGVmdCx0aGlzLnJlY3QuYm90dG9tUmlnaHRdLFt7eDowLHk6dGhpcy5wYWdlSGVpZ2h0fSx7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH1dKSl9Y2hlY2tQb3NpdGlvbkF0Q2VudGVyTGluZSh0LGUsaSl7bGV0IHM9dDtjb25zdCBuPWguTGltaXRQb2ludFRvQ2lyY2xlKGUsdGhpcy5wYWdlV2lkdGgscyk7cyE9PW4mJihzPW4sdGhpcy51cGRhdGVBbmdsZUFuZEdlb21ldHJ5KHMpKTtjb25zdCByPU1hdGguc3FydChNYXRoLnBvdyh0aGlzLnBhZ2VXaWR0aCwyKStNYXRoLnBvdyh0aGlzLnBhZ2VIZWlnaHQsMikpO2xldCBvPXRoaXMucmVjdC5ib3R0b21SaWdodCxhPXRoaXMucmVjdC50b3BMZWZ0O2lmKFwiYm90dG9tXCI9PT10aGlzLmNvcm5lciYmKG89dGhpcy5yZWN0LnRvcFJpZ2h0LGE9dGhpcy5yZWN0LmJvdHRvbUxlZnQpLG8ueDw9MCl7Y29uc3QgdD1oLkxpbWl0UG9pbnRUb0NpcmNsZShpLHIsYSk7dCE9PXMmJihzPXQsdGhpcy51cGRhdGVBbmdsZUFuZEdlb21ldHJ5KHMpKX1yZXR1cm4gc31nZXRTZWdtZW50VG9TaGFkb3dMaW5lKCl7Y29uc3QgdD10aGlzLmdldFNoYWRvd1N0YXJ0UG9pbnQoKTtyZXR1cm5bdCx0IT09dGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQmJm51bGwhPT10aGlzLnNpZGVJbnRlcnNlY3RQb2ludD90aGlzLnNpZGVJbnRlcnNlY3RQb2ludDp0aGlzLmJvdHRvbUludGVyc2VjdFBvaW50XX19Y2xhc3MgZ3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuZmxpcHBpbmdQYWdlPW51bGwsdGhpcy5ib3R0b21QYWdlPW51bGwsdGhpcy5jYWxjPW51bGwsdGhpcy5zdGF0ZT1cInJlYWRcIix0aGlzLnJlbmRlcj10LHRoaXMuYXBwPWV9Zm9sZCh0KXt0aGlzLnNldFN0YXRlKFwidXNlcl9mb2xkXCIpLG51bGw9PT10aGlzLmNhbGMmJnRoaXMuc3RhcnQodCksdGhpcy5kbyh0aGlzLnJlbmRlci5jb252ZXJ0VG9QYWdlKHQpKX1mbGlwKHQpe2lmKHRoaXMuYXBwLmdldFNldHRpbmdzKCkuZGlzYWJsZUZsaXBCeUNsaWNrJiYhdGhpcy5pc1BvaW50T25Db3JuZXJzKHQpKXJldHVybjtpZihudWxsIT09dGhpcy5jYWxjJiZ0aGlzLnJlbmRlci5maW5pc2hBbmltYXRpb24oKSwhdGhpcy5zdGFydCh0KSlyZXR1cm47Y29uc3QgZT10aGlzLmdldEJvdW5kc1JlY3QoKTt0aGlzLnNldFN0YXRlKFwiZmxpcHBpbmdcIik7Y29uc3QgaT1lLmhlaWdodC8xMCxzPVwiYm90dG9tXCI9PT10aGlzLmNhbGMuZ2V0Q29ybmVyKCk/ZS5oZWlnaHQtaTppLG49XCJib3R0b21cIj09PXRoaXMuY2FsYy5nZXRDb3JuZXIoKT9lLmhlaWdodDowO3RoaXMuY2FsYy5jYWxjKHt4OmUucGFnZVdpZHRoLWkseTpzfSksdGhpcy5hbmltYXRlRmxpcHBpbmdUbyh7eDplLnBhZ2VXaWR0aC1pLHk6c30se3g6LWUucGFnZVdpZHRoLHk6bn0sITApfXN0YXJ0KHQpe3RoaXMucmVzZXQoKTtjb25zdCBlPXRoaXMucmVuZGVyLmNvbnZlcnRUb0Jvb2sodCksaT10aGlzLmdldEJvdW5kc1JlY3QoKSxzPXRoaXMuZ2V0RGlyZWN0aW9uQnlQb2ludChlKSxuPWUueT49aS5oZWlnaHQvMj9cImJvdHRvbVwiOlwidG9wXCI7aWYoIXRoaXMuY2hlY2tEaXJlY3Rpb24ocykpcmV0dXJuITE7dHJ5e2lmKHRoaXMuZmxpcHBpbmdQYWdlPXRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuZ2V0RmxpcHBpbmdQYWdlKHMpLHRoaXMuYm90dG9tUGFnZT10aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLmdldEJvdHRvbVBhZ2UocyksXCJsYW5kc2NhcGVcIj09PXRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCkpaWYoMT09PXMpe2NvbnN0IHQ9dGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5uZXh0QnkodGhpcy5mbGlwcGluZ1BhZ2UpO251bGwhPT10JiZ0aGlzLmZsaXBwaW5nUGFnZS5nZXREZW5zaXR5KCkhPT10LmdldERlbnNpdHkoKSYmKHRoaXMuZmxpcHBpbmdQYWdlLnNldERyYXdpbmdEZW5zaXR5KFwiaGFyZFwiKSx0LnNldERyYXdpbmdEZW5zaXR5KFwiaGFyZFwiKSl9ZWxzZXtjb25zdCB0PXRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkucHJldkJ5KHRoaXMuZmxpcHBpbmdQYWdlKTtudWxsIT09dCYmdGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RGVuc2l0eSgpIT09dC5nZXREZW5zaXR5KCkmJih0aGlzLmZsaXBwaW5nUGFnZS5zZXREcmF3aW5nRGVuc2l0eShcImhhcmRcIiksdC5zZXREcmF3aW5nRGVuc2l0eShcImhhcmRcIikpfXJldHVybiB0aGlzLnJlbmRlci5zZXREaXJlY3Rpb24ocyksdGhpcy5jYWxjPW5ldyBhKHMsbixpLnBhZ2VXaWR0aC50b1N0cmluZygxMCksaS5oZWlnaHQudG9TdHJpbmcoMTApKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19ZG8odCl7aWYobnVsbCE9PXRoaXMuY2FsYyYmdGhpcy5jYWxjLmNhbGModCkpe2NvbnN0IHQ9dGhpcy5jYWxjLmdldEZsaXBwaW5nUHJvZ3Jlc3MoKTt0aGlzLmJvdHRvbVBhZ2Uuc2V0QXJlYSh0aGlzLmNhbGMuZ2V0Qm90dG9tQ2xpcEFyZWEoKSksdGhpcy5ib3R0b21QYWdlLnNldFBvc2l0aW9uKHRoaXMuY2FsYy5nZXRCb3R0b21QYWdlUG9zaXRpb24oKSksdGhpcy5ib3R0b21QYWdlLnNldEFuZ2xlKDApLHRoaXMuYm90dG9tUGFnZS5zZXRIYXJkQW5nbGUoMCksdGhpcy5mbGlwcGluZ1BhZ2Uuc2V0QXJlYSh0aGlzLmNhbGMuZ2V0RmxpcHBpbmdDbGlwQXJlYSgpKSx0aGlzLmZsaXBwaW5nUGFnZS5zZXRQb3NpdGlvbih0aGlzLmNhbGMuZ2V0QWN0aXZlQ29ybmVyKCkpLHRoaXMuZmxpcHBpbmdQYWdlLnNldEFuZ2xlKHRoaXMuY2FsYy5nZXRBbmdsZSgpKSwwPT09dGhpcy5jYWxjLmdldERpcmVjdGlvbigpP3RoaXMuZmxpcHBpbmdQYWdlLnNldEhhcmRBbmdsZSg5MCooMjAwLTIqdCkvMTAwKTp0aGlzLmZsaXBwaW5nUGFnZS5zZXRIYXJkQW5nbGUoLTkwKigyMDAtMip0KS8xMDApLHRoaXMucmVuZGVyLnNldFBhZ2VSZWN0KHRoaXMuY2FsYy5nZXRSZWN0KCkpLHRoaXMucmVuZGVyLnNldEJvdHRvbVBhZ2UodGhpcy5ib3R0b21QYWdlKSx0aGlzLnJlbmRlci5zZXRGbGlwcGluZ1BhZ2UodGhpcy5mbGlwcGluZ1BhZ2UpLHRoaXMucmVuZGVyLnNldFNoYWRvd0RhdGEodGhpcy5jYWxjLmdldFNoYWRvd1N0YXJ0UG9pbnQoKSx0aGlzLmNhbGMuZ2V0U2hhZG93QW5nbGUoKSx0LHRoaXMuY2FsYy5nZXREaXJlY3Rpb24oKSl9fWZsaXBUb1BhZ2UodCxlKXtjb25zdCBpPXRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuZ2V0Q3VycmVudFNwcmVhZEluZGV4KCkscz10aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLmdldFNwcmVhZEluZGV4QnlQYWdlKHQpO3RyeXtzPmkmJih0aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLnNldEN1cnJlbnRTcHJlYWRJbmRleChzLTEpLHRoaXMuZmxpcE5leHQoZSkpLHM8aSYmKHRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuc2V0Q3VycmVudFNwcmVhZEluZGV4KHMrMSksdGhpcy5mbGlwUHJldihlKSl9Y2F0Y2godCl7fX1mbGlwTmV4dCh0KXt0aGlzLmZsaXAoe3g6dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLmxlZnQrMip0aGlzLnJlbmRlci5nZXRSZWN0KCkucGFnZVdpZHRoLTEwLHk6XCJ0b3BcIj09PXQ/MTp0aGlzLnJlbmRlci5nZXRSZWN0KCkuaGVpZ2h0LTJ9KX1mbGlwUHJldih0KXt0aGlzLmZsaXAoe3g6MTAseTpcInRvcFwiPT09dD8xOnRoaXMucmVuZGVyLmdldFJlY3QoKS5oZWlnaHQtMn0pfXN0b3BNb3ZlKCl7aWYobnVsbD09PXRoaXMuY2FsYylyZXR1cm47Y29uc3QgdD10aGlzLmNhbGMuZ2V0UG9zaXRpb24oKSxlPXRoaXMuZ2V0Qm91bmRzUmVjdCgpLGk9XCJib3R0b21cIj09PXRoaXMuY2FsYy5nZXRDb3JuZXIoKT9lLmhlaWdodDowO3QueDw9MD90aGlzLmFuaW1hdGVGbGlwcGluZ1RvKHQse3g6LWUucGFnZVdpZHRoLHk6aX0sITApOnRoaXMuYW5pbWF0ZUZsaXBwaW5nVG8odCx7eDplLnBhZ2VXaWR0aCx5Oml9LCExKX1zaG93Q29ybmVyKHQpe2lmKCF0aGlzLmNoZWNrU3RhdGUoXCJyZWFkXCIsXCJmb2xkX2Nvcm5lclwiKSlyZXR1cm47Y29uc3QgZT10aGlzLmdldEJvdW5kc1JlY3QoKSxpPWUucGFnZVdpZHRoO2lmKHRoaXMuaXNQb2ludE9uQ29ybmVycyh0KSlpZihudWxsPT09dGhpcy5jYWxjKXtpZighdGhpcy5zdGFydCh0KSlyZXR1cm47dGhpcy5zZXRTdGF0ZShcImZvbGRfY29ybmVyXCIpLHRoaXMuY2FsYy5jYWxjKHt4OmktMSx5OjF9KTtjb25zdCBzPTUwLG49XCJib3R0b21cIj09PXRoaXMuY2FsYy5nZXRDb3JuZXIoKT9lLmhlaWdodC0xOjEsaD1cImJvdHRvbVwiPT09dGhpcy5jYWxjLmdldENvcm5lcigpP2UuaGVpZ2h0LXM6czt0aGlzLmFuaW1hdGVGbGlwcGluZ1RvKHt4OmktMSx5Om59LHt4Omktcyx5Omh9LCExLCExKX1lbHNlIHRoaXMuZG8odGhpcy5yZW5kZXIuY29udmVydFRvUGFnZSh0KSk7ZWxzZSB0aGlzLnNldFN0YXRlKFwicmVhZFwiKSx0aGlzLnJlbmRlci5maW5pc2hBbmltYXRpb24oKSx0aGlzLnN0b3BNb3ZlKCl9YW5pbWF0ZUZsaXBwaW5nVG8odCxlLGkscz0hMCl7Y29uc3Qgbj1oLkdldENvcmRzRnJvbVR3b1BvaW50KHQsZSkscj1bXTtmb3IoY29uc3QgdCBvZiBuKXIucHVzaCgoKT0+dGhpcy5kbyh0KSk7Y29uc3Qgbz10aGlzLmdldEFuaW1hdGlvbkR1cmF0aW9uKG4ubGVuZ3RoKTt0aGlzLnJlbmRlci5zdGFydEFuaW1hdGlvbihyLG8sKCk9Pnt0aGlzLmNhbGMmJihpJiYoMT09PXRoaXMuY2FsYy5nZXREaXJlY3Rpb24oKT90aGlzLmFwcC50dXJuVG9QcmV2UGFnZSgpOnRoaXMuYXBwLnR1cm5Ub05leHRQYWdlKCkpLHMmJih0aGlzLnJlbmRlci5zZXRCb3R0b21QYWdlKG51bGwpLHRoaXMucmVuZGVyLnNldEZsaXBwaW5nUGFnZShudWxsKSx0aGlzLnJlbmRlci5jbGVhclNoYWRvdygpLHRoaXMuc2V0U3RhdGUoXCJyZWFkXCIpLHRoaXMucmVzZXQoKSkpfSl9Z2V0Q2FsY3VsYXRpb24oKXtyZXR1cm4gdGhpcy5jYWxjfWdldFN0YXRlKCl7cmV0dXJuIHRoaXMuc3RhdGV9c2V0U3RhdGUodCl7dGhpcy5zdGF0ZSE9PXQmJih0aGlzLmFwcC51cGRhdGVTdGF0ZSh0KSx0aGlzLnN0YXRlPXQpfWdldERpcmVjdGlvbkJ5UG9pbnQodCl7Y29uc3QgZT10aGlzLmdldEJvdW5kc1JlY3QoKTtpZihcInBvcnRyYWl0XCI9PT10aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpKXtpZih0LngtZS5wYWdlV2lkdGg8PWUud2lkdGgvNSlyZXR1cm4gMX1lbHNlIGlmKHQueDxlLndpZHRoLzIpcmV0dXJuIDE7cmV0dXJuIDB9Z2V0QW5pbWF0aW9uRHVyYXRpb24odCl7Y29uc3QgZT10aGlzLmFwcC5nZXRTZXR0aW5ncygpLmZsaXBwaW5nVGltZTtyZXR1cm4gdD49MWUzP2U6dC8xZTMqZX1jaGVja0RpcmVjdGlvbih0KXtyZXR1cm4gMD09PXQ/dGhpcy5hcHAuZ2V0Q3VycmVudFBhZ2VJbmRleCgpPHRoaXMuYXBwLmdldFBhZ2VDb3VudCgpLTE6dGhpcy5hcHAuZ2V0Q3VycmVudFBhZ2VJbmRleCgpPj0xfXJlc2V0KCl7dGhpcy5jYWxjPW51bGwsdGhpcy5mbGlwcGluZ1BhZ2U9bnVsbCx0aGlzLmJvdHRvbVBhZ2U9bnVsbH1nZXRCb3VuZHNSZWN0KCl7cmV0dXJuIHRoaXMucmVuZGVyLmdldFJlY3QoKX1jaGVja1N0YXRlKC4uLnQpe2Zvcihjb25zdCBlIG9mIHQpaWYodGhpcy5zdGF0ZT09PWUpcmV0dXJuITA7cmV0dXJuITF9aXNQb2ludE9uQ29ybmVycyh0KXtjb25zdCBlPXRoaXMuZ2V0Qm91bmRzUmVjdCgpLGk9ZS5wYWdlV2lkdGgscz1NYXRoLnNxcnQoTWF0aC5wb3coaSwyKStNYXRoLnBvdyhlLmhlaWdodCwyKSkvNSxuPXRoaXMucmVuZGVyLmNvbnZlcnRUb0Jvb2sodCk7cmV0dXJuIG4ueD4wJiZuLnk+MCYmbi54PGUud2lkdGgmJm4ueTxlLmhlaWdodCYmKG4ueDxzfHxuLng+ZS53aWR0aC1zKSYmKG4ueTxzfHxuLnk+ZS5oZWlnaHQtcyl9fWNsYXNzIGx7Y29uc3RydWN0b3IodCxlKXt0aGlzLmxlZnRQYWdlPW51bGwsdGhpcy5yaWdodFBhZ2U9bnVsbCx0aGlzLmZsaXBwaW5nUGFnZT1udWxsLHRoaXMuYm90dG9tUGFnZT1udWxsLHRoaXMuZGlyZWN0aW9uPW51bGwsdGhpcy5vcmllbnRhdGlvbj1udWxsLHRoaXMuc2hhZG93PW51bGwsdGhpcy5hbmltYXRpb249bnVsbCx0aGlzLnBhZ2VSZWN0PW51bGwsdGhpcy5ib3VuZHNSZWN0PW51bGwsdGhpcy50aW1lcj0wLHRoaXMuc2FmYXJpPSExLHRoaXMuc2V0dGluZz1lLHRoaXMuYXBwPXQ7Y29uc3QgaT1uZXcgUmVnRXhwKFwiVmVyc2lvblxcXFwvW1xcXFxkXFxcXC5dKy4qU2FmYXJpL1wiKTt0aGlzLnNhZmFyaT1udWxsIT09aS5leGVjKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KX1yZW5kZXIodCl7aWYobnVsbCE9PXRoaXMuYW5pbWF0aW9uKXtjb25zdCBlPU1hdGgucm91bmQoKHQtdGhpcy5hbmltYXRpb24uc3RhcnRlZEF0KS90aGlzLmFuaW1hdGlvbi5kdXJhdGlvbkZyYW1lKTtlPHRoaXMuYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGg/dGhpcy5hbmltYXRpb24uZnJhbWVzW2VdKCk6KHRoaXMuYW5pbWF0aW9uLm9uQW5pbWF0ZUVuZCgpLHRoaXMuYW5pbWF0aW9uPW51bGwpfXRoaXMudGltZXI9dCx0aGlzLmRyYXdGcmFtZSgpfXN0YXJ0KCl7dGhpcy51cGRhdGUoKTtjb25zdCB0PWU9Pnt0aGlzLnJlbmRlcihlKSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodCl9O3JlcXVlc3RBbmltYXRpb25GcmFtZSh0KX1zdGFydEFuaW1hdGlvbih0LGUsaSl7dGhpcy5maW5pc2hBbmltYXRpb24oKSx0aGlzLmFuaW1hdGlvbj17ZnJhbWVzOnQsZHVyYXRpb246ZSxkdXJhdGlvbkZyYW1lOmUvdC5sZW5ndGgsb25BbmltYXRlRW5kOmksc3RhcnRlZEF0OnRoaXMudGltZXJ9fWZpbmlzaEFuaW1hdGlvbigpe251bGwhPT10aGlzLmFuaW1hdGlvbiYmKHRoaXMuYW5pbWF0aW9uLmZyYW1lc1t0aGlzLmFuaW1hdGlvbi5mcmFtZXMubGVuZ3RoLTFdKCksbnVsbCE9PXRoaXMuYW5pbWF0aW9uLm9uQW5pbWF0ZUVuZCYmdGhpcy5hbmltYXRpb24ub25BbmltYXRlRW5kKCkpLHRoaXMuYW5pbWF0aW9uPW51bGx9dXBkYXRlKCl7dGhpcy5ib3VuZHNSZWN0PW51bGw7Y29uc3QgdD10aGlzLmNhbGN1bGF0ZUJvdW5kc1JlY3QoKTt0aGlzLm9yaWVudGF0aW9uIT09dCYmKHRoaXMub3JpZW50YXRpb249dCx0aGlzLmFwcC51cGRhdGVPcmllbnRhdGlvbih0KSl9Y2FsY3VsYXRlQm91bmRzUmVjdCgpe2xldCB0PVwibGFuZHNjYXBlXCI7Y29uc3QgZT10aGlzLmdldEJsb2NrV2lkdGgoKSxpPWUvMixzPXRoaXMuZ2V0QmxvY2tIZWlnaHQoKS8yLG49dGhpcy5zZXR0aW5nLndpZHRoL3RoaXMuc2V0dGluZy5oZWlnaHQ7bGV0IGg9dGhpcy5zZXR0aW5nLndpZHRoLHI9dGhpcy5zZXR0aW5nLmhlaWdodCxvPWktaDtyZXR1cm5cInN0cmV0Y2hcIj09PXRoaXMuc2V0dGluZy5zaXplPyhlPDIqdGhpcy5zZXR0aW5nLm1pbldpZHRoJiZ0aGlzLmFwcC5nZXRTZXR0aW5ncygpLnVzZVBvcnRyYWl0JiYodD1cInBvcnRyYWl0XCIpLGg9XCJwb3J0cmFpdFwiPT09dD90aGlzLmdldEJsb2NrV2lkdGgoKTp0aGlzLmdldEJsb2NrV2lkdGgoKS8yLGg+dGhpcy5zZXR0aW5nLm1heFdpZHRoJiYoaD10aGlzLnNldHRpbmcubWF4V2lkdGgpLHI9aC9uLHI+dGhpcy5nZXRCbG9ja0hlaWdodCgpJiYocj10aGlzLmdldEJsb2NrSGVpZ2h0KCksaD1yKm4pLG89XCJwb3J0cmFpdFwiPT09dD9pLWgvMi1oOmktaCk6ZTwyKmgmJnRoaXMuYXBwLmdldFNldHRpbmdzKCkudXNlUG9ydHJhaXQmJih0PVwicG9ydHJhaXRcIixvPWktaC8yLWgpLHRoaXMuYm91bmRzUmVjdD17bGVmdDpvLHRvcDpzLXIvMix3aWR0aDoyKmgsaGVpZ2h0OnIscGFnZVdpZHRoOmh9LHR9c2V0U2hhZG93RGF0YSh0LGUsaSxzKXtpZighdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5kcmF3U2hhZG93KXJldHVybjtjb25zdCBuPTEwMCp0aGlzLmdldFNldHRpbmdzKCkubWF4U2hhZG93T3BhY2l0eTt0aGlzLnNoYWRvdz17cG9zOnQsYW5nbGU6ZSx3aWR0aDozKnRoaXMuZ2V0UmVjdCgpLnBhZ2VXaWR0aC80KmkvMTAwLG9wYWNpdHk6KDEwMC1pKSpuLzEwMC8xMDAsZGlyZWN0aW9uOnMscHJvZ3Jlc3M6MippfX1jbGVhclNoYWRvdygpe3RoaXMuc2hhZG93PW51bGx9Z2V0QmxvY2tXaWR0aCgpe3JldHVybiB0aGlzLmFwcC5nZXRVSSgpLmdldERpc3RFbGVtZW50KCkub2Zmc2V0V2lkdGh9Z2V0QmxvY2tIZWlnaHQoKXtyZXR1cm4gdGhpcy5hcHAuZ2V0VUkoKS5nZXREaXN0RWxlbWVudCgpLm9mZnNldEhlaWdodH1nZXREaXJlY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJlY3Rpb259Z2V0UmVjdCgpe3JldHVybiBudWxsPT09dGhpcy5ib3VuZHNSZWN0JiZ0aGlzLmNhbGN1bGF0ZUJvdW5kc1JlY3QoKSx0aGlzLmJvdW5kc1JlY3R9Z2V0U2V0dGluZ3MoKXtyZXR1cm4gdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKX1nZXRPcmllbnRhdGlvbigpe3JldHVybiB0aGlzLm9yaWVudGF0aW9ufXNldFBhZ2VSZWN0KHQpe3RoaXMucGFnZVJlY3Q9dH1zZXREaXJlY3Rpb24odCl7dGhpcy5kaXJlY3Rpb249dH1zZXRSaWdodFBhZ2UodCl7bnVsbCE9PXQmJnQuc2V0T3JpZW50YXRpb24oMSksdGhpcy5yaWdodFBhZ2U9dH1zZXRMZWZ0UGFnZSh0KXtudWxsIT09dCYmdC5zZXRPcmllbnRhdGlvbigwKSx0aGlzLmxlZnRQYWdlPXR9c2V0Qm90dG9tUGFnZSh0KXtudWxsIT09dCYmdC5zZXRPcmllbnRhdGlvbigxPT09dGhpcy5kaXJlY3Rpb24/MDoxKSx0aGlzLmJvdHRvbVBhZ2U9dH1zZXRGbGlwcGluZ1BhZ2UodCl7bnVsbCE9PXQmJnQuc2V0T3JpZW50YXRpb24oMD09PXRoaXMuZGlyZWN0aW9uJiZcInBvcnRyYWl0XCIhPT10aGlzLm9yaWVudGF0aW9uPzA6MSksdGhpcy5mbGlwcGluZ1BhZ2U9dH1jb252ZXJ0VG9Cb29rKHQpe2NvbnN0IGU9dGhpcy5nZXRSZWN0KCk7cmV0dXJue3g6dC54LWUubGVmdCx5OnQueS1lLnRvcH19aXNTYWZhcmkoKXtyZXR1cm4gdGhpcy5zYWZhcml9Y29udmVydFRvUGFnZSh0LGUpe2V8fChlPXRoaXMuZGlyZWN0aW9uKTtjb25zdCBpPXRoaXMuZ2V0UmVjdCgpO3JldHVybnt4OjA9PT1lP3QueC1pLmxlZnQtaS53aWR0aC8yOmkud2lkdGgvMi10LngraS5sZWZ0LHk6dC55LWkudG9wfX1jb252ZXJ0VG9HbG9iYWwodCxlKXtpZihlfHwoZT10aGlzLmRpcmVjdGlvbiksbnVsbD09dClyZXR1cm4gbnVsbDtjb25zdCBpPXRoaXMuZ2V0UmVjdCgpO3JldHVybnt4OjA9PT1lP3QueCtpLmxlZnQraS53aWR0aC8yOmkud2lkdGgvMi10LngraS5sZWZ0LHk6dC55K2kudG9wfX1jb252ZXJ0UmVjdFRvR2xvYmFsKHQsZSl7cmV0dXJuIGV8fChlPXRoaXMuZGlyZWN0aW9uKSx7dG9wTGVmdDp0aGlzLmNvbnZlcnRUb0dsb2JhbCh0LnRvcExlZnQsZSksdG9wUmlnaHQ6dGhpcy5jb252ZXJ0VG9HbG9iYWwodC50b3BSaWdodCxlKSxib3R0b21MZWZ0OnRoaXMuY29udmVydFRvR2xvYmFsKHQuYm90dG9tTGVmdCxlKSxib3R0b21SaWdodDp0aGlzLmNvbnZlcnRUb0dsb2JhbCh0LmJvdHRvbVJpZ2h0LGUpfX19Y2xhc3MgZCBleHRlbmRzIGx7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQsZSksdGhpcy5jYW52YXM9aSx0aGlzLmN0eD1pLmdldENvbnRleHQoXCIyZFwiKX1nZXRDb250ZXh0KCl7cmV0dXJuIHRoaXMuY3R4fXJlbG9hZCgpe31kcmF3RnJhbWUoKXt0aGlzLmNsZWFyKCksXCJwb3J0cmFpdFwiIT09dGhpcy5vcmllbnRhdGlvbiYmbnVsbCE9dGhpcy5sZWZ0UGFnZSYmdGhpcy5sZWZ0UGFnZS5zaW1wbGVEcmF3KDApLG51bGwhPXRoaXMucmlnaHRQYWdlJiZ0aGlzLnJpZ2h0UGFnZS5zaW1wbGVEcmF3KDEpLG51bGwhPXRoaXMuYm90dG9tUGFnZSYmdGhpcy5ib3R0b21QYWdlLmRyYXcoKSx0aGlzLmRyYXdCb29rU2hhZG93KCksbnVsbCE9dGhpcy5mbGlwcGluZ1BhZ2UmJnRoaXMuZmxpcHBpbmdQYWdlLmRyYXcoKSxudWxsIT10aGlzLnNoYWRvdyYmKHRoaXMuZHJhd091dGVyU2hhZG93KCksdGhpcy5kcmF3SW5uZXJTaGFkb3coKSk7Y29uc3QgdD10aGlzLmdldFJlY3QoKTtcInBvcnRyYWl0XCI9PT10aGlzLm9yaWVudGF0aW9uJiYodGhpcy5jdHguYmVnaW5QYXRoKCksdGhpcy5jdHgucmVjdCh0LmxlZnQrdC5wYWdlV2lkdGgsdC50b3AsdC53aWR0aCx0LmhlaWdodCksdGhpcy5jdHguY2xpcCgpKX1kcmF3Qm9va1NoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCk7dGhpcy5jdHguc2F2ZSgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpO2NvbnN0IGU9dC53aWR0aC8yMDt0aGlzLmN0eC5yZWN0KHQubGVmdCx0LnRvcCx0LndpZHRoLHQuaGVpZ2h0KTtjb25zdCBpPXt4OnQubGVmdCt0LndpZHRoLzItZS8yLHk6MH07dGhpcy5jdHgudHJhbnNsYXRlKGkueCxpLnkpO2NvbnN0IHM9dGhpcy5jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwwLGUsMCk7cy5hZGRDb2xvclN0b3AoMCxcInJnYmEoMCwgMCwgMCwgMClcIikscy5hZGRDb2xvclN0b3AoLjQsXCJyZ2JhKDAsIDAsIDAsIDAuMilcIikscy5hZGRDb2xvclN0b3AoLjQ5LFwicmdiYSgwLCAwLCAwLCAwLjEpXCIpLHMuYWRkQ29sb3JTdG9wKC41LFwicmdiYSgwLCAwLCAwLCAwLjUpXCIpLHMuYWRkQ29sb3JTdG9wKC41MSxcInJnYmEoMCwgMCwgMCwgMC40KVwiKSxzLmFkZENvbG9yU3RvcCgxLFwicmdiYSgwLCAwLCAwLCAwKVwiKSx0aGlzLmN0eC5jbGlwKCksdGhpcy5jdHguZmlsbFN0eWxlPXMsdGhpcy5jdHguZmlsbFJlY3QoMCwwLGUsMip0LmhlaWdodCksdGhpcy5jdHgucmVzdG9yZSgpfWRyYXdPdXRlclNoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCk7dGhpcy5jdHguc2F2ZSgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4LnJlY3QodC5sZWZ0LHQudG9wLHQud2lkdGgsdC5oZWlnaHQpO2NvbnN0IGU9dGhpcy5jb252ZXJ0VG9HbG9iYWwoe3g6dGhpcy5zaGFkb3cucG9zLngseTp0aGlzLnNoYWRvdy5wb3MueX0pO3RoaXMuY3R4LnRyYW5zbGF0ZShlLngsZS55KSx0aGlzLmN0eC5yb3RhdGUoTWF0aC5QSSt0aGlzLnNoYWRvdy5hbmdsZStNYXRoLlBJLzIpO2NvbnN0IGk9dGhpcy5jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwwLHRoaXMuc2hhZG93LndpZHRoLDApOzA9PT10aGlzLnNoYWRvdy5kaXJlY3Rpb24/KHRoaXMuY3R4LnRyYW5zbGF0ZSgwLC0xMDApLGkuYWRkQ29sb3JTdG9wKDAsXCJyZ2JhKDAsIDAsIDAsIFwiK3RoaXMuc2hhZG93Lm9wYWNpdHkrXCIpXCIpLGkuYWRkQ29sb3JTdG9wKDEsXCJyZ2JhKDAsIDAsIDAsIDApXCIpKToodGhpcy5jdHgudHJhbnNsYXRlKC10aGlzLnNoYWRvdy53aWR0aCwtMTAwKSxpLmFkZENvbG9yU3RvcCgwLFwicmdiYSgwLCAwLCAwLCAwKVwiKSxpLmFkZENvbG9yU3RvcCgxLFwicmdiYSgwLCAwLCAwLCBcIit0aGlzLnNoYWRvdy5vcGFjaXR5K1wiKVwiKSksdGhpcy5jdHguY2xpcCgpLHRoaXMuY3R4LmZpbGxTdHlsZT1pLHRoaXMuY3R4LmZpbGxSZWN0KDAsMCx0aGlzLnNoYWRvdy53aWR0aCwyKnQuaGVpZ2h0KSx0aGlzLmN0eC5yZXN0b3JlKCl9ZHJhd0lubmVyU2hhZG93KCl7Y29uc3QgdD10aGlzLmdldFJlY3QoKTt0aGlzLmN0eC5zYXZlKCksdGhpcy5jdHguYmVnaW5QYXRoKCk7Y29uc3QgZT10aGlzLmNvbnZlcnRUb0dsb2JhbCh7eDp0aGlzLnNoYWRvdy5wb3MueCx5OnRoaXMuc2hhZG93LnBvcy55fSksaT10aGlzLmNvbnZlcnRSZWN0VG9HbG9iYWwodGhpcy5wYWdlUmVjdCk7dGhpcy5jdHgubW92ZVRvKGkudG9wTGVmdC54LGkudG9wTGVmdC55KSx0aGlzLmN0eC5saW5lVG8oaS50b3BSaWdodC54LGkudG9wUmlnaHQueSksdGhpcy5jdHgubGluZVRvKGkuYm90dG9tUmlnaHQueCxpLmJvdHRvbVJpZ2h0LnkpLHRoaXMuY3R4LmxpbmVUbyhpLmJvdHRvbUxlZnQueCxpLmJvdHRvbUxlZnQueSksdGhpcy5jdHgudHJhbnNsYXRlKGUueCxlLnkpLHRoaXMuY3R4LnJvdGF0ZShNYXRoLlBJK3RoaXMuc2hhZG93LmFuZ2xlK01hdGguUEkvMik7Y29uc3Qgcz0zKnRoaXMuc2hhZG93LndpZHRoLzQsbj10aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLDAscywwKTswPT09dGhpcy5zaGFkb3cuZGlyZWN0aW9uPyh0aGlzLmN0eC50cmFuc2xhdGUoLXMsLTEwMCksbi5hZGRDb2xvclN0b3AoMSxcInJnYmEoMCwgMCwgMCwgXCIrdGhpcy5zaGFkb3cub3BhY2l0eStcIilcIiksbi5hZGRDb2xvclN0b3AoLjksXCJyZ2JhKDAsIDAsIDAsIDAuMDUpXCIpLG4uYWRkQ29sb3JTdG9wKC43LFwicmdiYSgwLCAwLCAwLCBcIit0aGlzLnNoYWRvdy5vcGFjaXR5K1wiKVwiKSxuLmFkZENvbG9yU3RvcCgwLFwicmdiYSgwLCAwLCAwLCAwKVwiKSk6KHRoaXMuY3R4LnRyYW5zbGF0ZSgwLC0xMDApLG4uYWRkQ29sb3JTdG9wKDAsXCJyZ2JhKDAsIDAsIDAsIFwiK3RoaXMuc2hhZG93Lm9wYWNpdHkrXCIpXCIpLG4uYWRkQ29sb3JTdG9wKC4xLFwicmdiYSgwLCAwLCAwLCAwLjA1KVwiKSxuLmFkZENvbG9yU3RvcCguMyxcInJnYmEoMCwgMCwgMCwgXCIrdGhpcy5zaGFkb3cub3BhY2l0eStcIilcIiksbi5hZGRDb2xvclN0b3AoMSxcInJnYmEoMCwgMCwgMCwgMClcIikpLHRoaXMuY3R4LmNsaXAoKSx0aGlzLmN0eC5maWxsU3R5bGU9bix0aGlzLmN0eC5maWxsUmVjdCgwLDAscywyKnQuaGVpZ2h0KSx0aGlzLmN0eC5yZXN0b3JlKCl9Y2xlYXIoKXt0aGlzLmN0eC5maWxsU3R5bGU9XCJ3aGl0ZVwiLHRoaXMuY3R4LmZpbGxSZWN0KDAsMCx0aGlzLmNhbnZhcy53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQpfX1jbGFzcyBwe2NvbnN0cnVjdG9yKHQsZSxpKXt0aGlzLnRvdWNoUG9pbnQ9bnVsbCx0aGlzLnN3aXBlVGltZW91dD0yNTAsdGhpcy5vblJlc2l6ZT0oKT0+e3RoaXMudXBkYXRlKCl9LHRoaXMub25Nb3VzZURvd249dD0+e2lmKHRoaXMuY2hlY2tUYXJnZXQodC50YXJnZXQpKXtjb25zdCBlPXRoaXMuZ2V0TW91c2VQb3ModC5jbGllbnRYLHQuY2xpZW50WSk7dGhpcy5hcHAuc3RhcnRVc2VyVG91Y2goZSksdC5wcmV2ZW50RGVmYXVsdCgpfX0sdGhpcy5vblRvdWNoU3RhcnQ9dD0+e2lmKHRoaXMuY2hlY2tUYXJnZXQodC50YXJnZXQpJiZ0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aD4wKXtjb25zdCBlPXQuY2hhbmdlZFRvdWNoZXNbMF0saT10aGlzLmdldE1vdXNlUG9zKGUuY2xpZW50WCxlLmNsaWVudFkpO3RoaXMudG91Y2hQb2ludD17cG9pbnQ6aSx0aW1lOkRhdGUubm93KCl9LHNldFRpbWVvdXQoKCk9PntudWxsIT09dGhpcy50b3VjaFBvaW50JiZ0aGlzLmFwcC5zdGFydFVzZXJUb3VjaChpKX0sdGhpcy5zd2lwZVRpbWVvdXQpLHRoaXMuYXBwLmdldFNldHRpbmdzKCkubW9iaWxlU2Nyb2xsU3VwcG9ydHx8dC5wcmV2ZW50RGVmYXVsdCgpfX0sdGhpcy5vbk1vdXNlVXA9dD0+e2NvbnN0IGU9dGhpcy5nZXRNb3VzZVBvcyh0LmNsaWVudFgsdC5jbGllbnRZKTt0aGlzLmFwcC51c2VyU3RvcChlKX0sdGhpcy5vbk1vdXNlTW92ZT10PT57Y29uc3QgZT10aGlzLmdldE1vdXNlUG9zKHQuY2xpZW50WCx0LmNsaWVudFkpO3RoaXMuYXBwLnVzZXJNb3ZlKGUsITEpfSx0aGlzLm9uVG91Y2hNb3ZlPXQ9PntpZih0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aD4wKXtjb25zdCBlPXQuY2hhbmdlZFRvdWNoZXNbMF0saT10aGlzLmdldE1vdXNlUG9zKGUuY2xpZW50WCxlLmNsaWVudFkpO3RoaXMuYXBwLmdldFNldHRpbmdzKCkubW9iaWxlU2Nyb2xsU3VwcG9ydD8obnVsbCE9PXRoaXMudG91Y2hQb2ludCYmKE1hdGguYWJzKHRoaXMudG91Y2hQb2ludC5wb2ludC54LWkueCk+MTB8fFwicmVhZFwiIT09dGhpcy5hcHAuZ2V0U3RhdGUoKSkmJnQuY2FuY2VsYWJsZSYmdGhpcy5hcHAudXNlck1vdmUoaSwhMCksXCJyZWFkXCIhPT10aGlzLmFwcC5nZXRTdGF0ZSgpJiZ0LnByZXZlbnREZWZhdWx0KCkpOnRoaXMuYXBwLnVzZXJNb3ZlKGksITApfX0sdGhpcy5vblRvdWNoRW5kPXQ9PntpZih0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aD4wKXtjb25zdCBlPXQuY2hhbmdlZFRvdWNoZXNbMF0saT10aGlzLmdldE1vdXNlUG9zKGUuY2xpZW50WCxlLmNsaWVudFkpO2xldCBzPSExO2lmKG51bGwhPT10aGlzLnRvdWNoUG9pbnQpe2NvbnN0IHQ9aS54LXRoaXMudG91Y2hQb2ludC5wb2ludC54LGU9TWF0aC5hYnMoaS55LXRoaXMudG91Y2hQb2ludC5wb2ludC55KTtNYXRoLmFicyh0KT50aGlzLnN3aXBlRGlzdGFuY2UmJmU8Mip0aGlzLnN3aXBlRGlzdGFuY2UmJkRhdGUubm93KCktdGhpcy50b3VjaFBvaW50LnRpbWU8dGhpcy5zd2lwZVRpbWVvdXQmJih0PjA/dGhpcy5hcHAuZmxpcFByZXYodGhpcy50b3VjaFBvaW50LnBvaW50Lnk8dGhpcy5hcHAuZ2V0UmVuZGVyKCkuZ2V0UmVjdCgpLmhlaWdodC8yP1widG9wXCI6XCJib3R0b21cIik6dGhpcy5hcHAuZmxpcE5leHQodGhpcy50b3VjaFBvaW50LnBvaW50Lnk8dGhpcy5hcHAuZ2V0UmVuZGVyKCkuZ2V0UmVjdCgpLmhlaWdodC8yP1widG9wXCI6XCJib3R0b21cIikscz0hMCksdGhpcy50b3VjaFBvaW50PW51bGx9dGhpcy5hcHAudXNlclN0b3AoaSxzKX19LHRoaXMucGFyZW50RWxlbWVudD10LHQuY2xhc3NMaXN0LmFkZChcInN0Zl9fcGFyZW50XCIpLHQuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJiZWdpblwiLCc8ZGl2IGNsYXNzPVwic3RmX193cmFwcGVyXCI+PC9kaXY+JyksdGhpcy53cmFwcGVyPXQucXVlcnlTZWxlY3RvcihcIi5zdGZfX3dyYXBwZXJcIiksdGhpcy5hcHA9ZTtjb25zdCBzPXRoaXMuYXBwLmdldFNldHRpbmdzKCkudXNlUG9ydHJhaXQ/MToyO3Quc3R5bGUubWluV2lkdGg9aS5taW5XaWR0aCpzK1wicHhcIix0LnN0eWxlLm1pbkhlaWdodD1pLm1pbkhlaWdodCtcInB4XCIsXCJmaXhlZFwiPT09aS5zaXplJiYodC5zdHlsZS5taW5XaWR0aD1pLndpZHRoKnMrXCJweFwiLHQuc3R5bGUubWluSGVpZ2h0PWkuaGVpZ2h0K1wicHhcIiksaS5hdXRvU2l6ZSYmKHQuc3R5bGUud2lkdGg9XCIxMDAlXCIsdC5zdHlsZS5tYXhXaWR0aD0yKmkubWF4V2lkdGgrXCJweFwiKSx0LnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5vblJlc2l6ZSwhMSksdGhpcy5zd2lwZURpc3RhbmNlPWkuc3dpcGVEaXN0YW5jZX1kZXN0cm95KCl7dGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS51c2VNb3VzZUV2ZW50cyYmdGhpcy5yZW1vdmVIYW5kbGVycygpLHRoaXMuZGlzdEVsZW1lbnQucmVtb3ZlKCksdGhpcy53cmFwcGVyLnJlbW92ZSgpfWdldERpc3RFbGVtZW50KCl7cmV0dXJuIHRoaXMuZGlzdEVsZW1lbnR9Z2V0V3JhcHBlcigpe3JldHVybiB0aGlzLndyYXBwZXJ9c2V0T3JpZW50YXRpb25TdHlsZSh0KXt0aGlzLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZShcIi0tcG9ydHJhaXRcIixcIi0tbGFuZHNjYXBlXCIpLFwicG9ydHJhaXRcIj09PXQ/KHRoaXMuYXBwLmdldFNldHRpbmdzKCkuYXV0b1NpemUmJih0aGlzLndyYXBwZXIuc3R5bGUucGFkZGluZ0JvdHRvbT10aGlzLmFwcC5nZXRTZXR0aW5ncygpLmhlaWdodC90aGlzLmFwcC5nZXRTZXR0aW5ncygpLndpZHRoKjEwMCtcIiVcIiksdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCItLXBvcnRyYWl0XCIpKToodGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5hdXRvU2l6ZSYmKHRoaXMud3JhcHBlci5zdHlsZS5wYWRkaW5nQm90dG9tPXRoaXMuYXBwLmdldFNldHRpbmdzKCkuaGVpZ2h0LygyKnRoaXMuYXBwLmdldFNldHRpbmdzKCkud2lkdGgpKjEwMCtcIiVcIiksdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCItLWxhbmRzY2FwZVwiKSksdGhpcy51cGRhdGUoKX1yZW1vdmVIYW5kbGVycygpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5vblJlc2l6ZSksdGhpcy5kaXN0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbk1vdXNlRG93biksdGhpcy5kaXN0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMub25Ub3VjaFN0YXJ0KSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3VzZU1vdmUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblRvdWNoTW92ZSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbk1vdXNlVXApLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm9uVG91Y2hFbmQpfXNldEhhbmRsZXJzKCl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLm9uUmVzaXplLCExKSx0aGlzLmFwcC5nZXRTZXR0aW5ncygpLnVzZU1vdXNlRXZlbnRzJiYodGhpcy5kaXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbk1vdXNlRG93biksdGhpcy5kaXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMub25Ub3VjaFN0YXJ0KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3VzZU1vdmUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblRvdWNoTW92ZSx7cGFzc2l2ZTohdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5tb2JpbGVTY3JvbGxTdXBwb3J0fSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbk1vdXNlVXApLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm9uVG91Y2hFbmQpKX1nZXRNb3VzZVBvcyh0LGUpe2NvbnN0IGk9dGhpcy5kaXN0RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57eDp0LWkubGVmdCx5OmUtaS50b3B9fWNoZWNrVGFyZ2V0KHQpe3JldHVybiF0aGlzLmFwcC5nZXRTZXR0aW5ncygpLmNsaWNrRXZlbnRGb3J3YXJkfHwhW1wiYVwiLFwiYnV0dG9uXCJdLmluY2x1ZGVzKHQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKX19Y2xhc3MgYyBleHRlbmRzIHB7Y29uc3RydWN0b3IodCxlLGkscyl7c3VwZXIodCxlLGkpLHRoaXMud3JhcHBlci5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmJlZ2luXCIsJzxkaXYgY2xhc3M9XCJzdGZfX2Jsb2NrXCI+PC9kaXY+JyksdGhpcy5kaXN0RWxlbWVudD10LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19ibG9ja1wiKSx0aGlzLml0ZW1zPXM7Zm9yKGNvbnN0IHQgb2Ygcyl0aGlzLmRpc3RFbGVtZW50LmFwcGVuZENoaWxkKHQpO3RoaXMuc2V0SGFuZGxlcnMoKX1jbGVhcigpe2Zvcihjb25zdCB0IG9mIHRoaXMuaXRlbXMpdGhpcy5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHQpfXVwZGF0ZUl0ZW1zKHQpe3RoaXMucmVtb3ZlSGFuZGxlcnMoKSx0aGlzLmRpc3RFbGVtZW50LmlubmVySFRNTD1cIlwiO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5kaXN0RWxlbWVudC5hcHBlbmRDaGlsZChlKTt0aGlzLml0ZW1zPXQsdGhpcy5zZXRIYW5kbGVycygpfXVwZGF0ZSgpe3RoaXMuYXBwLmdldFJlbmRlcigpLnVwZGF0ZSgpfX1jbGFzcyB1IGV4dGVuZHMgcHtjb25zdHJ1Y3Rvcih0LGUsaSl7c3VwZXIodCxlLGkpLHRoaXMud3JhcHBlci5pbm5lckhUTUw9JzxjYW52YXMgY2xhc3M9XCJzdGZfX2NhbnZhc1wiPjwvY2FudmFzPicsdGhpcy5jYW52YXM9dC5xdWVyeVNlbGVjdG9yQWxsKFwiY2FudmFzXCIpWzBdLHRoaXMuZGlzdEVsZW1lbnQ9dGhpcy5jYW52YXMsdGhpcy5yZXNpemVDYW52YXMoKSx0aGlzLnNldEhhbmRsZXJzKCl9cmVzaXplQ2FudmFzKCl7Y29uc3QgdD1nZXRDb21wdXRlZFN0eWxlKHRoaXMuY2FudmFzKSxlPXBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIpLDEwKSxpPXBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZShcImhlaWdodFwiKSwxMCk7dGhpcy5jYW52YXMud2lkdGg9ZSx0aGlzLmNhbnZhcy5oZWlnaHQ9aX1nZXRDYW52YXMoKXtyZXR1cm4gdGhpcy5jYW52YXN9dXBkYXRlKCl7dGhpcy5yZXNpemVDYW52YXMoKSx0aGlzLmFwcC5nZXRSZW5kZXIoKS51cGRhdGUoKX19Y2xhc3MgdyBleHRlbmRzIGx7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQsZSksdGhpcy5vdXRlclNoYWRvdz1udWxsLHRoaXMuaW5uZXJTaGFkb3c9bnVsbCx0aGlzLmhhcmRTaGFkb3c9bnVsbCx0aGlzLmhhcmRJbm5lclNoYWRvdz1udWxsLHRoaXMuZWxlbWVudD1pLHRoaXMuY3JlYXRlU2hhZG93cygpfWNyZWF0ZVNoYWRvd3MoKXt0aGlzLmVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsJzxkaXYgY2xhc3M9XCJzdGZfX291dGVyU2hhZG93XCI+PC9kaXY+XFxuICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGZfX2lubmVyU2hhZG93XCI+PC9kaXY+XFxuICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGZfX2hhcmRTaGFkb3dcIj48L2Rpdj5cXG4gICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0Zl9faGFyZElubmVyU2hhZG93XCI+PC9kaXY+JyksdGhpcy5vdXRlclNoYWRvdz10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGZfX291dGVyU2hhZG93XCIpLHRoaXMuaW5uZXJTaGFkb3c9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19pbm5lclNoYWRvd1wiKSx0aGlzLmhhcmRTaGFkb3c9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19oYXJkU2hhZG93XCIpLHRoaXMuaGFyZElubmVyU2hhZG93PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0Zl9faGFyZElubmVyU2hhZG93XCIpfWNsZWFyU2hhZG93KCl7c3VwZXIuY2xlYXJTaGFkb3coKSx0aGlzLm91dGVyU2hhZG93LnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OiBub25lXCIsdGhpcy5pbm5lclNoYWRvdy5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTogbm9uZVwiLHRoaXMuaGFyZFNoYWRvdy5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTogbm9uZVwiLHRoaXMuaGFyZElubmVyU2hhZG93LnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OiBub25lXCJ9cmVsb2FkKCl7dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19vdXRlclNoYWRvd1wiKXx8dGhpcy5jcmVhdGVTaGFkb3dzKCl9ZHJhd0hhcmRJbm5lclNoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCksZT10aGlzLnNoYWRvdy5wcm9ncmVzcz4xMDA/MjAwLXRoaXMuc2hhZG93LnByb2dyZXNzOnRoaXMuc2hhZG93LnByb2dyZXNzO2xldCBpPSgxMDAtZSkqKDIuNSp0LnBhZ2VXaWR0aCkvMTAwKzIwO2k+dC5wYWdlV2lkdGgmJihpPXQucGFnZVdpZHRoKTtsZXQgcz1gXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgICAgei1pbmRleDogJHsodGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzUpLnRvU3RyaW5nKDEwKX07XFxuICAgICAgICAgICAgd2lkdGg6ICR7aX1weDtcXG4gICAgICAgICAgICBoZWlnaHQ6ICR7dC5oZWlnaHR9cHg7XFxuICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LFxcbiAgICAgICAgICAgICAgICByZ2JhKDAsIDAsIDAsICR7dGhpcy5zaGFkb3cub3BhY2l0eSplLzEwMH0pIDUlLFxcbiAgICAgICAgICAgICAgICByZ2JhKDAsIDAsIDAsIDApIDEwMCUpO1xcbiAgICAgICAgICAgIGxlZnQ6ICR7dC5sZWZ0K3Qud2lkdGgvMn1weDtcXG4gICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XFxuICAgICAgICBgO3MrPTA9PT10aGlzLmdldERpcmVjdGlvbigpJiZ0aGlzLnNoYWRvdy5wcm9ncmVzcz4xMDB8fDE9PT10aGlzLmdldERpcmVjdGlvbigpJiZ0aGlzLnNoYWRvdy5wcm9ncmVzczw9MTAwP1widHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcIjpcInRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCkgcm90YXRlWSgxODBkZWcpO1wiLHRoaXMuaGFyZElubmVyU2hhZG93LnN0eWxlLmNzc1RleHQ9c31kcmF3SGFyZE91dGVyU2hhZG93KCl7Y29uc3QgdD10aGlzLmdldFJlY3QoKTtsZXQgZT0oMTAwLSh0aGlzLnNoYWRvdy5wcm9ncmVzcz4xMDA/MjAwLXRoaXMuc2hhZG93LnByb2dyZXNzOnRoaXMuc2hhZG93LnByb2dyZXNzKSkqKDIuNSp0LnBhZ2VXaWR0aCkvMTAwKzIwO2U+dC5wYWdlV2lkdGgmJihlPXQucGFnZVdpZHRoKTtsZXQgaT1gXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgICAgei1pbmRleDogJHsodGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzQpLnRvU3RyaW5nKDEwKX07XFxuICAgICAgICAgICAgd2lkdGg6ICR7ZX1weDtcXG4gICAgICAgICAgICBoZWlnaHQ6ICR7dC5oZWlnaHR9cHg7XFxuICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGxlZnQsIHJnYmEoMCwgMCwgMCwgJHt0aGlzLnNoYWRvdy5vcGFjaXR5fSkgNSUsIHJnYmEoMCwgMCwgMCwgMCkgMTAwJSk7XFxuICAgICAgICAgICAgbGVmdDogJHt0LmxlZnQrdC53aWR0aC8yfXB4O1xcbiAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcXG4gICAgICAgIGA7aSs9MD09PXRoaXMuZ2V0RGlyZWN0aW9uKCkmJnRoaXMuc2hhZG93LnByb2dyZXNzPjEwMHx8MT09PXRoaXMuZ2V0RGlyZWN0aW9uKCkmJnRoaXMuc2hhZG93LnByb2dyZXNzPD0xMDA/XCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApIHJvdGF0ZVkoMTgwZGVnKTtcIjpcInRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7XCIsdGhpcy5oYXJkU2hhZG93LnN0eWxlLmNzc1RleHQ9aX1kcmF3SW5uZXJTaGFkb3coKXtjb25zdCB0PXRoaXMuZ2V0UmVjdCgpLGU9Myp0aGlzLnNoYWRvdy53aWR0aC80LGk9MD09PXRoaXMuZ2V0RGlyZWN0aW9uKCk/ZTowLHM9MD09PXRoaXMuZ2V0RGlyZWN0aW9uKCk/XCJ0byBsZWZ0XCI6XCJ0byByaWdodFwiLG49dGhpcy5jb252ZXJ0VG9HbG9iYWwodGhpcy5zaGFkb3cucG9zKSxyPXRoaXMuc2hhZG93LmFuZ2xlKzMqTWF0aC5QSS8yLG89W3RoaXMucGFnZVJlY3QudG9wTGVmdCx0aGlzLnBhZ2VSZWN0LnRvcFJpZ2h0LHRoaXMucGFnZVJlY3QuYm90dG9tUmlnaHQsdGhpcy5wYWdlUmVjdC5ib3R0b21MZWZ0XTtsZXQgYT1cInBvbHlnb24oIFwiO2Zvcihjb25zdCB0IG9mIG8pe2xldCBlPTE9PT10aGlzLmdldERpcmVjdGlvbigpP3t4Oi10LngrdGhpcy5zaGFkb3cucG9zLngseTp0LnktdGhpcy5zaGFkb3cucG9zLnl9Ont4OnQueC10aGlzLnNoYWRvdy5wb3MueCx5OnQueS10aGlzLnNoYWRvdy5wb3MueX07ZT1oLkdldFJvdGF0ZWRQb2ludChlLHt4OmkseToxMDB9LHIpLGErPWUueCtcInB4IFwiK2UueStcInB4LCBcIn1hPWEuc2xpY2UoMCwtMiksYSs9XCIpXCI7Y29uc3QgZz1gXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgICAgei1pbmRleDogJHsodGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzEwKS50b1N0cmluZygxMCl9O1xcbiAgICAgICAgICAgIHdpZHRoOiAke2V9cHg7XFxuICAgICAgICAgICAgaGVpZ2h0OiAkezIqdC5oZWlnaHR9cHg7XFxuICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KCR7c30sXFxuICAgICAgICAgICAgICAgIHJnYmEoMCwgMCwgMCwgJHt0aGlzLnNoYWRvdy5vcGFjaXR5fSkgNSUsXFxuICAgICAgICAgICAgICAgIHJnYmEoMCwgMCwgMCwgMC4wNSkgMTUlLFxcbiAgICAgICAgICAgICAgICByZ2JhKDAsIDAsIDAsICR7dGhpcy5zaGFkb3cub3BhY2l0eX0pIDM1JSxcXG4gICAgICAgICAgICAgICAgcmdiYSgwLCAwLCAwLCAwKSAxMDAlKTtcXG4gICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAke2l9cHggMTAwcHg7XFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgke24ueC1pfXB4LCAke24ueS0xMDB9cHgsIDApIHJvdGF0ZSgke3J9cmFkKTtcXG4gICAgICAgICAgICBjbGlwLXBhdGg6ICR7YX07XFxuICAgICAgICAgICAgLXdlYmtpdC1jbGlwLXBhdGg6ICR7YX07XFxuICAgICAgICBgO3RoaXMuaW5uZXJTaGFkb3cuc3R5bGUuY3NzVGV4dD1nfWRyYXdPdXRlclNoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCksZT10aGlzLmNvbnZlcnRUb0dsb2JhbCh7eDp0aGlzLnNoYWRvdy5wb3MueCx5OnRoaXMuc2hhZG93LnBvcy55fSksaT10aGlzLnNoYWRvdy5hbmdsZSszKk1hdGguUEkvMixzPTE9PT10aGlzLmdldERpcmVjdGlvbigpP3RoaXMuc2hhZG93LndpZHRoOjAsbj0wPT09dGhpcy5nZXREaXJlY3Rpb24oKT9cInRvIHJpZ2h0XCI6XCJ0byBsZWZ0XCIscj1be3g6MCx5OjB9LHt4OnQucGFnZVdpZHRoLHk6MH0se3g6dC5wYWdlV2lkdGgseTp0LmhlaWdodH0se3g6MCx5OnQuaGVpZ2h0fV07bGV0IG89XCJwb2x5Z29uKCBcIjtmb3IoY29uc3QgdCBvZiByKWlmKG51bGwhPT10KXtsZXQgZT0xPT09dGhpcy5nZXREaXJlY3Rpb24oKT97eDotdC54K3RoaXMuc2hhZG93LnBvcy54LHk6dC55LXRoaXMuc2hhZG93LnBvcy55fTp7eDp0LngtdGhpcy5zaGFkb3cucG9zLngseTp0LnktdGhpcy5zaGFkb3cucG9zLnl9O2U9aC5HZXRSb3RhdGVkUG9pbnQoZSx7eDpzLHk6MTAwfSxpKSxvKz1lLngrXCJweCBcIitlLnkrXCJweCwgXCJ9bz1vLnNsaWNlKDAsLTIpLG8rPVwiKVwiO2NvbnN0IGE9YFxcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICAgICAgICAgIHotaW5kZXg6ICR7KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCsxMCkudG9TdHJpbmcoMTApfTtcXG4gICAgICAgICAgICB3aWR0aDogJHt0aGlzLnNoYWRvdy53aWR0aH1weDtcXG4gICAgICAgICAgICBoZWlnaHQ6ICR7Mip0LmhlaWdodH1weDtcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoJHtufSwgcmdiYSgwLCAwLCAwLCAke3RoaXMuc2hhZG93Lm9wYWNpdHl9KSwgcmdiYSgwLCAwLCAwLCAwKSk7XFxuICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogJHtzfXB4IDEwMHB4O1xcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoJHtlLngtc31weCwgJHtlLnktMTAwfXB4LCAwKSByb3RhdGUoJHtpfXJhZCk7XFxuICAgICAgICAgICAgY2xpcC1wYXRoOiAke299O1xcbiAgICAgICAgICAgIC13ZWJraXQtY2xpcC1wYXRoOiAke299O1xcbiAgICAgICAgYDt0aGlzLm91dGVyU2hhZG93LnN0eWxlLmNzc1RleHQ9YX1kcmF3TGVmdFBhZ2UoKXtcInBvcnRyYWl0XCIhPT10aGlzLm9yaWVudGF0aW9uJiZudWxsIT09dGhpcy5sZWZ0UGFnZSYmKDE9PT10aGlzLmRpcmVjdGlvbiYmbnVsbCE9PXRoaXMuZmxpcHBpbmdQYWdlJiZcImhhcmRcIj09PXRoaXMuZmxpcHBpbmdQYWdlLmdldERyYXdpbmdEZW5zaXR5KCk/KHRoaXMubGVmdFBhZ2UuZ2V0RWxlbWVudCgpLnN0eWxlLnpJbmRleD0odGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzUpLnRvU3RyaW5nKDEwKSx0aGlzLmxlZnRQYWdlLnNldEhhcmREcmF3aW5nQW5nbGUoMTgwK3RoaXMuZmxpcHBpbmdQYWdlLmdldEhhcmRBbmdsZSgpKSx0aGlzLmxlZnRQYWdlLmRyYXcodGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RHJhd2luZ0RlbnNpdHkoKSkpOnRoaXMubGVmdFBhZ2Uuc2ltcGxlRHJhdygwKSl9ZHJhd1JpZ2h0UGFnZSgpe251bGwhPT10aGlzLnJpZ2h0UGFnZSYmKDA9PT10aGlzLmRpcmVjdGlvbiYmbnVsbCE9PXRoaXMuZmxpcHBpbmdQYWdlJiZcImhhcmRcIj09PXRoaXMuZmxpcHBpbmdQYWdlLmdldERyYXdpbmdEZW5zaXR5KCk/KHRoaXMucmlnaHRQYWdlLmdldEVsZW1lbnQoKS5zdHlsZS56SW5kZXg9KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCs1KS50b1N0cmluZygxMCksdGhpcy5yaWdodFBhZ2Uuc2V0SGFyZERyYXdpbmdBbmdsZSgxODArdGhpcy5mbGlwcGluZ1BhZ2UuZ2V0SGFyZEFuZ2xlKCkpLHRoaXMucmlnaHRQYWdlLmRyYXcodGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RHJhd2luZ0RlbnNpdHkoKSkpOnRoaXMucmlnaHRQYWdlLnNpbXBsZURyYXcoMSkpfWRyYXdCb3R0b21QYWdlKCl7aWYobnVsbD09PXRoaXMuYm90dG9tUGFnZSlyZXR1cm47Y29uc3QgdD1udWxsIT10aGlzLmZsaXBwaW5nUGFnZT90aGlzLmZsaXBwaW5nUGFnZS5nZXREcmF3aW5nRGVuc2l0eSgpOm51bGw7XCJwb3J0cmFpdFwiPT09dGhpcy5vcmllbnRhdGlvbiYmMT09PXRoaXMuZGlyZWN0aW9ufHwodGhpcy5ib3R0b21QYWdlLmdldEVsZW1lbnQoKS5zdHlsZS56SW5kZXg9KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCszKS50b1N0cmluZygxMCksdGhpcy5ib3R0b21QYWdlLmRyYXcodCkpfWRyYXdGcmFtZSgpe3RoaXMuY2xlYXIoKSx0aGlzLmRyYXdMZWZ0UGFnZSgpLHRoaXMuZHJhd1JpZ2h0UGFnZSgpLHRoaXMuZHJhd0JvdHRvbVBhZ2UoKSxudWxsIT10aGlzLmZsaXBwaW5nUGFnZSYmKHRoaXMuZmxpcHBpbmdQYWdlLmdldEVsZW1lbnQoKS5zdHlsZS56SW5kZXg9KHRoaXMuZ2V0U2V0dGluZ3MoKS5zdGFydFpJbmRleCs1KS50b1N0cmluZygxMCksdGhpcy5mbGlwcGluZ1BhZ2UuZHJhdygpKSxudWxsIT10aGlzLnNoYWRvdyYmbnVsbCE9PXRoaXMuZmxpcHBpbmdQYWdlJiYoXCJzb2Z0XCI9PT10aGlzLmZsaXBwaW5nUGFnZS5nZXREcmF3aW5nRGVuc2l0eSgpPyh0aGlzLmRyYXdPdXRlclNoYWRvdygpLHRoaXMuZHJhd0lubmVyU2hhZG93KCkpOih0aGlzLmRyYXdIYXJkT3V0ZXJTaGFkb3coKSx0aGlzLmRyYXdIYXJkSW5uZXJTaGFkb3coKSkpfWNsZWFyKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5nZXRQYWdlcygpKXQhPT10aGlzLmxlZnRQYWdlJiZ0IT09dGhpcy5yaWdodFBhZ2UmJnQhPT10aGlzLmZsaXBwaW5nUGFnZSYmdCE9PXRoaXMuYm90dG9tUGFnZSYmKHQuZ2V0RWxlbWVudCgpLnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OiBub25lXCIpLHQuZ2V0VGVtcG9yYXJ5Q29weSgpIT09dGhpcy5mbGlwcGluZ1BhZ2UmJnQuaGlkZVRlbXBvcmFyeUNvcHkoKX11cGRhdGUoKXtzdXBlci51cGRhdGUoKSxudWxsIT09dGhpcy5yaWdodFBhZ2UmJnRoaXMucmlnaHRQYWdlLnNldE9yaWVudGF0aW9uKDEpLG51bGwhPT10aGlzLmxlZnRQYWdlJiZ0aGlzLmxlZnRQYWdlLnNldE9yaWVudGF0aW9uKDApfX1jbGFzcyB4e2NvbnN0cnVjdG9yKCl7dGhpcy5fZGVmYXVsdD17c3RhcnRQYWdlOjAsc2l6ZTpcImZpeGVkXCIsd2lkdGg6MCxoZWlnaHQ6MCxtaW5XaWR0aDowLG1heFdpZHRoOjAsbWluSGVpZ2h0OjAsbWF4SGVpZ2h0OjAsZHJhd1NoYWRvdzohMCxmbGlwcGluZ1RpbWU6MWUzLHVzZVBvcnRyYWl0OiEwLHN0YXJ0WkluZGV4OjAsYXV0b1NpemU6ITAsbWF4U2hhZG93T3BhY2l0eToxLHNob3dDb3ZlcjohMSxtb2JpbGVTY3JvbGxTdXBwb3J0OiEwLHN3aXBlRGlzdGFuY2U6MzAsY2xpY2tFdmVudEZvcndhcmQ6ITAsdXNlTW91c2VFdmVudHM6ITAsc2hvd1BhZ2VDb3JuZXJzOiEwLGRpc2FibGVGbGlwQnlDbGljazohMX19Z2V0U2V0dGluZ3ModCl7Y29uc3QgZT10aGlzLl9kZWZhdWx0O2lmKE9iamVjdC5hc3NpZ24oZSx0KSxcInN0cmV0Y2hcIiE9PWUuc2l6ZSYmXCJmaXhlZFwiIT09ZS5zaXplKXRocm93IG5ldyBFcnJvcignSW52YWxpZCBzaXplIHR5cGUuIEF2YWlsYWJsZSBvbmx5IFwiZml4ZWRcIiBhbmQgXCJzdHJldGNoXCIgdmFsdWUnKTtpZihlLndpZHRoPD0wfHxlLmhlaWdodDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHdpZHRoIG9yIGhlaWdodFwiKTtpZihlLmZsaXBwaW5nVGltZTw9MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGZsaXBwaW5nIHRpbWVcIik7cmV0dXJuXCJzdHJldGNoXCI9PT1lLnNpemU/KGUubWluV2lkdGg8PTAmJihlLm1pbldpZHRoPTEwMCksZS5tYXhXaWR0aDxlLm1pbldpZHRoJiYoZS5tYXhXaWR0aD0yZTMpLGUubWluSGVpZ2h0PD0wJiYoZS5taW5IZWlnaHQ9MTAwKSxlLm1heEhlaWdodDxlLm1pbkhlaWdodCYmKGUubWF4SGVpZ2h0PTJlMykpOihlLm1pbldpZHRoPWUud2lkdGgsZS5tYXhXaWR0aD1lLndpZHRoLGUubWluSGVpZ2h0PWUuaGVpZ2h0LGUubWF4SGVpZ2h0PWUuaGVpZ2h0KSxlfX0hZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIGk9ZS5pbnNlcnRBdDtpZih0JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQpe3ZhciBzPWRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtuLnR5cGU9XCJ0ZXh0L2Nzc1wiLFwidG9wXCI9PT1pJiZzLmZpcnN0Q2hpbGQ/cy5pbnNlcnRCZWZvcmUobixzLmZpcnN0Q2hpbGQpOnMuYXBwZW5kQ2hpbGQobiksbi5zdHlsZVNoZWV0P24uc3R5bGVTaGVldC5jc3NUZXh0PXQ6bi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0KSl9fShcIi5zdGZfX3BhcmVudCB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7XFxuXFxuICAtbXMtdG91Y2gtYWN0aW9uOiBwYW4teTtcXG4gIHRvdWNoLWFjdGlvbjogcGFuLXk7XFxufVxcblxcbi5zZnRfX3dyYXBwZXIge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbn1cXG5cXG4uc3RmX19wYXJlbnQgY2FudmFzIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG59XFxuXFxuLnN0Zl9fYmxvY2sge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgcGVyc3BlY3RpdmU6IDIwMDBweDtcXG59XFxuXFxuLnN0Zl9faXRlbSB7XFxuICBkaXNwbGF5OiBub25lO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcXG59XFxuXFxuLnN0Zl9fb3V0ZXJTaGFkb3cge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG59XFxuXFxuLnN0Zl9faW5uZXJTaGFkb3cge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG59XFxuXFxuLnN0Zl9faGFyZFNoYWRvdyB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbn1cXG5cXG4uc3RmX19oYXJkSW5uZXJTaGFkb3cge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMDtcXG4gIHRvcDogMDtcXG59XCIpO3QuUGFnZUZsaXA9Y2xhc3MgZXh0ZW5kcyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuZXZlbnRzPW5ldyBNYXB9b24odCxlKXtyZXR1cm4gdGhpcy5ldmVudHMuaGFzKHQpP3RoaXMuZXZlbnRzLmdldCh0KS5wdXNoKGUpOnRoaXMuZXZlbnRzLnNldCh0LFtlXSksdGhpc31vZmYodCl7dGhpcy5ldmVudHMuZGVsZXRlKHQpfXRyaWdnZXIodCxlLGk9bnVsbCl7aWYodGhpcy5ldmVudHMuaGFzKHQpKWZvcihjb25zdCBzIG9mIHRoaXMuZXZlbnRzLmdldCh0KSlzKHtkYXRhOmksb2JqZWN0OmV9KX19e2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoKSx0aGlzLmlzVXNlclRvdWNoPSExLHRoaXMuaXNVc2VyTW92ZT0hMSx0aGlzLnNldHRpbmc9bnVsbCx0aGlzLnBhZ2VzPW51bGwsdGhpcy5zZXR0aW5nPShuZXcgeCkuZ2V0U2V0dGluZ3MoZSksdGhpcy5ibG9jaz10fWRlc3Ryb3koKXt0aGlzLnVpLmRlc3Ryb3koKSx0aGlzLmJsb2NrLnJlbW92ZSgpfXVwZGF0ZSgpe3RoaXMucmVuZGVyLnVwZGF0ZSgpLHRoaXMucGFnZXMuc2hvdygpfWxvYWRGcm9tSW1hZ2VzKHQpe3RoaXMudWk9bmV3IHUodGhpcy5ibG9jayx0aGlzLHRoaXMuc2V0dGluZyk7Y29uc3QgZT10aGlzLnVpLmdldENhbnZhcygpO3RoaXMucmVuZGVyPW5ldyBkKHRoaXMsdGhpcy5zZXR0aW5nLGUpLHRoaXMuZmxpcENvbnRyb2xsZXI9bmV3IGcodGhpcy5yZW5kZXIsdGhpcyksdGhpcy5wYWdlcz1uZXcgbih0aGlzLHRoaXMucmVuZGVyLHQpLHRoaXMucGFnZXMubG9hZCgpLHRoaXMucmVuZGVyLnN0YXJ0KCksdGhpcy5wYWdlcy5zaG93KHRoaXMuc2V0dGluZy5zdGFydFBhZ2UpLHNldFRpbWVvdXQoKCk9Pnt0aGlzLnVpLnVwZGF0ZSgpLHRoaXMudHJpZ2dlcihcImluaXRcIix0aGlzLHtwYWdlOnRoaXMuc2V0dGluZy5zdGFydFBhZ2UsbW9kZTp0aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpfSl9LDEpfWxvYWRGcm9tSFRNTCh0KXt0aGlzLnVpPW5ldyBjKHRoaXMuYmxvY2ssdGhpcyx0aGlzLnNldHRpbmcsdCksdGhpcy5yZW5kZXI9bmV3IHcodGhpcyx0aGlzLnNldHRpbmcsdGhpcy51aS5nZXREaXN0RWxlbWVudCgpKSx0aGlzLmZsaXBDb250cm9sbGVyPW5ldyBnKHRoaXMucmVuZGVyLHRoaXMpLHRoaXMucGFnZXM9bmV3IG8odGhpcyx0aGlzLnJlbmRlcix0aGlzLnVpLmdldERpc3RFbGVtZW50KCksdCksdGhpcy5wYWdlcy5sb2FkKCksdGhpcy5yZW5kZXIuc3RhcnQoKSx0aGlzLnBhZ2VzLnNob3codGhpcy5zZXR0aW5nLnN0YXJ0UGFnZSksc2V0VGltZW91dCgoKT0+e3RoaXMudWkudXBkYXRlKCksdGhpcy50cmlnZ2VyKFwiaW5pdFwiLHRoaXMse3BhZ2U6dGhpcy5zZXR0aW5nLnN0YXJ0UGFnZSxtb2RlOnRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCl9KX0sMSl9dXBkYXRlRnJvbUltYWdlcyh0KXtjb25zdCBlPXRoaXMucGFnZXMuZ2V0Q3VycmVudFBhZ2VJbmRleCgpO3RoaXMucGFnZXMuZGVzdHJveSgpLHRoaXMucGFnZXM9bmV3IG4odGhpcyx0aGlzLnJlbmRlcix0KSx0aGlzLnBhZ2VzLmxvYWQoKSx0aGlzLnBhZ2VzLnNob3coZSksdGhpcy50cmlnZ2VyKFwidXBkYXRlXCIsdGhpcyx7cGFnZTplLG1vZGU6dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKX0pfXVwZGF0ZUZyb21IdG1sKHQpe2NvbnN0IGU9dGhpcy5wYWdlcy5nZXRDdXJyZW50UGFnZUluZGV4KCk7dGhpcy5wYWdlcy5kZXN0cm95KCksdGhpcy5wYWdlcz1uZXcgbyh0aGlzLHRoaXMucmVuZGVyLHRoaXMudWkuZ2V0RGlzdEVsZW1lbnQoKSx0KSx0aGlzLnBhZ2VzLmxvYWQoKSx0aGlzLnVpLnVwZGF0ZUl0ZW1zKHQpLHRoaXMucmVuZGVyLnJlbG9hZCgpLHRoaXMucGFnZXMuc2hvdyhlKSx0aGlzLnRyaWdnZXIoXCJ1cGRhdGVcIix0aGlzLHtwYWdlOmUsbW9kZTp0aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpfSl9Y2xlYXIoKXt0aGlzLnBhZ2VzLmRlc3Ryb3koKSx0aGlzLnVpLmNsZWFyKCl9dHVyblRvUHJldlBhZ2UoKXt0aGlzLnBhZ2VzLnNob3dQcmV2KCl9dHVyblRvTmV4dFBhZ2UoKXt0aGlzLnBhZ2VzLnNob3dOZXh0KCl9dHVyblRvUGFnZSh0KXt0aGlzLnBhZ2VzLnNob3codCl9ZmxpcE5leHQodD1cInRvcFwiKXt0aGlzLmZsaXBDb250cm9sbGVyLmZsaXBOZXh0KHQpfWZsaXBQcmV2KHQ9XCJ0b3BcIil7dGhpcy5mbGlwQ29udHJvbGxlci5mbGlwUHJldih0KX1mbGlwKHQsZT1cInRvcFwiKXt0aGlzLmZsaXBDb250cm9sbGVyLmZsaXBUb1BhZ2UodCxlKX11cGRhdGVTdGF0ZSh0KXt0aGlzLnRyaWdnZXIoXCJjaGFuZ2VTdGF0ZVwiLHRoaXMsdCl9dXBkYXRlUGFnZUluZGV4KHQpe3RoaXMudHJpZ2dlcihcImZsaXBcIix0aGlzLHQpfXVwZGF0ZU9yaWVudGF0aW9uKHQpe3RoaXMudWkuc2V0T3JpZW50YXRpb25TdHlsZSh0KSx0aGlzLnVwZGF0ZSgpLHRoaXMudHJpZ2dlcihcImNoYW5nZU9yaWVudGF0aW9uXCIsdGhpcyx0KX1nZXRQYWdlQ291bnQoKXtyZXR1cm4gdGhpcy5wYWdlcy5nZXRQYWdlQ291bnQoKX1nZXRDdXJyZW50UGFnZUluZGV4KCl7cmV0dXJuIHRoaXMucGFnZXMuZ2V0Q3VycmVudFBhZ2VJbmRleCgpfWdldFBhZ2UodCl7cmV0dXJuIHRoaXMucGFnZXMuZ2V0UGFnZSh0KX1nZXRSZW5kZXIoKXtyZXR1cm4gdGhpcy5yZW5kZXJ9Z2V0RmxpcENvbnRyb2xsZXIoKXtyZXR1cm4gdGhpcy5mbGlwQ29udHJvbGxlcn1nZXRPcmllbnRhdGlvbigpe3JldHVybiB0aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpfWdldEJvdW5kc1JlY3QoKXtyZXR1cm4gdGhpcy5yZW5kZXIuZ2V0UmVjdCgpfWdldFNldHRpbmdzKCl7cmV0dXJuIHRoaXMuc2V0dGluZ31nZXRVSSgpe3JldHVybiB0aGlzLnVpfWdldFN0YXRlKCl7cmV0dXJuIHRoaXMuZmxpcENvbnRyb2xsZXIuZ2V0U3RhdGUoKX1nZXRQYWdlQ29sbGVjdGlvbigpe3JldHVybiB0aGlzLnBhZ2VzfXN0YXJ0VXNlclRvdWNoKHQpe3RoaXMubW91c2VQb3NpdGlvbj10LHRoaXMuaXNVc2VyVG91Y2g9ITAsdGhpcy5pc1VzZXJNb3ZlPSExfXVzZXJNb3ZlKHQsZSl7dGhpcy5pc1VzZXJUb3VjaHx8ZXx8IXRoaXMuc2V0dGluZy5zaG93UGFnZUNvcm5lcnM/dGhpcy5pc1VzZXJUb3VjaCYmaC5HZXREaXN0YW5jZUJldHdlZW5Ud29Qb2ludCh0aGlzLm1vdXNlUG9zaXRpb24sdCk+NSYmKHRoaXMuaXNVc2VyTW92ZT0hMCx0aGlzLmZsaXBDb250cm9sbGVyLmZvbGQodCkpOnRoaXMuZmxpcENvbnRyb2xsZXIuc2hvd0Nvcm5lcih0KX11c2VyU3RvcCh0LGU9ITEpe3RoaXMuaXNVc2VyVG91Y2gmJih0aGlzLmlzVXNlclRvdWNoPSExLGV8fCh0aGlzLmlzVXNlck1vdmU/dGhpcy5mbGlwQ29udHJvbGxlci5zdG9wTW92ZSgpOnRoaXMuZmxpcENvbnRyb2xsZXIuZmxpcCh0KSkpfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9KSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/page-flip@2.0.7/node_modules/page-flip/dist/js/page-flip.browser.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/.pnpm/react-pageflip@2.0.3/node_modules/react-pageflip/build/index.es.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/.pnpm/react-pageflip@2.0.3/node_modules/react-pageflip/build/index.es.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var page_flip__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! page-flip */ \"(app-pages-browser)/./node_modules/.pnpm/page-flip@2.0.7/node_modules/page-flip/dist/js/page-flip.browser.js\");\n/* harmony import */ var page_flip__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(page_flip__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nconst HTMLFlipBookForward = react__WEBPACK_IMPORTED_MODULE_0___default().forwardRef((props, ref) => {\r\n    const htmlElementRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\r\n    const childRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\r\n    const pageFlip = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\r\n    const [pages, setPages] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\r\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, () => ({\r\n        pageFlip: () => pageFlip.current,\r\n    }));\r\n    const refreshOnPageDelete = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\r\n        if (pageFlip.current) {\r\n            pageFlip.current.clear();\r\n        }\r\n    }, []);\r\n    const removeHandlers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\r\n        const flip = pageFlip.current;\r\n        if (flip) {\r\n            flip.off('flip');\r\n            flip.off('changeOrientation');\r\n            flip.off('changeState');\r\n            flip.off('init');\r\n            flip.off('update');\r\n        }\r\n    }, []);\r\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\r\n        childRef.current = [];\r\n        if (props.children) {\r\n            const childList = react__WEBPACK_IMPORTED_MODULE_0___default().Children.map(props.children, (child) => {\r\n                return react__WEBPACK_IMPORTED_MODULE_0___default().cloneElement(child, {\r\n                    ref: (dom) => {\r\n                        if (dom) {\r\n                            childRef.current.push(dom);\r\n                        }\r\n                    },\r\n                });\r\n            });\r\n            if (!props.renderOnlyPageLengthChange || pages.length !== childList.length) {\r\n                if (childList.length < pages.length) {\r\n                    refreshOnPageDelete();\r\n                }\r\n                setPages(childList);\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [props.children]);\r\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\r\n        const setHandlers = () => {\r\n            const flip = pageFlip.current;\r\n            if (flip) {\r\n                if (props.onFlip) {\r\n                    flip.on('flip', (e) => props.onFlip(e));\r\n                }\r\n                if (props.onChangeOrientation) {\r\n                    flip.on('changeOrientation', (e) => props.onChangeOrientation(e));\r\n                }\r\n                if (props.onChangeState) {\r\n                    flip.on('changeState', (e) => props.onChangeState(e));\r\n                }\r\n                if (props.onInit) {\r\n                    flip.on('init', (e) => props.onInit(e));\r\n                }\r\n                if (props.onUpdate) {\r\n                    flip.on('update', (e) => props.onUpdate(e));\r\n                }\r\n            }\r\n        };\r\n        if (pages.length > 0 && childRef.current.length > 0) {\r\n            removeHandlers();\r\n            if (htmlElementRef.current && !pageFlip.current) {\r\n                pageFlip.current = new page_flip__WEBPACK_IMPORTED_MODULE_1__.PageFlip(htmlElementRef.current, props);\r\n            }\r\n            if (!pageFlip.current.getFlipController()) {\r\n                pageFlip.current.loadFromHTML(childRef.current);\r\n            }\r\n            else {\r\n                pageFlip.current.updateFromHtml(childRef.current);\r\n            }\r\n            setHandlers();\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [pages]);\r\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: htmlElementRef, className: props.className, style: props.style }, pages));\r\n});\r\nconst HTMLFlipBook = react__WEBPACK_IMPORTED_MODULE_0___default().memo(HTMLFlipBookForward);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (HTMLFlipBook);\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9yZWFjdC1wYWdlZmxpcEAyLjAuMy9ub2RlX21vZHVsZXMvcmVhY3QtcGFnZWZsaXAvYnVpbGQvaW5kZXguZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNkY7QUFDeEQ7O0FBRXJDLDRCQUE0Qix1REFBZ0I7QUFDNUMsMkJBQTJCLDZDQUFNO0FBQ2pDLHFCQUFxQiw2Q0FBTTtBQUMzQixxQkFBcUIsNkNBQU07QUFDM0IsOEJBQThCLCtDQUFRO0FBQ3RDLElBQUksMERBQW1CO0FBQ3ZCO0FBQ0EsS0FBSztBQUNMLGdDQUFnQyxrREFBVztBQUMzQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMkJBQTJCLGtEQUFXO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQSw4QkFBOEIscURBQWM7QUFDNUMsdUJBQXVCLHlEQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsK0NBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWSwwREFBbUIsVUFBVSxxRUFBcUU7QUFDOUcsQ0FBQztBQUNELHFCQUFxQixpREFBVTs7QUFFL0IsK0RBQWUsWUFBWSxFQUFDO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy8ucG5wbS9yZWFjdC1wYWdlZmxpcEAyLjAuMy9ub2RlX21vZHVsZXMvcmVhY3QtcGFnZWZsaXAvYnVpbGQvaW5kZXguZXMuanM/YWFkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlSW1wZXJhdGl2ZUhhbmRsZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFBhZ2VGbGlwIH0gZnJvbSAncGFnZS1mbGlwJztcblxuY29uc3QgSFRNTEZsaXBCb29rRm9yd2FyZCA9IFJlYWN0LmZvcndhcmRSZWYoKHByb3BzLCByZWYpID0+IHtcclxuICAgIGNvbnN0IGh0bWxFbGVtZW50UmVmID0gdXNlUmVmKG51bGwpO1xyXG4gICAgY29uc3QgY2hpbGRSZWYgPSB1c2VSZWYoW10pO1xyXG4gICAgY29uc3QgcGFnZUZsaXAgPSB1c2VSZWYoKTtcclxuICAgIGNvbnN0IFtwYWdlcywgc2V0UGFnZXNdID0gdXNlU3RhdGUoW10pO1xyXG4gICAgdXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsICgpID0+ICh7XHJcbiAgICAgICAgcGFnZUZsaXA6ICgpID0+IHBhZ2VGbGlwLmN1cnJlbnQsXHJcbiAgICB9KSk7XHJcbiAgICBjb25zdCByZWZyZXNoT25QYWdlRGVsZXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgICAgIGlmIChwYWdlRmxpcC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIHBhZ2VGbGlwLmN1cnJlbnQuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbXSk7XHJcbiAgICBjb25zdCByZW1vdmVIYW5kbGVycyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgICAgICBjb25zdCBmbGlwID0gcGFnZUZsaXAuY3VycmVudDtcclxuICAgICAgICBpZiAoZmxpcCkge1xyXG4gICAgICAgICAgICBmbGlwLm9mZignZmxpcCcpO1xyXG4gICAgICAgICAgICBmbGlwLm9mZignY2hhbmdlT3JpZW50YXRpb24nKTtcclxuICAgICAgICAgICAgZmxpcC5vZmYoJ2NoYW5nZVN0YXRlJyk7XHJcbiAgICAgICAgICAgIGZsaXAub2ZmKCdpbml0Jyk7XHJcbiAgICAgICAgICAgIGZsaXAub2ZmKCd1cGRhdGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbXSk7XHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNoaWxkUmVmLmN1cnJlbnQgPSBbXTtcclxuICAgICAgICBpZiAocHJvcHMuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgY2hpbGRMaXN0ID0gUmVhY3QuQ2hpbGRyZW4ubWFwKHByb3BzLmNoaWxkcmVuLCAoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcclxuICAgICAgICAgICAgICAgICAgICByZWY6IChkb20pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRSZWYuY3VycmVudC5wdXNoKGRvbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoIXByb3BzLnJlbmRlck9ubHlQYWdlTGVuZ3RoQ2hhbmdlIHx8IHBhZ2VzLmxlbmd0aCAhPT0gY2hpbGRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkTGlzdC5sZW5ndGggPCBwYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoT25QYWdlRGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZXRQYWdlcyhjaGlsZExpc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcclxuICAgIH0sIFtwcm9wcy5jaGlsZHJlbl0pO1xyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBjb25zdCBzZXRIYW5kbGVycyA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmxpcCA9IHBhZ2VGbGlwLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGlmIChmbGlwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMub25GbGlwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcC5vbignZmxpcCcsIChlKSA9PiBwcm9wcy5vbkZsaXAoZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLm9uQ2hhbmdlT3JpZW50YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGlwLm9uKCdjaGFuZ2VPcmllbnRhdGlvbicsIChlKSA9PiBwcm9wcy5vbkNoYW5nZU9yaWVudGF0aW9uKGUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwcm9wcy5vbkNoYW5nZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcC5vbignY2hhbmdlU3RhdGUnLCAoZSkgPT4gcHJvcHMub25DaGFuZ2VTdGF0ZShlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMub25Jbml0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcC5vbignaW5pdCcsIChlKSA9PiBwcm9wcy5vbkluaXQoZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLm9uVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxpcC5vbigndXBkYXRlJywgKGUpID0+IHByb3BzLm9uVXBkYXRlKGUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDAgJiYgY2hpbGRSZWYuY3VycmVudC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZUhhbmRsZXJzKCk7XHJcbiAgICAgICAgICAgIGlmIChodG1sRWxlbWVudFJlZi5jdXJyZW50ICYmICFwYWdlRmxpcC5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlRmxpcC5jdXJyZW50ID0gbmV3IFBhZ2VGbGlwKGh0bWxFbGVtZW50UmVmLmN1cnJlbnQsIHByb3BzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXBhZ2VGbGlwLmN1cnJlbnQuZ2V0RmxpcENvbnRyb2xsZXIoKSkge1xyXG4gICAgICAgICAgICAgICAgcGFnZUZsaXAuY3VycmVudC5sb2FkRnJvbUhUTUwoY2hpbGRSZWYuY3VycmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlRmxpcC5jdXJyZW50LnVwZGF0ZUZyb21IdG1sKGNoaWxkUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldEhhbmRsZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcclxuICAgIH0sIFtwYWdlc10pO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBodG1sRWxlbWVudFJlZiwgY2xhc3NOYW1lOiBwcm9wcy5jbGFzc05hbWUsIHN0eWxlOiBwcm9wcy5zdHlsZSB9LCBwYWdlcykpO1xyXG59KTtcclxuY29uc3QgSFRNTEZsaXBCb29rID0gUmVhY3QubWVtbyhIVE1MRmxpcEJvb2tGb3J3YXJkKTtcblxuZXhwb3J0IGRlZmF1bHQgSFRNTEZsaXBCb29rO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/react-pageflip@2.0.3/node_modules/react-pageflip/build/index.es.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/app/[locale]/story/page.tsx":
/*!*****************************************!*\
  !*** ./src/app/[locale]/story/page.tsx ***!
  \*****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ StoryPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _constants_story__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/constants/story */ \"(app-pages-browser)/./src/constants/story.ts\");\n/* harmony import */ var react_pageflip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-pageflip */ \"(app-pages-browser)/./node_modules/.pnpm/react-pageflip@2.0.3/node_modules/react-pageflip/build/index.es.js\");\n/* harmony import */ var _uidotdev_usehooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @uidotdev/usehooks */ \"(app-pages-browser)/./node_modules/.pnpm/@uidotdev+usehooks@2.4.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@uidotdev/usehooks/index.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\nconst nextPageFooter = (isPortrait, index, lastPage)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-1/2 fixed right-0 text-right pr-10 \".concat(index === lastPage || !isPortrait && isLeftPage(index) ? \"hidden\" : \"\"),\n        children: \"\".concat(isPortrait ? \"\" : \"Pagina successiva \", \"-->\")\n    }, void 0, false, {\n        fileName: \"/Users/andreamagazzini/dev/cooperativa-agricola-dei-colli/src/app/[locale]/story/page.tsx\",\n        lineNumber: 7,\n        columnNumber: 82\n    }, undefined);\nconst previousPageFooter = (isPortrait, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-1/2 lg:w-full \".concat(index === 0 || !isPortrait && !isLeftPage(index) ? \"hidden\" : \"\"),\n        children: \"<--\".concat(isPortrait ? \"\" : \" Pagina precedente\")\n    }, void 0, false, {\n        fileName: \"/Users/andreamagazzini/dev/cooperativa-agricola-dei-colli/src/app/[locale]/story/page.tsx\",\n        lineNumber: 8,\n        columnNumber: 68\n    }, undefined);\nconst PORTRAIT_BREAKPOINT = 1000 //constant defined by pageflip\n;\nconst isLeftPage = (index)=>index % 2 === 0 // return true if it's a page on the left, false if it's a page on the right  \n;\nfunction StoryPage() {\n    _s();\n    const pages = _constants_story__WEBPACK_IMPORTED_MODULE_1__.STORY.split(/\\n/);\n    const size = (0,_uidotdev_usehooks__WEBPACK_IMPORTED_MODULE_3__.useWindowSize)();\n    const isPortrait = size.width && size.width < PORTRAIT_BREAKPOINT || false;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-full flex justify-center overflow-hidden\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_pageflip__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n            className: \"\",\n            style: {},\n            startPage: 0,\n            size: \"fixed\",\n            width: size.width && size.width < 500 ? size.width : 500,\n            height: 600,\n            minWidth: 0,\n            maxWidth: 0,\n            minHeight: 0,\n            maxHeight: 0,\n            drawShadow: true,\n            flippingTime: 1000,\n            usePortrait: true,\n            startZIndex: 0,\n            autoSize: true,\n            maxShadowOpacity: 1,\n            showCover: false,\n            mobileScrollSupport: true,\n            clickEventForward: true,\n            useMouseEvents: true,\n            swipeDistance: 0,\n            showPageCorners: true,\n            disableFlipByClick: false,\n            children: [\n                pages.map((p, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-left bg-white px-10 py-20 cursor-pointer h-full\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[450px]\",\n                                children: p\n                            }, void 0, false, {\n                                fileName: \"/Users/andreamagazzini/dev/cooperativa-agricola-dei-colli/src/app/[locale]/story/page.tsx\",\n                                lineNumber: 49,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex\",\n                                children: [\n                                    previousPageFooter(isPortrait, index),\n                                    nextPageFooter(isPortrait, index, pages.length - 1)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/andreamagazzini/dev/cooperativa-agricola-dei-colli/src/app/[locale]/story/page.tsx\",\n                                lineNumber: 50,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, index, true, {\n                        fileName: \"/Users/andreamagazzini/dev/cooperativa-agricola-dei-colli/src/app/[locale]/story/page.tsx\",\n                        lineNumber: 48,\n                        columnNumber: 11\n                    }, this)),\n                pages.length % 2 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white\"\n                }, void 0, false, {\n                    fileName: \"/Users/andreamagazzini/dev/cooperativa-agricola-dei-colli/src/app/[locale]/story/page.tsx\",\n                    lineNumber: 56,\n                    columnNumber: 29\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {}, void 0, false)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/andreamagazzini/dev/cooperativa-agricola-dei-colli/src/app/[locale]/story/page.tsx\",\n            lineNumber: 22,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/andreamagazzini/dev/cooperativa-agricola-dei-colli/src/app/[locale]/story/page.tsx\",\n        lineNumber: 21,\n        columnNumber: 5\n    }, this);\n}\n_s(StoryPage, \"/dTDjnwlNGsRzu12Dr5t7HJe8sA=\", false, function() {\n    return [\n        _uidotdev_usehooks__WEBPACK_IMPORTED_MODULE_3__.useWindowSize\n    ];\n});\n_c = StoryPage;\nvar _c;\n$RefreshReg$(_c, \"StoryPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvW2xvY2FsZV0vc3RvcnkvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUV5QztBQUNKO0FBQ2E7QUFFbEQsTUFBTUcsaUJBQWlCLENBQUNDLFlBQXFCQyxPQUFlQyx5QkFBcUIsOERBQUNDO1FBQUlDLFdBQVcsd0NBQWlILE9BQXpFSCxVQUFVQyxZQUFhLENBQUNGLGNBQWNLLFdBQVdKLFNBQVUsV0FBVztrQkFBTyxHQUEwQyxPQUF2Q0QsYUFBYSxLQUFLLHNCQUFxQjs7Ozs7O0FBQ2hRLE1BQU1NLHFCQUFxQixDQUFDTixZQUFxQkMsc0JBQWtCLDhEQUFDRTtRQUFJQyxXQUFXLG1CQUFzRixPQUFuRUgsVUFBVSxLQUFNLENBQUNELGNBQWMsQ0FBQ0ssV0FBV0osU0FBVSxXQUFXO2tCQUFPLE1BQTZDLE9BQXZDRCxhQUFhLEtBQUs7Ozs7OztBQUVyTSxNQUFNTyxzQkFBc0IsS0FBSyw4QkFBOEI7O0FBRS9ELE1BQU1GLGFBQWEsQ0FBQ0osUUFBa0JBLFFBQVEsTUFBTSxFQUFFLDhFQUE4RTs7QUFFckgsU0FBU087O0lBQ3RCLE1BQU1DLFFBQVFiLG1EQUFLQSxDQUFDYyxLQUFLLENBQUM7SUFDMUIsTUFBTUMsT0FBT2IsaUVBQWFBO0lBRTFCLE1BQU1FLGFBQWFXLEtBQUtDLEtBQUssSUFBSUQsS0FBS0MsS0FBSyxHQUFHTCx1QkFBdUI7SUFFckUscUJBQ0UsOERBQUNKO1FBQUlDLFdBQVU7a0JBQ2IsNEVBQUNQLHNEQUFRQTtZQUNQTyxXQUFXO1lBQ1hTLE9BQU8sQ0FBQztZQUNSQyxXQUFXO1lBQ1hILE1BQU07WUFDTkMsT0FBTyxLQUFNQSxLQUFLLElBQUlELEtBQUtDLEtBQUssR0FBRyxNQUFPRCxLQUFLQyxLQUFLLEdBQUc7WUFDdkRHLFFBQVE7WUFDUkMsVUFBVTtZQUNWQyxVQUFVO1lBQ1ZDLFdBQVc7WUFDWEMsV0FBVztZQUNYQyxVQUFVO1lBQ1ZDLGNBQWM7WUFDZEMsV0FBVztZQUNYQyxhQUFhO1lBQ2JDLFFBQVE7WUFDUkMsa0JBQWtCO1lBQ2xCQyxXQUFXO1lBQ1hDLG1CQUFtQjtZQUNuQkMsaUJBQWlCO1lBQ2pCQyxjQUFjO1lBQ2RDLGVBQWU7WUFDZkMsZUFBZTtZQUNmQyxvQkFBb0I7O2dCQUVuQnZCLE1BQU13QixHQUFHLENBQUMsQ0FBQ0MsR0FBR2pDLHNCQUNiLDhEQUFDRTt3QkFBZ0JDLFdBQVU7OzBDQUN6Qiw4REFBQ0Q7Z0NBQUlDLFdBQVU7MENBQWE4Qjs7Ozs7OzBDQUM1Qiw4REFBQy9CO2dDQUFJQyxXQUFVOztvQ0FDWkUsbUJBQW1CTixZQUFZQztvQ0FDL0JGLGVBQWVDLFlBQVlDLE9BQU9RLE1BQU0wQixNQUFNLEdBQUc7Ozs7Ozs7O3VCQUo1Q2xDOzs7OztnQkFRWFEsTUFBTTBCLE1BQU0sR0FBRyxrQkFBSSw4REFBQ2hDO29CQUFJQyxXQUFVOzs7Ozt5Q0FBb0I7Ozs7Ozs7Ozs7OztBQUkvRDtHQTlDd0JJOztRQUVUViw2REFBYUE7OztLQUZKVSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvYXBwL1tsb2NhbGVdL3N0b3J5L3BhZ2UudHN4PzRjNWIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IFNUT1JZIH0gZnJvbSAnQC9jb25zdGFudHMvc3RvcnknXG5pbXBvcnQgUGFnZUZsaXAgZnJvbSAncmVhY3QtcGFnZWZsaXAnXG5pbXBvcnQgeyB1c2VXaW5kb3dTaXplIH0gZnJvbSAnQHVpZG90ZGV2L3VzZWhvb2tzJ1xuXG5jb25zdCBuZXh0UGFnZUZvb3RlciA9IChpc1BvcnRyYWl0OiBib29sZWFuLCBpbmRleDogbnVtYmVyLCBsYXN0UGFnZTogbnVtYmVyKSA9PiA8ZGl2IGNsYXNzTmFtZT17YHctMS8yIGZpeGVkIHJpZ2h0LTAgdGV4dC1yaWdodCBwci0xMCAke2luZGV4ID09PSBsYXN0UGFnZSB8fCAoIWlzUG9ydHJhaXQgJiYgaXNMZWZ0UGFnZShpbmRleCkpID8gJ2hpZGRlbicgOiAnJ31gfT57YCR7aXNQb3J0cmFpdCA/ICcnIDogJ1BhZ2luYSBzdWNjZXNzaXZhICd9LS0+YH08L2Rpdj5cbmNvbnN0IHByZXZpb3VzUGFnZUZvb3RlciA9IChpc1BvcnRyYWl0OiBib29sZWFuLCBpbmRleDogbnVtYmVyKSA9PiA8ZGl2IGNsYXNzTmFtZT17YHctMS8yIGxnOnctZnVsbCAke2luZGV4ID09PSAwIHx8ICghaXNQb3J0cmFpdCAmJiAhaXNMZWZ0UGFnZShpbmRleCkpID8gJ2hpZGRlbicgOiAnJ31gfT57YDwtLSR7aXNQb3J0cmFpdCA/ICcnIDogJyBQYWdpbmEgcHJlY2VkZW50ZSd9YH08L2Rpdj5cblxuY29uc3QgUE9SVFJBSVRfQlJFQUtQT0lOVCA9IDEwMDAgLy9jb25zdGFudCBkZWZpbmVkIGJ5IHBhZ2VmbGlwXG5cbmNvbnN0IGlzTGVmdFBhZ2UgPSAoaW5kZXg6IG51bWJlcikgPT4gaW5kZXggJSAyID09PSAwIC8vIHJldHVybiB0cnVlIGlmIGl0J3MgYSBwYWdlIG9uIHRoZSBsZWZ0LCBmYWxzZSBpZiBpdCdzIGEgcGFnZSBvbiB0aGUgcmlnaHQgIFxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdG9yeVBhZ2UoKSB7XG4gIGNvbnN0IHBhZ2VzID0gU1RPUlkuc3BsaXQoL1xcbi8pXG4gIGNvbnN0IHNpemUgPSB1c2VXaW5kb3dTaXplKClcblxuICBjb25zdCBpc1BvcnRyYWl0ID0gc2l6ZS53aWR0aCAmJiBzaXplLndpZHRoIDwgUE9SVFJBSVRfQlJFQUtQT0lOVCB8fCBmYWxzZVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgIDxQYWdlRmxpcFxuICAgICAgICBjbGFzc05hbWU9eycnfVxuICAgICAgICBzdHlsZT17e319XG4gICAgICAgIHN0YXJ0UGFnZT17MH1cbiAgICAgICAgc2l6ZT17J2ZpeGVkJ31cbiAgICAgICAgd2lkdGg9eyhzaXplLndpZHRoICYmIHNpemUud2lkdGggPCA1MDApID8gc2l6ZS53aWR0aCA6IDUwMH1cbiAgICAgICAgaGVpZ2h0PXs2MDB9XG4gICAgICAgIG1pbldpZHRoPXswfVxuICAgICAgICBtYXhXaWR0aD17MH1cbiAgICAgICAgbWluSGVpZ2h0PXswfVxuICAgICAgICBtYXhIZWlnaHQ9ezB9XG4gICAgICAgIGRyYXdTaGFkb3dcbiAgICAgICAgZmxpcHBpbmdUaW1lPXsxMDAwfVxuICAgICAgICB1c2VQb3J0cmFpdFxuICAgICAgICBzdGFydFpJbmRleD17MH1cbiAgICAgICAgYXV0b1NpemVcbiAgICAgICAgbWF4U2hhZG93T3BhY2l0eT17MX1cbiAgICAgICAgc2hvd0NvdmVyPXtmYWxzZX1cbiAgICAgICAgbW9iaWxlU2Nyb2xsU3VwcG9ydFxuICAgICAgICBjbGlja0V2ZW50Rm9yd2FyZFxuICAgICAgICB1c2VNb3VzZUV2ZW50c1xuICAgICAgICBzd2lwZURpc3RhbmNlPXswfVxuICAgICAgICBzaG93UGFnZUNvcm5lcnNcbiAgICAgICAgZGlzYWJsZUZsaXBCeUNsaWNrPXtmYWxzZX1cbiAgICAgID5cbiAgICAgICAge3BhZ2VzLm1hcCgocCwgaW5kZXgpID0+IChcbiAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT1cInRleHQtbGVmdCBiZy13aGl0ZSBweC0xMCBweS0yMCBjdXJzb3ItcG9pbnRlciBoLWZ1bGxcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bNDUwcHhdXCI+e3B9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCc+XG4gICAgICAgICAgICAgIHtwcmV2aW91c1BhZ2VGb290ZXIoaXNQb3J0cmFpdCwgaW5kZXgpfVxuICAgICAgICAgICAgICB7bmV4dFBhZ2VGb290ZXIoaXNQb3J0cmFpdCwgaW5kZXgsIHBhZ2VzLmxlbmd0aCAtIDEpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgICB7cGFnZXMubGVuZ3RoICUgMiA/IDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGVcIj48L2Rpdj4gOiA8PjwvPn1cbiAgICAgIDwvUGFnZUZsaXA+XG4gICAgPC9kaXY+XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJTVE9SWSIsIlBhZ2VGbGlwIiwidXNlV2luZG93U2l6ZSIsIm5leHRQYWdlRm9vdGVyIiwiaXNQb3J0cmFpdCIsImluZGV4IiwibGFzdFBhZ2UiLCJkaXYiLCJjbGFzc05hbWUiLCJpc0xlZnRQYWdlIiwicHJldmlvdXNQYWdlRm9vdGVyIiwiUE9SVFJBSVRfQlJFQUtQT0lOVCIsIlN0b3J5UGFnZSIsInBhZ2VzIiwic3BsaXQiLCJzaXplIiwid2lkdGgiLCJzdHlsZSIsInN0YXJ0UGFnZSIsImhlaWdodCIsIm1pbldpZHRoIiwibWF4V2lkdGgiLCJtaW5IZWlnaHQiLCJtYXhIZWlnaHQiLCJkcmF3U2hhZG93IiwiZmxpcHBpbmdUaW1lIiwidXNlUG9ydHJhaXQiLCJzdGFydFpJbmRleCIsImF1dG9TaXplIiwibWF4U2hhZG93T3BhY2l0eSIsInNob3dDb3ZlciIsIm1vYmlsZVNjcm9sbFN1cHBvcnQiLCJjbGlja0V2ZW50Rm9yd2FyZCIsInVzZU1vdXNlRXZlbnRzIiwic3dpcGVEaXN0YW5jZSIsInNob3dQYWdlQ29ybmVycyIsImRpc2FibGVGbGlwQnlDbGljayIsIm1hcCIsInAiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/[locale]/story/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/constants/story.ts":
/*!********************************!*\
  !*** ./src/constants/story.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   STORY: function() { return /* binding */ STORY; }\n/* harmony export */ });\nconst STORY = \"La cooperativa agricola dei colli \\xe8 situata a Piazza al Serchio in alta Garfagnana (provincia di Lucca), circondata dalle catene montuese delle Alpi Apuane ad ovest e dell' Appennino Tosco-Emiliano ad est; confinante a nord con la Lunigiana, a ovest con la Versilia e la provincia di Massa Carrara, a est con l' Emilia (province di Modena e Reggio Emilia) e a sud con la Media Valle del Serchio.\\nLa cooperativa agricola a conduzione familiare, nasce nel 1980, raggruppando le aziende del territorio sia per la produzione di cereali antichi, sia per l' allevamento di bovini e suini allo stato semibrado.\\nNegli anni \\xe8 stato affiancato un impianto di trasformazione del farro perseguendo un progetto di filiera nel quale tutte le fasi per arrivare al prodotto finito vengono effettuate all' interno dell' azienda stessa. \\nIn modo particolare, queste comprendono la fase di trasformazione del farro grezzo, raccolto nei nostri campi, in un prodotto finito pronto al consumo alimentare. \\nLa quota di prodotto residuale da tale lavorazione (circa il 50% del peso iniziale), viene reimpiegata per l' alimentazione dei bovini e dei suini allevati in azienda.\\nIl letame di questi ultimi viene a sua volta riutilizzato per la concimazione naturale dei terreni nei quali si coltiva il farro stesso, andando a chiudere un ciclo virtuoso e contribuendo alla conservazione dell' equilibrio naturale locale.\";\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb25zdGFudHMvc3RvcnkudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLFFBQVMsKzNDQUs0TiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvY29uc3RhbnRzL3N0b3J5LnRzP2MwNGIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFNUT1JZID0gYExhIGNvb3BlcmF0aXZhIGFncmljb2xhIGRlaSBjb2xsaSDDqCBzaXR1YXRhIGEgUGlhenphIGFsIFNlcmNoaW8gaW4gYWx0YSBHYXJmYWduYW5hIChwcm92aW5jaWEgZGkgTHVjY2EpLCBjaXJjb25kYXRhIGRhbGxlIGNhdGVuZSBtb250dWVzZSBkZWxsZSBBbHBpIEFwdWFuZSBhZCBvdmVzdCBlIGRlbGwnIEFwcGVubmlubyBUb3Njby1FbWlsaWFubyBhZCBlc3Q7IGNvbmZpbmFudGUgYSBub3JkIGNvbiBsYSBMdW5pZ2lhbmEsIGEgb3Zlc3QgY29uIGxhIFZlcnNpbGlhIGUgbGEgcHJvdmluY2lhIGRpIE1hc3NhIENhcnJhcmEsIGEgZXN0IGNvbiBsJyBFbWlsaWEgKHByb3ZpbmNlIGRpIE1vZGVuYSBlIFJlZ2dpbyBFbWlsaWEpIGUgYSBzdWQgY29uIGxhIE1lZGlhIFZhbGxlIGRlbCBTZXJjaGlvLlxuTGEgY29vcGVyYXRpdmEgYWdyaWNvbGEgYSBjb25kdXppb25lIGZhbWlsaWFyZSwgbmFzY2UgbmVsIDE5ODAsIHJhZ2dydXBwYW5kbyBsZSBhemllbmRlIGRlbCB0ZXJyaXRvcmlvIHNpYSBwZXIgbGEgcHJvZHV6aW9uZSBkaSBjZXJlYWxpIGFudGljaGksIHNpYSBwZXIgbCcgYWxsZXZhbWVudG8gZGkgYm92aW5pIGUgc3VpbmkgYWxsbyBzdGF0byBzZW1pYnJhZG8uXG5OZWdsaSBhbm5pIMOoIHN0YXRvIGFmZmlhbmNhdG8gdW4gaW1waWFudG8gZGkgdHJhc2Zvcm1hemlvbmUgZGVsIGZhcnJvIHBlcnNlZ3VlbmRvIHVuIHByb2dldHRvIGRpIGZpbGllcmEgbmVsIHF1YWxlIHR1dHRlIGxlIGZhc2kgcGVyIGFycml2YXJlIGFsIHByb2RvdHRvIGZpbml0byB2ZW5nb25vIGVmZmV0dHVhdGUgYWxsJyBpbnRlcm5vIGRlbGwnIGF6aWVuZGEgc3Rlc3NhLiBcbkluIG1vZG8gcGFydGljb2xhcmUsIHF1ZXN0ZSBjb21wcmVuZG9ubyBsYSBmYXNlIGRpIHRyYXNmb3JtYXppb25lIGRlbCBmYXJybyBncmV6em8sIHJhY2NvbHRvIG5laSBub3N0cmkgY2FtcGksIGluIHVuIHByb2RvdHRvIGZpbml0byBwcm9udG8gYWwgY29uc3VtbyBhbGltZW50YXJlLiBcbkxhIHF1b3RhIGRpIHByb2RvdHRvIHJlc2lkdWFsZSBkYSB0YWxlIGxhdm9yYXppb25lIChjaXJjYSBpbCA1MCUgZGVsIHBlc28gaW5pemlhbGUpLCB2aWVuZSByZWltcGllZ2F0YSBwZXIgbCcgYWxpbWVudGF6aW9uZSBkZWkgYm92aW5pIGUgZGVpIHN1aW5pIGFsbGV2YXRpIGluIGF6aWVuZGEuXG5JbCBsZXRhbWUgZGkgcXVlc3RpIHVsdGltaSB2aWVuZSBhIHN1YSB2b2x0YSByaXV0aWxpenphdG8gcGVyIGxhIGNvbmNpbWF6aW9uZSBuYXR1cmFsZSBkZWkgdGVycmVuaSBuZWkgcXVhbGkgc2kgY29sdGl2YSBpbCBmYXJybyBzdGVzc28sIGFuZGFuZG8gYSBjaGl1ZGVyZSB1biBjaWNsbyB2aXJ0dW9zbyBlIGNvbnRyaWJ1ZW5kbyBhbGxhIGNvbnNlcnZhemlvbmUgZGVsbCcgZXF1aWxpYnJpbyBuYXR1cmFsZSBsb2NhbGUuYFxuIl0sIm5hbWVzIjpbIlNUT1JZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/constants/story.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js":
/*!********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js ***!
  \********************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nif (true) {\n  (function() {\n'use strict';\n\nvar React = __webpack_require__(/*! next/dist/compiled/react */ \"(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js\");\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider'); // TODO: Delete with enableRenderableContext\n\nvar REACT_CONSUMER_TYPE = Symbol.for('react.consumer');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar REACT_CACHE_TYPE = Symbol.for('react.cache');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\nvar enableRenderableContext = false;\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false;\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n}\n\nvar REACT_CLIENT_REFERENCE$2 = Symbol.for('react.client.reference'); // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  if (typeof type === 'function') {\n    if (type.$$typeof === REACT_CLIENT_REFERENCE$2) {\n      // TODO: Create a convention for naming client references with debug info.\n      return null;\n    }\n\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n    case REACT_CACHE_TYPE:\n      {\n        return 'Cache';\n      }\n\n  }\n\n  if (typeof type === 'object') {\n    {\n      if (typeof type.tag === 'number') {\n        error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n      }\n    }\n\n    switch (type.$$typeof) {\n      case REACT_PROVIDER_TYPE:\n        {\n          var provider = type;\n          return getContextName(provider._context) + '.Provider';\n        }\n\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n\n        {\n          return getContextName(context) + '.Consumer';\n        }\n\n      case REACT_CONSUMER_TYPE:\n        {\n          return null;\n        }\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n    }\n  }\n\n  return null;\n}\n\n// $FlowFixMe[method-unbinding]\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar assign = Object.assign;\n\n/*\n * The `'' + value` pattern (used in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe[incompatible-return] only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object'; // $FlowFixMe[incompatible-return]\n\n    return type;\n  }\n} // $FlowFixMe[incompatible-return] only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nvar REACT_CLIENT_REFERENCE$1 = Symbol.for('react.client.reference');\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || enableRenderableContext  || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_CLIENT_REFERENCE$1 || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe[cannot-write] Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe[cannot-write] Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n/**\n * Leverages native browser/VM stack frames to get proper details (e.g.\n * filename, line + col number) for a single component in a component stack. We\n * do this by:\n *   (1) throwing and catching an error in the function - this will be our\n *       control error.\n *   (2) calling the component which will eventually throw an error that we'll\n *       catch - this will be our sample error.\n *   (3) diffing the control and sample error stacks to find the stack frame\n *       which represents our component.\n */\n\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if (!fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe[incompatible-type] It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n  /**\n   * Finding a common stack frame between sample and control errors can be\n   * tricky given the different types and levels of stack trace truncation from\n   * different JS VMs. So instead we'll attempt to control what that common\n   * frame should be through this object method:\n   * Having both the sample and control errors be in the function under the\n   * `DescribeNativeComponentFrameRoot` property, + setting the `name` and\n   * `displayName` properties of the function ensures that a stack\n   * frame exists that has the method name `DescribeNativeComponentFrameRoot` in\n   * it for both control and sample stacks.\n   */\n\n\n  var RunInRootFrame = {\n    DetermineComponentFrameRoot: function () {\n      var control;\n\n      try {\n        // This should throw.\n        if (construct) {\n          // Something should be setting the props in the constructor.\n          var Fake = function () {\n            throw Error();\n          }; // $FlowFixMe[prop-missing]\n\n\n          Object.defineProperty(Fake.prototype, 'props', {\n            set: function () {\n              // We use a throwing setter instead of frozen or non-writable props\n              // because that won't throw in a non-strict mode function.\n              throw Error();\n            }\n          });\n\n          if (typeof Reflect === 'object' && Reflect.construct) {\n            // We construct a different control for this case to include any extra\n            // frames added by the construct call.\n            try {\n              Reflect.construct(Fake, []);\n            } catch (x) {\n              control = x;\n            }\n\n            Reflect.construct(fn, [], Fake);\n          } else {\n            try {\n              Fake.call();\n            } catch (x) {\n              control = x;\n            } // $FlowFixMe[prop-missing] found when upgrading Flow\n\n\n            fn.call(Fake.prototype);\n          }\n        } else {\n          try {\n            throw Error();\n          } catch (x) {\n            control = x;\n          } // TODO(luna): This will currently only throw if the function component\n          // tries to access React/ReactDOM/props. We should probably make this throw\n          // in simple components too\n\n\n          var maybePromise = fn(); // If the function component returns a promise, it's likely an async\n          // component, which we don't yet support. Attach a noop catch handler to\n          // silence the error.\n          // TODO: Implement component stacks for async client components?\n\n          if (maybePromise && typeof maybePromise.catch === 'function') {\n            maybePromise.catch(function () {});\n          }\n        }\n      } catch (sample) {\n        // This is inlined manually because closure doesn't do it for us.\n        if (sample && control && typeof sample.stack === 'string') {\n          return [sample.stack, control.stack];\n        }\n      }\n\n      return [null, null];\n    }\n  }; // $FlowFixMe[prop-missing]\n\n  RunInRootFrame.DetermineComponentFrameRoot.displayName = 'DetermineComponentFrameRoot';\n  var namePropDescriptor = Object.getOwnPropertyDescriptor(RunInRootFrame.DetermineComponentFrameRoot, 'name'); // Before ES6, the `name` property was not configurable.\n\n  if (namePropDescriptor && namePropDescriptor.configurable) {\n    // V8 utilizes a function's `name` property when generating a stack trace.\n    Object.defineProperty(RunInRootFrame.DetermineComponentFrameRoot, // Configurable properties can be updated even if its writable descriptor\n    // is set to `false`.\n    // $FlowFixMe[cannot-write]\n    'name', {\n      value: 'DetermineComponentFrameRoot'\n    });\n  }\n\n  try {\n    var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(),\n        sampleStack = _RunInRootFrame$Deter[0],\n        controlStack = _RunInRootFrame$Deter[1];\n\n    if (sampleStack && controlStack) {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sampleStack.split('\\n');\n      var controlLines = controlStack.split('\\n');\n      var s = 0;\n      var c = 0;\n\n      while (s < sampleLines.length && !sampleLines[s].includes('DetermineComponentFrameRoot')) {\n        s++;\n      }\n\n      while (c < controlLines.length && !controlLines[c].includes('DetermineComponentFrameRoot')) {\n        c++;\n      } // We couldn't find our intentionally injected common root frame, attempt\n      // to find another common root frame by search from the bottom of the\n      // control stack...\n\n\n      if (s === sampleLines.length || c === controlLines.length) {\n        s = sampleLines.length - 1;\n        c = controlLines.length - 1;\n\n        while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n          // We expect at least one stack frame to be shared.\n          // Typically this will be the root most one. However, stack frames may be\n          // cut off due to maximum stack limits. In this case, one maybe cut off\n          // earlier than the other. We assume that the sample is longer or the same\n          // and there for cut off earlier. So we should find the root most frame in\n          // the sample somewhere in the control.\n          c--;\n        }\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                if (true) {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\nvar REACT_CLIENT_REFERENCE = Symbol.for('react.client.reference');\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    {\n      var warnAboutAccessingRef = function () {\n        if (!specialPropRefWarningShown) {\n          specialPropRefWarningShown = true;\n\n          error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n        }\n      };\n\n      warnAboutAccessingRef.isReactWarning = true;\n      Object.defineProperty(props, 'ref', {\n        get: warnAboutAccessingRef,\n        configurable: true\n      });\n    }\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nfunction ReactElement(type, key, _ref, self, source, owner, props) {\n  var ref;\n\n  {\n    ref = _ref;\n  }\n\n  var element;\n\n  {\n    // In prod, `ref` is a regular property. It will be removed in a\n    // future release.\n    element = {\n      // This tag allows us to uniquely identify this as a React Element\n      $$typeof: REACT_ELEMENT_TYPE,\n      // Built-in properties that belong on the element\n      type: type,\n      key: key,\n      ref: ref,\n      props: props,\n      // Record the component responsible for creating this element.\n      _owner: owner\n    };\n  }\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // debugInfo contains Server Component debug information.\n\n    Object.defineProperty(element, '_debugInfo', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: null\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n}\nvar didWarnAboutKeySpread = {};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV$1(type, config, maybeKey, isStaticChildren, source, self) {\n  {\n    if (!isValidElementType(type)) {\n      // This is an invalid element type.\n      //\n      // We warn in this case but don't throw. We expect the element creation to\n      // succeed and there will likely be errors in render.\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    } else {\n      // This is a valid element type.\n      // Skip key warning if the type isn't valid since our key validation logic\n      // doesn't expect a non-string/function type and can throw confusing\n      // errors. We don't want exception behavior to differ between dev and\n      // prod. (Rendering will throw with a helpful message and as soon as the\n      // type is fixed, the key warnings will appear.)\n      var children = config.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    } // Warn about key spread regardless of whether the type is valid.\n\n\n    if (hasOwnProperty.call(config, 'key')) {\n      var componentName = getComponentNameFromType(type);\n      var keys = Object.keys(config).filter(function (k) {\n        return k !== 'key';\n      });\n      var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n      if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n        var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n        error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n        didWarnAboutKeySpread[componentName + beforeExample] = true;\n      }\n    }\n\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      {\n        checkKeyStringCoercion(maybeKey);\n      }\n\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      {\n        ref = config.ref;\n      }\n\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && // Skip over reserved prop names\n      propName !== 'key' && (propName !== 'ref')) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    var element = ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n\n    if (type === REACT_FRAGMENT_TYPE) {\n      validateFragmentProps(element);\n    }\n\n    return element;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner.current) {\n      var name = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object' || !node) {\n      return;\n    }\n\n    if (node.$$typeof === REACT_CLIENT_REFERENCE) ; else if (isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\n\nfunction isValidElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nvar ownerHasKeyUseWarning = {};\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement(null);\n  }\n}\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = getComponentNameFromType(parentType);\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  // TODO: Move this to render phase instead of at element creation.\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement(null);\n    }\n  }\n}\n\nvar jsxDEV = jsxDEV$1 ;\n\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsxDEV = jsxDEV;\n  })();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9uZXh0QDE0LjIuMzNfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL3JlYWN0L2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhOztBQUViLElBQUksSUFBcUM7QUFDekM7QUFDQTs7QUFFQSxZQUFZLG1CQUFPLENBQUMsa0xBQTBCOztBQUU5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7O0FBRXhEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsZUFBZTtBQUNoSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOzs7QUFHTjtBQUNBO0FBQ0EsS0FBSyxHQUFHOztBQUVSLGtEQUFrRDtBQUNsRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSw0QkFBNEI7QUFDNUI7QUFDQSxxQ0FBcUM7O0FBRXJDLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTs7QUFFQSxxRUFBcUU7O0FBRXJFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtHQUFrRzs7QUFFbEc7QUFDQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOzs7QUFHSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2QsV0FBVyxHQUFHO0FBQ2QsV0FBVyxHQUFHO0FBQ2QsV0FBVyxlQUFlO0FBQzFCLFdBQVcsR0FBRztBQUNkLFdBQVcsR0FBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2Q7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsaUJBQWlCO0FBQ3JDOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxnQkFBZ0I7QUFDaEIsY0FBYztBQUNkLEdBQUc7QUFDSCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjMzX3JlYWN0LWRvbUAxOC4zLjFfcmVhY3RAMTguMy4xX19yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jb21waWxlZC9yZWFjdC9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLmRldmVsb3BtZW50LmpzPzI3OTciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QtanN4LWRldi1ydW50aW1lLmRldmVsb3BtZW50LmpzXG4gKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKFwibmV4dC9kaXN0L2NvbXBpbGVkL3JlYWN0XCIpO1xuXG4vLyBBVFRFTlRJT05cbi8vIFdoZW4gYWRkaW5nIG5ldyBzeW1ib2xzIHRvIHRoaXMgZmlsZSxcbi8vIFBsZWFzZSBjb25zaWRlciBhbHNvIGFkZGluZyB0byAncmVhY3QtZGV2dG9vbHMtc2hhcmVkL3NyYy9iYWNrZW5kL1JlYWN0U3ltYm9scydcbi8vIFRoZSBTeW1ib2wgdXNlZCB0byB0YWcgdGhlIFJlYWN0RWxlbWVudC1saWtlIHR5cGVzLlxudmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0LmVsZW1lbnQnKTtcbnZhciBSRUFDVF9QT1JUQUxfVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0LnBvcnRhbCcpO1xudmFyIFJFQUNUX0ZSQUdNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5mcmFnbWVudCcpO1xudmFyIFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5zdHJpY3RfbW9kZScpO1xudmFyIFJFQUNUX1BST0ZJTEVSX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5wcm9maWxlcicpO1xudmFyIFJFQUNUX1BST1ZJREVSX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5wcm92aWRlcicpOyAvLyBUT0RPOiBEZWxldGUgd2l0aCBlbmFibGVSZW5kZXJhYmxlQ29udGV4dFxuXG52YXIgUkVBQ1RfQ09OU1VNRVJfVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0LmNvbnN1bWVyJyk7XG52YXIgUkVBQ1RfQ09OVEVYVF9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QuY29udGV4dCcpO1xudmFyIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5mb3J3YXJkX3JlZicpO1xudmFyIFJFQUNUX1NVU1BFTlNFX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5zdXNwZW5zZScpO1xudmFyIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0LnN1c3BlbnNlX2xpc3QnKTtcbnZhciBSRUFDVF9NRU1PX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5tZW1vJyk7XG52YXIgUkVBQ1RfTEFaWV9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QubGF6eScpO1xudmFyIFJFQUNUX09GRlNDUkVFTl9UWVBFID0gU3ltYm9sLmZvcigncmVhY3Qub2Zmc2NyZWVuJyk7XG52YXIgUkVBQ1RfQ0FDSEVfVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0LmNhY2hlJyk7XG52YXIgTUFZQkVfSVRFUkFUT1JfU1lNQk9MID0gU3ltYm9sLml0ZXJhdG9yO1xudmFyIEZBVVhfSVRFUkFUT1JfU1lNQk9MID0gJ0BAaXRlcmF0b3InO1xuZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKSB7XG4gIGlmIChtYXliZUl0ZXJhYmxlID09PSBudWxsIHx8IHR5cGVvZiBtYXliZUl0ZXJhYmxlICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIG1heWJlSXRlcmF0b3IgPSBNQVlCRV9JVEVSQVRPUl9TWU1CT0wgJiYgbWF5YmVJdGVyYWJsZVtNQVlCRV9JVEVSQVRPUl9TWU1CT0xdIHx8IG1heWJlSXRlcmFibGVbRkFVWF9JVEVSQVRPUl9TWU1CT0xdO1xuXG4gIGlmICh0eXBlb2YgbWF5YmVJdGVyYXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBtYXliZUl0ZXJhdG9yO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbnZhciBSZWFjdFNoYXJlZEludGVybmFscyA9IFJlYWN0Ll9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEO1xuXG5mdW5jdGlvbiBlcnJvcihmb3JtYXQpIHtcbiAge1xuICAgIHtcbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIHByaW50V2FybmluZygnZXJyb3InLCBmb3JtYXQsIGFyZ3MpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwcmludFdhcm5pbmcobGV2ZWwsIGZvcm1hdCwgYXJncykge1xuICAvLyBXaGVuIGNoYW5naW5nIHRoaXMgbG9naWMsIHlvdSBtaWdodCB3YW50IHRvIGFsc29cbiAgLy8gdXBkYXRlIGNvbnNvbGVXaXRoU3RhY2tEZXYud3d3LmpzIGFzIHdlbGwuXG4gIHtcbiAgICB2YXIgUmVhY3REZWJ1Z0N1cnJlbnRGcmFtZSA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlJlYWN0RGVidWdDdXJyZW50RnJhbWU7XG4gICAgdmFyIHN0YWNrID0gUmVhY3REZWJ1Z0N1cnJlbnRGcmFtZS5nZXRTdGFja0FkZGVuZHVtKCk7XG5cbiAgICBpZiAoc3RhY2sgIT09ICcnKSB7XG4gICAgICBmb3JtYXQgKz0gJyVzJztcbiAgICAgIGFyZ3MgPSBhcmdzLmNvbmNhdChbc3RhY2tdKTtcbiAgICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1pbnRlcm5hbC9zYWZlLXN0cmluZy1jb2VyY2lvblxuXG5cbiAgICB2YXIgYXJnc1dpdGhGb3JtYXQgPSBhcmdzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIFN0cmluZyhpdGVtKTtcbiAgICB9KTsgLy8gQ2FyZWZ1bDogUk4gY3VycmVudGx5IGRlcGVuZHMgb24gdGhpcyBwcmVmaXhcblxuICAgIGFyZ3NXaXRoRm9ybWF0LnVuc2hpZnQoJ1dhcm5pbmc6ICcgKyBmb3JtYXQpOyAvLyBXZSBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBzcHJlYWQgKG9yIC5hcHBseSkgZGlyZWN0bHkgYmVjYXVzZSBpdFxuICAgIC8vIGJyZWFrcyBJRTk6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMTM2MTBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaW50ZXJuYWwvbm8tcHJvZHVjdGlvbi1sb2dnaW5nXG5cbiAgICBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjb25zb2xlW2xldmVsXSwgY29uc29sZSwgYXJnc1dpdGhGb3JtYXQpO1xuICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbnZhciBlbmFibGVTY29wZUFQSSA9IGZhbHNlOyAvLyBFeHBlcmltZW50YWwgQ3JlYXRlIEV2ZW50IEhhbmRsZSBBUEkuXG52YXIgZW5hYmxlQ2FjaGVFbGVtZW50ID0gZmFsc2U7XG52YXIgZW5hYmxlVHJhbnNpdGlvblRyYWNpbmcgPSBmYWxzZTsgLy8gTm8ga25vd24gYnVncywgYnV0IG5lZWRzIHBlcmZvcm1hbmNlIHRlc3RpbmdcblxudmFyIGVuYWJsZUxlZ2FjeUhpZGRlbiA9IGZhbHNlOyAvLyBFbmFibGVzIHVuc3RhYmxlX2F2b2lkVGhpc0ZhbGxiYWNrIGZlYXR1cmUgaW4gRmliZXJcbnZhciBlbmFibGVSZW5kZXJhYmxlQ29udGV4dCA9IGZhbHNlO1xuLy8gc3R1ZmYuIEludGVuZGVkIHRvIGVuYWJsZSBSZWFjdCBjb3JlIG1lbWJlcnMgdG8gbW9yZSBlYXNpbHkgZGVidWcgc2NoZWR1bGluZ1xuLy8gaXNzdWVzIGluIERFViBidWlsZHMuXG5cbnZhciBlbmFibGVEZWJ1Z1RyYWNpbmcgPSBmYWxzZTtcblxuZnVuY3Rpb24gZ2V0V3JhcHBlZE5hbWUob3V0ZXJUeXBlLCBpbm5lclR5cGUsIHdyYXBwZXJOYW1lKSB7XG4gIHZhciBkaXNwbGF5TmFtZSA9IG91dGVyVHlwZS5kaXNwbGF5TmFtZTtcblxuICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICByZXR1cm4gZGlzcGxheU5hbWU7XG4gIH1cblxuICB2YXIgZnVuY3Rpb25OYW1lID0gaW5uZXJUeXBlLmRpc3BsYXlOYW1lIHx8IGlubmVyVHlwZS5uYW1lIHx8ICcnO1xuICByZXR1cm4gZnVuY3Rpb25OYW1lICE9PSAnJyA/IHdyYXBwZXJOYW1lICsgXCIoXCIgKyBmdW5jdGlvbk5hbWUgKyBcIilcIiA6IHdyYXBwZXJOYW1lO1xufSAvLyBLZWVwIGluIHN5bmMgd2l0aCByZWFjdC1yZWNvbmNpbGVyL2dldENvbXBvbmVudE5hbWVGcm9tRmliZXJcblxuXG5mdW5jdGlvbiBnZXRDb250ZXh0TmFtZSh0eXBlKSB7XG4gIHJldHVybiB0eXBlLmRpc3BsYXlOYW1lIHx8ICdDb250ZXh0Jztcbn1cblxudmFyIFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UkMiA9IFN5bWJvbC5mb3IoJ3JlYWN0LmNsaWVudC5yZWZlcmVuY2UnKTsgLy8gTm90ZSB0aGF0IHRoZSByZWNvbmNpbGVyIHBhY2thZ2Ugc2hvdWxkIGdlbmVyYWxseSBwcmVmZXIgdG8gdXNlIGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIoKSBpbnN0ZWFkLlxuXG5mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZSkge1xuICBpZiAodHlwZSA9PSBudWxsKSB7XG4gICAgLy8gSG9zdCByb290LCB0ZXh0IG5vZGUgb3IganVzdCBpbnZhbGlkIHR5cGUuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAodHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAodHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSQyKSB7XG4gICAgICAvLyBUT0RPOiBDcmVhdGUgYSBjb252ZW50aW9uIGZvciBuYW1pbmcgY2xpZW50IHJlZmVyZW5jZXMgd2l0aCBkZWJ1ZyBpbmZvLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHR5cGUuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IG51bGw7XG4gIH1cblxuICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFJFQUNUX0ZSQUdNRU5UX1RZUEU6XG4gICAgICByZXR1cm4gJ0ZyYWdtZW50JztcblxuICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6XG4gICAgICByZXR1cm4gJ1BvcnRhbCc7XG5cbiAgICBjYXNlIFJFQUNUX1BST0ZJTEVSX1RZUEU6XG4gICAgICByZXR1cm4gJ1Byb2ZpbGVyJztcblxuICAgIGNhc2UgUkVBQ1RfU1RSSUNUX01PREVfVFlQRTpcbiAgICAgIHJldHVybiAnU3RyaWN0TW9kZSc7XG5cbiAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX1RZUEU6XG4gICAgICByZXR1cm4gJ1N1c3BlbnNlJztcblxuICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFOlxuICAgICAgcmV0dXJuICdTdXNwZW5zZUxpc3QnO1xuXG4gICAgY2FzZSBSRUFDVF9DQUNIRV9UWVBFOlxuICAgICAge1xuICAgICAgICByZXR1cm4gJ0NhY2hlJztcbiAgICAgIH1cblxuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgIHtcbiAgICAgIGlmICh0eXBlb2YgdHlwZS50YWcgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGVycm9yKCdSZWNlaXZlZCBhbiB1bmV4cGVjdGVkIG9iamVjdCBpbiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoKS4gJyArICdUaGlzIGlzIGxpa2VseSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlLiQkdHlwZW9mKSB7XG4gICAgICBjYXNlIFJFQUNUX1BST1ZJREVSX1RZUEU6XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgcHJvdmlkZXIgPSB0eXBlO1xuICAgICAgICAgIHJldHVybiBnZXRDb250ZXh0TmFtZShwcm92aWRlci5fY29udGV4dCkgKyAnLlByb3ZpZGVyJztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFJFQUNUX0NPTlRFWFRfVFlQRTpcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0eXBlO1xuXG4gICAgICAgIHtcbiAgICAgICAgICByZXR1cm4gZ2V0Q29udGV4dE5hbWUoY29udGV4dCkgKyAnLkNvbnN1bWVyJztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFJFQUNUX0NPTlNVTUVSX1RZUEU6XG4gICAgICAgIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6XG4gICAgICAgIHJldHVybiBnZXRXcmFwcGVkTmFtZSh0eXBlLCB0eXBlLnJlbmRlciwgJ0ZvcndhcmRSZWYnKTtcblxuICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6XG4gICAgICAgIHZhciBvdXRlck5hbWUgPSB0eXBlLmRpc3BsYXlOYW1lIHx8IG51bGw7XG5cbiAgICAgICAgaWYgKG91dGVyTmFtZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBvdXRlck5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUudHlwZSkgfHwgJ01lbW8nO1xuXG4gICAgICBjYXNlIFJFQUNUX0xBWllfVFlQRTpcbiAgICAgICAge1xuICAgICAgICAgIHZhciBsYXp5Q29tcG9uZW50ID0gdHlwZTtcbiAgICAgICAgICB2YXIgcGF5bG9hZCA9IGxhenlDb21wb25lbnQuX3BheWxvYWQ7XG4gICAgICAgICAgdmFyIGluaXQgPSBsYXp5Q29tcG9uZW50Ll9pbml0O1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoaW5pdChwYXlsb2FkKSk7XG4gICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vICRGbG93Rml4TWVbbWV0aG9kLXVuYmluZGluZ11cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xuXG4vKlxuICogVGhlIGAnJyArIHZhbHVlYCBwYXR0ZXJuICh1c2VkIGluIHBlcmYtc2Vuc2l0aXZlIGNvZGUpIHRocm93cyBmb3IgU3ltYm9sXG4gKiBhbmQgVGVtcG9yYWwuKiB0eXBlcy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9wdWxsLzIyMDY0LlxuICpcbiAqIFRoZSBmdW5jdGlvbnMgaW4gdGhpcyBtb2R1bGUgd2lsbCB0aHJvdyBhbiBlYXNpZXItdG8tdW5kZXJzdGFuZCxcbiAqIGVhc2llci10by1kZWJ1ZyBleGNlcHRpb24gd2l0aCBhIGNsZWFyIGVycm9ycyBtZXNzYWdlIG1lc3NhZ2UgZXhwbGFpbmluZyB0aGVcbiAqIHByb2JsZW0uIChJbnN0ZWFkIG9mIGEgY29uZnVzaW5nIGV4Y2VwdGlvbiB0aHJvd24gaW5zaWRlIHRoZSBpbXBsZW1lbnRhdGlvblxuICogb2YgdGhlIGB2YWx1ZWAgb2JqZWN0KS5cbiAqL1xuLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXSBvbmx5IGNhbGxlZCBpbiBERVYsIHNvIHZvaWQgcmV0dXJuIGlzIG5vdCBwb3NzaWJsZS5cbmZ1bmN0aW9uIHR5cGVOYW1lKHZhbHVlKSB7XG4gIHtcbiAgICAvLyB0b1N0cmluZ1RhZyBpcyBuZWVkZWQgZm9yIG5hbWVzcGFjZWQgdHlwZXMgbGlrZSBUZW1wb3JhbC5JbnN0YW50XG4gICAgdmFyIGhhc1RvU3RyaW5nVGFnID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wudG9TdHJpbmdUYWc7XG4gICAgdmFyIHR5cGUgPSBoYXNUb1N0cmluZ1RhZyAmJiB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddIHx8IHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgfHwgJ09iamVjdCc7IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl1cblxuICAgIHJldHVybiB0eXBlO1xuICB9XG59IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl0gb25seSBjYWxsZWQgaW4gREVWLCBzbyB2b2lkIHJldHVybiBpcyBub3QgcG9zc2libGUuXG5cblxuZnVuY3Rpb24gd2lsbENvZXJjaW9uVGhyb3codmFsdWUpIHtcbiAge1xuICAgIHRyeSB7XG4gICAgICB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpIHtcbiAgLy8gSWYgeW91IGVuZGVkIHVwIGhlcmUgYnkgZm9sbG93aW5nIGFuIGV4Y2VwdGlvbiBjYWxsIHN0YWNrLCBoZXJlJ3Mgd2hhdCdzXG4gIC8vIGhhcHBlbmVkOiB5b3Ugc3VwcGxpZWQgYW4gb2JqZWN0IG9yIHN5bWJvbCB2YWx1ZSB0byBSZWFjdCAoYXMgYSBwcm9wLCBrZXksXG4gIC8vIERPTSBhdHRyaWJ1dGUsIENTUyBwcm9wZXJ0eSwgc3RyaW5nIHJlZiwgZXRjLikgYW5kIHdoZW4gUmVhY3QgdHJpZWQgdG9cbiAgLy8gY29lcmNlIGl0IHRvIGEgc3RyaW5nIHVzaW5nIGAnJyArIHZhbHVlYCwgYW4gZXhjZXB0aW9uIHdhcyB0aHJvd24uXG4gIC8vXG4gIC8vIFRoZSBtb3N0IGNvbW1vbiB0eXBlcyB0aGF0IHdpbGwgY2F1c2UgdGhpcyBleGNlcHRpb24gYXJlIGBTeW1ib2xgIGluc3RhbmNlc1xuICAvLyBhbmQgVGVtcG9yYWwgb2JqZWN0cyBsaWtlIGBUZW1wb3JhbC5JbnN0YW50YC4gQnV0IGFueSBvYmplY3QgdGhhdCBoYXMgYVxuICAvLyBgdmFsdWVPZmAgb3IgYFtTeW1ib2wudG9QcmltaXRpdmVdYCBtZXRob2QgdGhhdCB0aHJvd3Mgd2lsbCBhbHNvIGNhdXNlIHRoaXNcbiAgLy8gZXhjZXB0aW9uLiAoTGlicmFyeSBhdXRob3JzIGRvIHRoaXMgdG8gcHJldmVudCB1c2VycyBmcm9tIHVzaW5nIGJ1aWx0LWluXG4gIC8vIG51bWVyaWMgb3BlcmF0b3JzIGxpa2UgYCtgIG9yIGNvbXBhcmlzb24gb3BlcmF0b3JzIGxpa2UgYD49YCBiZWNhdXNlIGN1c3RvbVxuICAvLyBtZXRob2RzIGFyZSBuZWVkZWQgdG8gcGVyZm9ybSBhY2N1cmF0ZSBhcml0aG1ldGljIG9yIGNvbXBhcmlzb24uKVxuICAvL1xuICAvLyBUbyBmaXggdGhlIHByb2JsZW0sIGNvZXJjZSB0aGlzIG9iamVjdCBvciBzeW1ib2wgdmFsdWUgdG8gYSBzdHJpbmcgYmVmb3JlXG4gIC8vIHBhc3NpbmcgaXQgdG8gUmVhY3QuIFRoZSBtb3N0IHJlbGlhYmxlIHdheSBpcyB1c3VhbGx5IGBTdHJpbmcodmFsdWUpYC5cbiAgLy9cbiAgLy8gVG8gZmluZCB3aGljaCB2YWx1ZSBpcyB0aHJvd2luZywgY2hlY2sgdGhlIGJyb3dzZXIgb3IgZGVidWdnZXIgY29uc29sZS5cbiAgLy8gQmVmb3JlIHRoaXMgZXhjZXB0aW9uIHdhcyB0aHJvd24sIHRoZXJlIHNob3VsZCBiZSBgY29uc29sZS5lcnJvcmAgb3V0cHV0XG4gIC8vIHRoYXQgc2hvd3MgdGhlIHR5cGUgKFN5bWJvbCwgVGVtcG9yYWwuUGxhaW5EYXRlLCBldGMuKSB0aGF0IGNhdXNlZCB0aGVcbiAgLy8gcHJvYmxlbSBhbmQgaG93IHRoYXQgdHlwZSB3YXMgdXNlZDoga2V5LCBhdHJyaWJ1dGUsIGlucHV0IHZhbHVlIHByb3AsIGV0Yy5cbiAgLy8gSW4gbW9zdCBjYXNlcywgdGhpcyBjb25zb2xlIG91dHB1dCBhbHNvIHNob3dzIHRoZSBjb21wb25lbnQgYW5kIGl0c1xuICAvLyBhbmNlc3RvciBjb21wb25lbnRzIHdoZXJlIHRoZSBleGNlcHRpb24gaGFwcGVuZWQuXG4gIC8vXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1pbnRlcm5hbC9zYWZlLXN0cmluZy1jb2VyY2lvblxuICByZXR1cm4gJycgKyB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGNoZWNrS2V5U3RyaW5nQ29lcmNpb24odmFsdWUpIHtcbiAge1xuICAgIGlmICh3aWxsQ29lcmNpb25UaHJvdyh2YWx1ZSkpIHtcbiAgICAgIGVycm9yKCdUaGUgcHJvdmlkZWQga2V5IGlzIGFuIHVuc3VwcG9ydGVkIHR5cGUgJXMuJyArICcgVGhpcyB2YWx1ZSBtdXN0IGJlIGNvZXJjZWQgdG8gYSBzdHJpbmcgYmVmb3JlIHVzaW5nIGl0IGhlcmUuJywgdHlwZU5hbWUodmFsdWUpKTtcblxuICAgICAgcmV0dXJuIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSk7IC8vIHRocm93ICh0byBoZWxwIGNhbGxlcnMgZmluZCB0cm91Ymxlc2hvb3RpbmcgY29tbWVudHMpXG4gICAgfVxuICB9XG59XG5cbnZhciBSRUFDVF9DTElFTlRfUkVGRVJFTkNFJDEgPSBTeW1ib2wuZm9yKCdyZWFjdC5jbGllbnQucmVmZXJlbmNlJyk7XG5mdW5jdGlvbiBpc1ZhbGlkRWxlbWVudFR5cGUodHlwZSkge1xuICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gLy8gTm90ZTogdHlwZW9mIG1pZ2h0IGJlIG90aGVyIHRoYW4gJ3N5bWJvbCcgb3IgJ251bWJlcicgKGUuZy4gaWYgaXQncyBhIHBvbHlmaWxsKS5cblxuXG4gIGlmICh0eXBlID09PSBSRUFDVF9GUkFHTUVOVF9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1BST0ZJTEVSX1RZUEUgfHwgZW5hYmxlRGVidWdUcmFjaW5nICB8fCB0eXBlID09PSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1NVU1BFTlNFX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFIHx8IGVuYWJsZUxlZ2FjeUhpZGRlbiAgfHwgdHlwZSA9PT0gUkVBQ1RfT0ZGU0NSRUVOX1RZUEUgfHwgZW5hYmxlU2NvcGVBUEkgIHx8IGVuYWJsZUNhY2hlRWxlbWVudCAgfHwgZW5hYmxlVHJhbnNpdGlvblRyYWNpbmcgKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAodHlwZW9mIHR5cGUgPT09ICdvYmplY3QnICYmIHR5cGUgIT09IG51bGwpIHtcbiAgICBpZiAodHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX01FTU9fVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9DT05URVhUX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfUFJPVklERVJfVFlQRSB8fCBlbmFibGVSZW5kZXJhYmxlQ29udGV4dCAgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSB8fCAvLyBUaGlzIG5lZWRzIHRvIGluY2x1ZGUgYWxsIHBvc3NpYmxlIG1vZHVsZSByZWZlcmVuY2Ugb2JqZWN0XG4gICAgLy8gdHlwZXMgc3VwcG9ydGVkIGJ5IGFueSBGbGlnaHQgY29uZmlndXJhdGlvbiBhbnl3aGVyZSBzaW5jZVxuICAgIC8vIHdlIGRvbid0IGtub3cgd2hpY2ggRmxpZ2h0IGJ1aWxkIHRoaXMgd2lsbCBlbmQgdXAgYmVpbmcgdXNlZFxuICAgIC8vIHdpdGguXG4gICAgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSQxIHx8IHR5cGUuZ2V0TW9kdWxlSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgaXNBcnJheUltcGwgPSBBcnJheS5pc0FycmF5OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5cbmZ1bmN0aW9uIGlzQXJyYXkoYSkge1xuICByZXR1cm4gaXNBcnJheUltcGwoYSk7XG59XG5cbi8vIEhlbHBlcnMgdG8gcGF0Y2ggY29uc29sZS5sb2dzIHRvIGF2b2lkIGxvZ2dpbmcgZHVyaW5nIHNpZGUtZWZmZWN0IGZyZWVcbi8vIHJlcGxheWluZyBvbiByZW5kZXIgZnVuY3Rpb24uIFRoaXMgY3VycmVudGx5IG9ubHkgcGF0Y2hlcyB0aGUgb2JqZWN0XG4vLyBsYXppbHkgd2hpY2ggd29uJ3QgY292ZXIgaWYgdGhlIGxvZyBmdW5jdGlvbiB3YXMgZXh0cmFjdGVkIGVhZ2VybHkuXG4vLyBXZSBjb3VsZCBhbHNvIGVhZ2VybHkgcGF0Y2ggdGhlIG1ldGhvZC5cbnZhciBkaXNhYmxlZERlcHRoID0gMDtcbnZhciBwcmV2TG9nO1xudmFyIHByZXZJbmZvO1xudmFyIHByZXZXYXJuO1xudmFyIHByZXZFcnJvcjtcbnZhciBwcmV2R3JvdXA7XG52YXIgcHJldkdyb3VwQ29sbGFwc2VkO1xudmFyIHByZXZHcm91cEVuZDtcblxuZnVuY3Rpb24gZGlzYWJsZWRMb2coKSB7fVxuXG5kaXNhYmxlZExvZy5fX3JlYWN0RGlzYWJsZWRMb2cgPSB0cnVlO1xuZnVuY3Rpb24gZGlzYWJsZUxvZ3MoKSB7XG4gIHtcbiAgICBpZiAoZGlzYWJsZWREZXB0aCA9PT0gMCkge1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgcmVhY3QtaW50ZXJuYWwvbm8tcHJvZHVjdGlvbi1sb2dnaW5nICovXG4gICAgICBwcmV2TG9nID0gY29uc29sZS5sb2c7XG4gICAgICBwcmV2SW5mbyA9IGNvbnNvbGUuaW5mbztcbiAgICAgIHByZXZXYXJuID0gY29uc29sZS53YXJuO1xuICAgICAgcHJldkVycm9yID0gY29uc29sZS5lcnJvcjtcbiAgICAgIHByZXZHcm91cCA9IGNvbnNvbGUuZ3JvdXA7XG4gICAgICBwcmV2R3JvdXBDb2xsYXBzZWQgPSBjb25zb2xlLmdyb3VwQ29sbGFwc2VkO1xuICAgICAgcHJldkdyb3VwRW5kID0gY29uc29sZS5ncm91cEVuZDsgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8xOTA5OVxuXG4gICAgICB2YXIgcHJvcHMgPSB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IGRpc2FibGVkTG9nLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgfTsgLy8gJEZsb3dGaXhNZVtjYW5ub3Qtd3JpdGVdIEZsb3cgdGhpbmtzIGNvbnNvbGUgaXMgaW1tdXRhYmxlLlxuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjb25zb2xlLCB7XG4gICAgICAgIGluZm86IHByb3BzLFxuICAgICAgICBsb2c6IHByb3BzLFxuICAgICAgICB3YXJuOiBwcm9wcyxcbiAgICAgICAgZXJyb3I6IHByb3BzLFxuICAgICAgICBncm91cDogcHJvcHMsXG4gICAgICAgIGdyb3VwQ29sbGFwc2VkOiBwcm9wcyxcbiAgICAgICAgZ3JvdXBFbmQ6IHByb3BzXG4gICAgICB9KTtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgcmVhY3QtaW50ZXJuYWwvbm8tcHJvZHVjdGlvbi1sb2dnaW5nICovXG4gICAgfVxuXG4gICAgZGlzYWJsZWREZXB0aCsrO1xuICB9XG59XG5mdW5jdGlvbiByZWVuYWJsZUxvZ3MoKSB7XG4gIHtcbiAgICBkaXNhYmxlZERlcHRoLS07XG5cbiAgICBpZiAoZGlzYWJsZWREZXB0aCA9PT0gMCkge1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgcmVhY3QtaW50ZXJuYWwvbm8tcHJvZHVjdGlvbi1sb2dnaW5nICovXG4gICAgICB2YXIgcHJvcHMgPSB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH07IC8vICRGbG93Rml4TWVbY2Fubm90LXdyaXRlXSBGbG93IHRoaW5rcyBjb25zb2xlIGlzIGltbXV0YWJsZS5cblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY29uc29sZSwge1xuICAgICAgICBsb2c6IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgICAgICB2YWx1ZTogcHJldkxvZ1xuICAgICAgICB9KSxcbiAgICAgICAgaW5mbzogYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgICAgIHZhbHVlOiBwcmV2SW5mb1xuICAgICAgICB9KSxcbiAgICAgICAgd2FybjogYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgICAgIHZhbHVlOiBwcmV2V2FyblxuICAgICAgICB9KSxcbiAgICAgICAgZXJyb3I6IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgICAgICB2YWx1ZTogcHJldkVycm9yXG4gICAgICAgIH0pLFxuICAgICAgICBncm91cDogYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgICAgIHZhbHVlOiBwcmV2R3JvdXBcbiAgICAgICAgfSksXG4gICAgICAgIGdyb3VwQ29sbGFwc2VkOiBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICAgICAgdmFsdWU6IHByZXZHcm91cENvbGxhcHNlZFxuICAgICAgICB9KSxcbiAgICAgICAgZ3JvdXBFbmQ6IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgICAgICB2YWx1ZTogcHJldkdyb3VwRW5kXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgcmVhY3QtaW50ZXJuYWwvbm8tcHJvZHVjdGlvbi1sb2dnaW5nICovXG4gICAgfVxuXG4gICAgaWYgKGRpc2FibGVkRGVwdGggPCAwKSB7XG4gICAgICBlcnJvcignZGlzYWJsZWREZXB0aCBmZWxsIGJlbG93IHplcm8uICcgKyAnVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuJyk7XG4gICAgfVxuICB9XG59XG5cbnZhciBSZWFjdEN1cnJlbnREaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuUmVhY3RDdXJyZW50RGlzcGF0Y2hlcjtcbnZhciBwcmVmaXg7XG5mdW5jdGlvbiBkZXNjcmliZUJ1aWx0SW5Db21wb25lbnRGcmFtZShuYW1lLCBvd25lckZuKSB7XG4gIHtcbiAgICBpZiAocHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEV4dHJhY3QgdGhlIFZNIHNwZWNpZmljIHByZWZpeCB1c2VkIGJ5IGVhY2ggbGluZS5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRocm93IEVycm9yKCk7XG4gICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgIHZhciBtYXRjaCA9IHguc3RhY2sudHJpbSgpLm1hdGNoKC9cXG4oICooYXQgKT8pLyk7XG4gICAgICAgIHByZWZpeCA9IG1hdGNoICYmIG1hdGNoWzFdIHx8ICcnO1xuICAgICAgfVxuICAgIH0gLy8gV2UgdXNlIHRoZSBwcmVmaXggdG8gZW5zdXJlIG91ciBzdGFja3MgbGluZSB1cCB3aXRoIG5hdGl2ZSBzdGFjayBmcmFtZXMuXG5cblxuICAgIHJldHVybiAnXFxuJyArIHByZWZpeCArIG5hbWU7XG4gIH1cbn1cbnZhciByZWVudHJ5ID0gZmFsc2U7XG52YXIgY29tcG9uZW50RnJhbWVDYWNoZTtcblxue1xuICB2YXIgUG9zc2libHlXZWFrTWFwID0gdHlwZW9mIFdlYWtNYXAgPT09ICdmdW5jdGlvbicgPyBXZWFrTWFwIDogTWFwO1xuICBjb21wb25lbnRGcmFtZUNhY2hlID0gbmV3IFBvc3NpYmx5V2Vha01hcCgpO1xufVxuLyoqXG4gKiBMZXZlcmFnZXMgbmF0aXZlIGJyb3dzZXIvVk0gc3RhY2sgZnJhbWVzIHRvIGdldCBwcm9wZXIgZGV0YWlscyAoZS5nLlxuICogZmlsZW5hbWUsIGxpbmUgKyBjb2wgbnVtYmVyKSBmb3IgYSBzaW5nbGUgY29tcG9uZW50IGluIGEgY29tcG9uZW50IHN0YWNrLiBXZVxuICogZG8gdGhpcyBieTpcbiAqICAgKDEpIHRocm93aW5nIGFuZCBjYXRjaGluZyBhbiBlcnJvciBpbiB0aGUgZnVuY3Rpb24gLSB0aGlzIHdpbGwgYmUgb3VyXG4gKiAgICAgICBjb250cm9sIGVycm9yLlxuICogICAoMikgY2FsbGluZyB0aGUgY29tcG9uZW50IHdoaWNoIHdpbGwgZXZlbnR1YWxseSB0aHJvdyBhbiBlcnJvciB0aGF0IHdlJ2xsXG4gKiAgICAgICBjYXRjaCAtIHRoaXMgd2lsbCBiZSBvdXIgc2FtcGxlIGVycm9yLlxuICogICAoMykgZGlmZmluZyB0aGUgY29udHJvbCBhbmQgc2FtcGxlIGVycm9yIHN0YWNrcyB0byBmaW5kIHRoZSBzdGFjayBmcmFtZVxuICogICAgICAgd2hpY2ggcmVwcmVzZW50cyBvdXIgY29tcG9uZW50LlxuICovXG5cblxuZnVuY3Rpb24gZGVzY3JpYmVOYXRpdmVDb21wb25lbnRGcmFtZShmbiwgY29uc3RydWN0KSB7XG4gIC8vIElmIHNvbWV0aGluZyBhc2tlZCBmb3IgYSBzdGFjayBpbnNpZGUgYSBmYWtlIHJlbmRlciwgaXQgc2hvdWxkIGdldCBpZ25vcmVkLlxuICBpZiAoIWZuIHx8IHJlZW50cnkpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICB7XG4gICAgdmFyIGZyYW1lID0gY29tcG9uZW50RnJhbWVDYWNoZS5nZXQoZm4pO1xuXG4gICAgaWYgKGZyYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmcmFtZTtcbiAgICB9XG4gIH1cblxuICByZWVudHJ5ID0gdHJ1ZTtcbiAgdmFyIHByZXZpb3VzUHJlcGFyZVN0YWNrVHJhY2UgPSBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZTsgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZV0gSXQgZG9lcyBhY2NlcHQgdW5kZWZpbmVkLlxuXG4gIEVycm9yLnByZXBhcmVTdGFja1RyYWNlID0gdW5kZWZpbmVkO1xuICB2YXIgcHJldmlvdXNEaXNwYXRjaGVyO1xuXG4gIHtcbiAgICBwcmV2aW91c0Rpc3BhdGNoZXIgPSBSZWFjdEN1cnJlbnREaXNwYXRjaGVyLmN1cnJlbnQ7IC8vIFNldCB0aGUgZGlzcGF0Y2hlciBpbiBERVYgYmVjYXVzZSB0aGlzIG1pZ2h0IGJlIGNhbGwgaW4gdGhlIHJlbmRlciBmdW5jdGlvblxuICAgIC8vIGZvciB3YXJuaW5ncy5cblxuICAgIFJlYWN0Q3VycmVudERpc3BhdGNoZXIuY3VycmVudCA9IG51bGw7XG4gICAgZGlzYWJsZUxvZ3MoKTtcbiAgfVxuICAvKipcbiAgICogRmluZGluZyBhIGNvbW1vbiBzdGFjayBmcmFtZSBiZXR3ZWVuIHNhbXBsZSBhbmQgY29udHJvbCBlcnJvcnMgY2FuIGJlXG4gICAqIHRyaWNreSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzIGFuZCBsZXZlbHMgb2Ygc3RhY2sgdHJhY2UgdHJ1bmNhdGlvbiBmcm9tXG4gICAqIGRpZmZlcmVudCBKUyBWTXMuIFNvIGluc3RlYWQgd2UnbGwgYXR0ZW1wdCB0byBjb250cm9sIHdoYXQgdGhhdCBjb21tb25cbiAgICogZnJhbWUgc2hvdWxkIGJlIHRocm91Z2ggdGhpcyBvYmplY3QgbWV0aG9kOlxuICAgKiBIYXZpbmcgYm90aCB0aGUgc2FtcGxlIGFuZCBjb250cm9sIGVycm9ycyBiZSBpbiB0aGUgZnVuY3Rpb24gdW5kZXIgdGhlXG4gICAqIGBEZXNjcmliZU5hdGl2ZUNvbXBvbmVudEZyYW1lUm9vdGAgcHJvcGVydHksICsgc2V0dGluZyB0aGUgYG5hbWVgIGFuZFxuICAgKiBgZGlzcGxheU5hbWVgIHByb3BlcnRpZXMgb2YgdGhlIGZ1bmN0aW9uIGVuc3VyZXMgdGhhdCBhIHN0YWNrXG4gICAqIGZyYW1lIGV4aXN0cyB0aGF0IGhhcyB0aGUgbWV0aG9kIG5hbWUgYERlc2NyaWJlTmF0aXZlQ29tcG9uZW50RnJhbWVSb290YCBpblxuICAgKiBpdCBmb3IgYm90aCBjb250cm9sIGFuZCBzYW1wbGUgc3RhY2tzLlxuICAgKi9cblxuXG4gIHZhciBSdW5JblJvb3RGcmFtZSA9IHtcbiAgICBEZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb250cm9sO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIHNob3VsZCB0aHJvdy5cbiAgICAgICAgaWYgKGNvbnN0cnVjdCkge1xuICAgICAgICAgIC8vIFNvbWV0aGluZyBzaG91bGQgYmUgc2V0dGluZyB0aGUgcHJvcHMgaW4gdGhlIGNvbnN0cnVjdG9yLlxuICAgICAgICAgIHZhciBGYWtlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcbiAgICAgICAgICB9OyAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cblxuXG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZha2UucHJvdG90eXBlLCAncHJvcHMnLCB7XG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgLy8gV2UgdXNlIGEgdGhyb3dpbmcgc2V0dGVyIGluc3RlYWQgb2YgZnJvemVuIG9yIG5vbi13cml0YWJsZSBwcm9wc1xuICAgICAgICAgICAgICAvLyBiZWNhdXNlIHRoYXQgd29uJ3QgdGhyb3cgaW4gYSBub24tc3RyaWN0IG1vZGUgZnVuY3Rpb24uXG4gICAgICAgICAgICAgIHRocm93IEVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICdvYmplY3QnICYmIFJlZmxlY3QuY29uc3RydWN0KSB7XG4gICAgICAgICAgICAvLyBXZSBjb25zdHJ1Y3QgYSBkaWZmZXJlbnQgY29udHJvbCBmb3IgdGhpcyBjYXNlIHRvIGluY2x1ZGUgYW55IGV4dHJhXG4gICAgICAgICAgICAvLyBmcmFtZXMgYWRkZWQgYnkgdGhlIGNvbnN0cnVjdCBjYWxsLlxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgUmVmbGVjdC5jb25zdHJ1Y3QoRmFrZSwgW10pO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICBjb250cm9sID0geDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgUmVmbGVjdC5jb25zdHJ1Y3QoZm4sIFtdLCBGYWtlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgRmFrZS5jYWxsKCk7XG4gICAgICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgICAgIGNvbnRyb2wgPSB4O1xuICAgICAgICAgICAgfSAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gZm91bmQgd2hlbiB1cGdyYWRpbmcgRmxvd1xuXG5cbiAgICAgICAgICAgIGZuLmNhbGwoRmFrZS5wcm90b3R5cGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcbiAgICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgICBjb250cm9sID0geDtcbiAgICAgICAgICB9IC8vIFRPRE8obHVuYSk6IFRoaXMgd2lsbCBjdXJyZW50bHkgb25seSB0aHJvdyBpZiB0aGUgZnVuY3Rpb24gY29tcG9uZW50XG4gICAgICAgICAgLy8gdHJpZXMgdG8gYWNjZXNzIFJlYWN0L1JlYWN0RE9NL3Byb3BzLiBXZSBzaG91bGQgcHJvYmFibHkgbWFrZSB0aGlzIHRocm93XG4gICAgICAgICAgLy8gaW4gc2ltcGxlIGNvbXBvbmVudHMgdG9vXG5cblxuICAgICAgICAgIHZhciBtYXliZVByb21pc2UgPSBmbigpOyAvLyBJZiB0aGUgZnVuY3Rpb24gY29tcG9uZW50IHJldHVybnMgYSBwcm9taXNlLCBpdCdzIGxpa2VseSBhbiBhc3luY1xuICAgICAgICAgIC8vIGNvbXBvbmVudCwgd2hpY2ggd2UgZG9uJ3QgeWV0IHN1cHBvcnQuIEF0dGFjaCBhIG5vb3AgY2F0Y2ggaGFuZGxlciB0b1xuICAgICAgICAgIC8vIHNpbGVuY2UgdGhlIGVycm9yLlxuICAgICAgICAgIC8vIFRPRE86IEltcGxlbWVudCBjb21wb25lbnQgc3RhY2tzIGZvciBhc3luYyBjbGllbnQgY29tcG9uZW50cz9cblxuICAgICAgICAgIGlmIChtYXliZVByb21pc2UgJiYgdHlwZW9mIG1heWJlUHJvbWlzZS5jYXRjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKHNhbXBsZSkge1xuICAgICAgICAvLyBUaGlzIGlzIGlubGluZWQgbWFudWFsbHkgYmVjYXVzZSBjbG9zdXJlIGRvZXNuJ3QgZG8gaXQgZm9yIHVzLlxuICAgICAgICBpZiAoc2FtcGxlICYmIGNvbnRyb2wgJiYgdHlwZW9mIHNhbXBsZS5zdGFjayA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXR1cm4gW3NhbXBsZS5zdGFjaywgY29udHJvbC5zdGFja107XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFtudWxsLCBudWxsXTtcbiAgICB9XG4gIH07IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuXG4gIFJ1bkluUm9vdEZyYW1lLkRldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdC5kaXNwbGF5TmFtZSA9ICdEZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QnO1xuICB2YXIgbmFtZVByb3BEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihSdW5JblJvb3RGcmFtZS5EZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QsICduYW1lJyk7IC8vIEJlZm9yZSBFUzYsIHRoZSBgbmFtZWAgcHJvcGVydHkgd2FzIG5vdCBjb25maWd1cmFibGUuXG5cbiAgaWYgKG5hbWVQcm9wRGVzY3JpcHRvciAmJiBuYW1lUHJvcERlc2NyaXB0b3IuY29uZmlndXJhYmxlKSB7XG4gICAgLy8gVjggdXRpbGl6ZXMgYSBmdW5jdGlvbidzIGBuYW1lYCBwcm9wZXJ0eSB3aGVuIGdlbmVyYXRpbmcgYSBzdGFjayB0cmFjZS5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUnVuSW5Sb290RnJhbWUuRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290LCAvLyBDb25maWd1cmFibGUgcHJvcGVydGllcyBjYW4gYmUgdXBkYXRlZCBldmVuIGlmIGl0cyB3cml0YWJsZSBkZXNjcmlwdG9yXG4gICAgLy8gaXMgc2V0IHRvIGBmYWxzZWAuXG4gICAgLy8gJEZsb3dGaXhNZVtjYW5ub3Qtd3JpdGVdXG4gICAgJ25hbWUnLCB7XG4gICAgICB2YWx1ZTogJ0RldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCdcbiAgICB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgdmFyIF9SdW5JblJvb3RGcmFtZSREZXRlciA9IFJ1bkluUm9vdEZyYW1lLkRldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCgpLFxuICAgICAgICBzYW1wbGVTdGFjayA9IF9SdW5JblJvb3RGcmFtZSREZXRlclswXSxcbiAgICAgICAgY29udHJvbFN0YWNrID0gX1J1bkluUm9vdEZyYW1lJERldGVyWzFdO1xuXG4gICAgaWYgKHNhbXBsZVN0YWNrICYmIGNvbnRyb2xTdGFjaykge1xuICAgICAgLy8gVGhpcyBleHRyYWN0cyB0aGUgZmlyc3QgZnJhbWUgZnJvbSB0aGUgc2FtcGxlIHRoYXQgaXNuJ3QgYWxzbyBpbiB0aGUgY29udHJvbC5cbiAgICAgIC8vIFNraXBwaW5nIG9uZSBmcmFtZSB0aGF0IHdlIGFzc3VtZSBpcyB0aGUgZnJhbWUgdGhhdCBjYWxscyB0aGUgdHdvLlxuICAgICAgdmFyIHNhbXBsZUxpbmVzID0gc2FtcGxlU3RhY2suc3BsaXQoJ1xcbicpO1xuICAgICAgdmFyIGNvbnRyb2xMaW5lcyA9IGNvbnRyb2xTdGFjay5zcGxpdCgnXFxuJyk7XG4gICAgICB2YXIgcyA9IDA7XG4gICAgICB2YXIgYyA9IDA7XG5cbiAgICAgIHdoaWxlIChzIDwgc2FtcGxlTGluZXMubGVuZ3RoICYmICFzYW1wbGVMaW5lc1tzXS5pbmNsdWRlcygnRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290JykpIHtcbiAgICAgICAgcysrO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAoYyA8IGNvbnRyb2xMaW5lcy5sZW5ndGggJiYgIWNvbnRyb2xMaW5lc1tjXS5pbmNsdWRlcygnRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290JykpIHtcbiAgICAgICAgYysrO1xuICAgICAgfSAvLyBXZSBjb3VsZG4ndCBmaW5kIG91ciBpbnRlbnRpb25hbGx5IGluamVjdGVkIGNvbW1vbiByb290IGZyYW1lLCBhdHRlbXB0XG4gICAgICAvLyB0byBmaW5kIGFub3RoZXIgY29tbW9uIHJvb3QgZnJhbWUgYnkgc2VhcmNoIGZyb20gdGhlIGJvdHRvbSBvZiB0aGVcbiAgICAgIC8vIGNvbnRyb2wgc3RhY2suLi5cblxuXG4gICAgICBpZiAocyA9PT0gc2FtcGxlTGluZXMubGVuZ3RoIHx8IGMgPT09IGNvbnRyb2xMaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgcyA9IHNhbXBsZUxpbmVzLmxlbmd0aCAtIDE7XG4gICAgICAgIGMgPSBjb250cm9sTGluZXMubGVuZ3RoIC0gMTtcblxuICAgICAgICB3aGlsZSAocyA+PSAxICYmIGMgPj0gMCAmJiBzYW1wbGVMaW5lc1tzXSAhPT0gY29udHJvbExpbmVzW2NdKSB7XG4gICAgICAgICAgLy8gV2UgZXhwZWN0IGF0IGxlYXN0IG9uZSBzdGFjayBmcmFtZSB0byBiZSBzaGFyZWQuXG4gICAgICAgICAgLy8gVHlwaWNhbGx5IHRoaXMgd2lsbCBiZSB0aGUgcm9vdCBtb3N0IG9uZS4gSG93ZXZlciwgc3RhY2sgZnJhbWVzIG1heSBiZVxuICAgICAgICAgIC8vIGN1dCBvZmYgZHVlIHRvIG1heGltdW0gc3RhY2sgbGltaXRzLiBJbiB0aGlzIGNhc2UsIG9uZSBtYXliZSBjdXQgb2ZmXG4gICAgICAgICAgLy8gZWFybGllciB0aGFuIHRoZSBvdGhlci4gV2UgYXNzdW1lIHRoYXQgdGhlIHNhbXBsZSBpcyBsb25nZXIgb3IgdGhlIHNhbWVcbiAgICAgICAgICAvLyBhbmQgdGhlcmUgZm9yIGN1dCBvZmYgZWFybGllci4gU28gd2Ugc2hvdWxkIGZpbmQgdGhlIHJvb3QgbW9zdCBmcmFtZSBpblxuICAgICAgICAgIC8vIHRoZSBzYW1wbGUgc29tZXdoZXJlIGluIHRoZSBjb250cm9sLlxuICAgICAgICAgIGMtLTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKDsgcyA+PSAxICYmIGMgPj0gMDsgcy0tLCBjLS0pIHtcbiAgICAgICAgLy8gTmV4dCB3ZSBmaW5kIHRoZSBmaXJzdCBvbmUgdGhhdCBpc24ndCB0aGUgc2FtZSB3aGljaCBzaG91bGQgYmUgdGhlXG4gICAgICAgIC8vIGZyYW1lIHRoYXQgY2FsbGVkIG91ciBzYW1wbGUgZnVuY3Rpb24gYW5kIHRoZSBjb250cm9sLlxuICAgICAgICBpZiAoc2FtcGxlTGluZXNbc10gIT09IGNvbnRyb2xMaW5lc1tjXSkge1xuICAgICAgICAgIC8vIEluIFY4LCB0aGUgZmlyc3QgbGluZSBpcyBkZXNjcmliaW5nIHRoZSBtZXNzYWdlIGJ1dCBvdGhlciBWTXMgZG9uJ3QuXG4gICAgICAgICAgLy8gSWYgd2UncmUgYWJvdXQgdG8gcmV0dXJuIHRoZSBmaXJzdCBsaW5lLCBhbmQgdGhlIGNvbnRyb2wgaXMgYWxzbyBvbiB0aGUgc2FtZVxuICAgICAgICAgIC8vIGxpbmUsIHRoYXQncyBhIHByZXR0eSBnb29kIGluZGljYXRvciB0aGF0IG91ciBzYW1wbGUgdGhyZXcgYXQgc2FtZSBsaW5lIGFzXG4gICAgICAgICAgLy8gdGhlIGNvbnRyb2wuIEkuZS4gYmVmb3JlIHdlIGVudGVyZWQgdGhlIHNhbXBsZSBmcmFtZS4gU28gd2UgaWdub3JlIHRoaXMgcmVzdWx0LlxuICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiB5b3UgcGFzc2VkIGEgY2xhc3MgdG8gZnVuY3Rpb24gY29tcG9uZW50LCBvciBub24tZnVuY3Rpb24uXG4gICAgICAgICAgaWYgKHMgIT09IDEgfHwgYyAhPT0gMSkge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICBzLS07XG4gICAgICAgICAgICAgIGMtLTsgLy8gV2UgbWF5IHN0aWxsIGhhdmUgc2ltaWxhciBpbnRlcm1lZGlhdGUgZnJhbWVzIGZyb20gdGhlIGNvbnN0cnVjdCBjYWxsLlxuICAgICAgICAgICAgICAvLyBUaGUgbmV4dCBvbmUgdGhhdCBpc24ndCB0aGUgc2FtZSBzaG91bGQgYmUgb3VyIG1hdGNoIHRob3VnaC5cblxuICAgICAgICAgICAgICBpZiAoYyA8IDAgfHwgc2FtcGxlTGluZXNbc10gIT09IGNvbnRyb2xMaW5lc1tjXSkge1xuICAgICAgICAgICAgICAgIC8vIFY4IGFkZHMgYSBcIm5ld1wiIHByZWZpeCBmb3IgbmF0aXZlIGNsYXNzZXMuIExldCdzIHJlbW92ZSBpdCB0byBtYWtlIGl0IHByZXR0aWVyLlxuICAgICAgICAgICAgICAgIHZhciBfZnJhbWUgPSAnXFxuJyArIHNhbXBsZUxpbmVzW3NdLnJlcGxhY2UoJyBhdCBuZXcgJywgJyBhdCAnKTsgLy8gSWYgb3VyIGNvbXBvbmVudCBmcmFtZSBpcyBsYWJlbGVkIFwiPGFub255bW91cz5cIlxuICAgICAgICAgICAgICAgIC8vIGJ1dCB3ZSBoYXZlIGEgdXNlci1wcm92aWRlZCBcImRpc3BsYXlOYW1lXCJcbiAgICAgICAgICAgICAgICAvLyBzcGxpY2UgaXQgaW4gdG8gbWFrZSB0aGUgc3RhY2sgbW9yZSByZWFkYWJsZS5cblxuXG4gICAgICAgICAgICAgICAgaWYgKGZuLmRpc3BsYXlOYW1lICYmIF9mcmFtZS5pbmNsdWRlcygnPGFub255bW91cz4nKSkge1xuICAgICAgICAgICAgICAgICAgX2ZyYW1lID0gX2ZyYW1lLnJlcGxhY2UoJzxhbm9ueW1vdXM+JywgZm4uZGlzcGxheU5hbWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudEZyYW1lQ2FjaGUuc2V0KGZuLCBfZnJhbWUpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gLy8gUmV0dXJuIHRoZSBsaW5lIHdlIGZvdW5kLlxuXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gX2ZyYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlIChzID49IDEgJiYgYyA+PSAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICByZWVudHJ5ID0gZmFsc2U7XG5cbiAgICB7XG4gICAgICBSZWFjdEN1cnJlbnREaXNwYXRjaGVyLmN1cnJlbnQgPSBwcmV2aW91c0Rpc3BhdGNoZXI7XG4gICAgICByZWVuYWJsZUxvZ3MoKTtcbiAgICB9XG5cbiAgICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IHByZXZpb3VzUHJlcGFyZVN0YWNrVHJhY2U7XG4gIH0gLy8gRmFsbGJhY2sgdG8ganVzdCB1c2luZyB0aGUgbmFtZSBpZiB3ZSBjb3VsZG4ndCBtYWtlIGl0IHRocm93LlxuXG5cbiAgdmFyIG5hbWUgPSBmbiA/IGZuLmRpc3BsYXlOYW1lIHx8IGZuLm5hbWUgOiAnJztcbiAgdmFyIHN5bnRoZXRpY0ZyYW1lID0gbmFtZSA/IGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKG5hbWUpIDogJyc7XG5cbiAge1xuICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbXBvbmVudEZyYW1lQ2FjaGUuc2V0KGZuLCBzeW50aGV0aWNGcmFtZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN5bnRoZXRpY0ZyYW1lO1xufVxuZnVuY3Rpb24gZGVzY3JpYmVGdW5jdGlvbkNvbXBvbmVudEZyYW1lKGZuLCBvd25lckZuKSB7XG4gIHtcbiAgICByZXR1cm4gZGVzY3JpYmVOYXRpdmVDb21wb25lbnRGcmFtZShmbiwgZmFsc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNob3VsZENvbnN0cnVjdChDb21wb25lbnQpIHtcbiAgdmFyIHByb3RvdHlwZSA9IENvbXBvbmVudC5wcm90b3R5cGU7XG4gIHJldHVybiAhIShwcm90b3R5cGUgJiYgcHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQpO1xufVxuXG5mdW5jdGlvbiBkZXNjcmliZVVua25vd25FbGVtZW50VHlwZUZyYW1lSW5ERVYodHlwZSwgb3duZXJGbikge1xuXG4gIGlmICh0eXBlID09IG51bGwpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBpZiAodHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICB7XG4gICAgICByZXR1cm4gZGVzY3JpYmVOYXRpdmVDb21wb25lbnRGcmFtZSh0eXBlLCBzaG91bGRDb25zdHJ1Y3QodHlwZSkpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUodHlwZSk7XG4gIH1cblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX1RZUEU6XG4gICAgICByZXR1cm4gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUoJ1N1c3BlbnNlJyk7XG5cbiAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRTpcbiAgICAgIHJldHVybiBkZXNjcmliZUJ1aWx0SW5Db21wb25lbnRGcmFtZSgnU3VzcGVuc2VMaXN0Jyk7XG4gIH1cblxuICBpZiAodHlwZW9mIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgc3dpdGNoICh0eXBlLiQkdHlwZW9mKSB7XG4gICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6XG4gICAgICAgIHJldHVybiBkZXNjcmliZUZ1bmN0aW9uQ29tcG9uZW50RnJhbWUodHlwZS5yZW5kZXIpO1xuXG4gICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRTpcbiAgICAgICAgLy8gTWVtbyBtYXkgY29udGFpbiBhbnkgY29tcG9uZW50IHR5cGUgc28gd2UgcmVjdXJzaXZlbHkgcmVzb2x2ZSBpdC5cbiAgICAgICAgcmV0dXJuIGRlc2NyaWJlVW5rbm93bkVsZW1lbnRUeXBlRnJhbWVJbkRFVih0eXBlLnR5cGUsIG93bmVyRm4pO1xuXG4gICAgICBjYXNlIFJFQUNUX0xBWllfVFlQRTpcbiAgICAgICAge1xuICAgICAgICAgIHZhciBsYXp5Q29tcG9uZW50ID0gdHlwZTtcbiAgICAgICAgICB2YXIgcGF5bG9hZCA9IGxhenlDb21wb25lbnQuX3BheWxvYWQ7XG4gICAgICAgICAgdmFyIGluaXQgPSBsYXp5Q29tcG9uZW50Ll9pbml0O1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIExhenkgbWF5IGNvbnRhaW4gYW55IGNvbXBvbmVudCB0eXBlIHNvIHdlIHJlY3Vyc2l2ZWx5IHJlc29sdmUgaXQuXG4gICAgICAgICAgICByZXR1cm4gZGVzY3JpYmVVbmtub3duRWxlbWVudFR5cGVGcmFtZUluREVWKGluaXQocGF5bG9hZCksIG93bmVyRm4pO1xuICAgICAgICAgIH0gY2F0Y2ggKHgpIHt9XG4gICAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gJyc7XG59XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlJlYWN0Q3VycmVudE93bmVyO1xudmFyIFJlYWN0RGVidWdDdXJyZW50RnJhbWUgPSBSZWFjdFNoYXJlZEludGVybmFscy5SZWFjdERlYnVnQ3VycmVudEZyYW1lO1xudmFyIFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UgPSBTeW1ib2wuZm9yKCdyZWFjdC5jbGllbnQucmVmZXJlbmNlJyk7XG52YXIgc3BlY2lhbFByb3BLZXlXYXJuaW5nU2hvd247XG52YXIgc3BlY2lhbFByb3BSZWZXYXJuaW5nU2hvd247XG52YXIgZGlkV2FybkFib3V0U3RyaW5nUmVmcztcblxue1xuICBkaWRXYXJuQWJvdXRTdHJpbmdSZWZzID0ge307XG59XG5cbmZ1bmN0aW9uIGhhc1ZhbGlkUmVmKGNvbmZpZykge1xuICB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCAncmVmJykpIHtcbiAgICAgIHZhciBnZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbmZpZywgJ3JlZicpLmdldDtcblxuICAgICAgaWYgKGdldHRlciAmJiBnZXR0ZXIuaXNSZWFjdFdhcm5pbmcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb25maWcucmVmICE9PSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGhhc1ZhbGlkS2V5KGNvbmZpZykge1xuICB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCAna2V5JykpIHtcbiAgICAgIHZhciBnZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbmZpZywgJ2tleScpLmdldDtcblxuICAgICAgaWYgKGdldHRlciAmJiBnZXR0ZXIuaXNSZWFjdFdhcm5pbmcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb25maWcua2V5ICE9PSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIHdhcm5JZlN0cmluZ1JlZkNhbm5vdEJlQXV0b0NvbnZlcnRlZChjb25maWcsIHNlbGYpIHtcbiAge1xuICAgIGlmICh0eXBlb2YgY29uZmlnLnJlZiA9PT0gJ3N0cmluZycgJiYgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCAmJiBzZWxmICYmIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuc3RhdGVOb2RlICE9PSBzZWxmKSB7XG4gICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LnR5cGUpO1xuXG4gICAgICBpZiAoIWRpZFdhcm5BYm91dFN0cmluZ1JlZnNbY29tcG9uZW50TmFtZV0pIHtcbiAgICAgICAgZXJyb3IoJ0NvbXBvbmVudCBcIiVzXCIgY29udGFpbnMgdGhlIHN0cmluZyByZWYgXCIlc1wiLiAnICsgJ1N1cHBvcnQgZm9yIHN0cmluZyByZWZzIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciByZWxlYXNlLiAnICsgJ1RoaXMgY2FzZSBjYW5ub3QgYmUgYXV0b21hdGljYWxseSBjb252ZXJ0ZWQgdG8gYW4gYXJyb3cgZnVuY3Rpb24uICcgKyAnV2UgYXNrIHlvdSB0byBtYW51YWxseSBmaXggdGhpcyBjYXNlIGJ5IHVzaW5nIHVzZVJlZigpIG9yIGNyZWF0ZVJlZigpIGluc3RlYWQuICcgKyAnTGVhcm4gbW9yZSBhYm91dCB1c2luZyByZWZzIHNhZmVseSBoZXJlOiAnICsgJ2h0dHBzOi8vcmVhY3Rqcy5vcmcvbGluay9zdHJpY3QtbW9kZS1zdHJpbmctcmVmJywgZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQudHlwZSksIGNvbmZpZy5yZWYpO1xuXG4gICAgICAgIGRpZFdhcm5BYm91dFN0cmluZ1JlZnNbY29tcG9uZW50TmFtZV0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpIHtcbiAge1xuICAgIHZhciB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duKSB7XG4gICAgICAgIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duID0gdHJ1ZTtcblxuICAgICAgICBlcnJvcignJXM6IGBrZXlgIGlzIG5vdCBhIHByb3AuIFRyeWluZyB0byBhY2Nlc3MgaXQgd2lsbCByZXN1bHQgJyArICdpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lICcgKyAndmFsdWUgd2l0aGluIHRoZSBjaGlsZCBjb21wb25lbnQsIHlvdSBzaG91bGQgcGFzcyBpdCBhcyBhIGRpZmZlcmVudCAnICsgJ3Byb3AuIChodHRwczovL3JlYWN0anMub3JnL2xpbmsvc3BlY2lhbC1wcm9wcyknLCBkaXNwbGF5TmFtZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdhcm5BYm91dEFjY2Vzc2luZ0tleS5pc1JlYWN0V2FybmluZyA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3BzLCAna2V5Jywge1xuICAgICAgZ2V0OiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXksXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWZpbmVSZWZQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpIHtcbiAge1xuICAgIHtcbiAgICAgIHZhciB3YXJuQWJvdXRBY2Nlc3NpbmdSZWYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghc3BlY2lhbFByb3BSZWZXYXJuaW5nU2hvd24pIHtcbiAgICAgICAgICBzcGVjaWFsUHJvcFJlZldhcm5pbmdTaG93biA9IHRydWU7XG5cbiAgICAgICAgICBlcnJvcignJXM6IGByZWZgIGlzIG5vdCBhIHByb3AuIFRyeWluZyB0byBhY2Nlc3MgaXQgd2lsbCByZXN1bHQgJyArICdpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lICcgKyAndmFsdWUgd2l0aGluIHRoZSBjaGlsZCBjb21wb25lbnQsIHlvdSBzaG91bGQgcGFzcyBpdCBhcyBhIGRpZmZlcmVudCAnICsgJ3Byb3AuIChodHRwczovL3JlYWN0anMub3JnL2xpbmsvc3BlY2lhbC1wcm9wcyknLCBkaXNwbGF5TmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHdhcm5BYm91dEFjY2Vzc2luZ1JlZi5pc1JlYWN0V2FybmluZyA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvcHMsICdyZWYnLCB7XG4gICAgICAgIGdldDogd2FybkFib3V0QWNjZXNzaW5nUmVmLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuLyoqXG4gKiBGYWN0b3J5IG1ldGhvZCB0byBjcmVhdGUgYSBuZXcgUmVhY3QgZWxlbWVudC4gVGhpcyBubyBsb25nZXIgYWRoZXJlcyB0b1xuICogdGhlIGNsYXNzIHBhdHRlcm4sIHNvIGRvIG5vdCB1c2UgbmV3IHRvIGNhbGwgaXQuIEFsc28sIGluc3RhbmNlb2YgY2hlY2tcbiAqIHdpbGwgbm90IHdvcmsuIEluc3RlYWQgdGVzdCAkJHR5cGVvZiBmaWVsZCBhZ2FpbnN0IFN5bWJvbC5mb3IoJ3JlYWN0LmVsZW1lbnQnKSB0byBjaGVja1xuICogaWYgc29tZXRoaW5nIGlzIGEgUmVhY3QgRWxlbWVudC5cbiAqXG4gKiBAcGFyYW0geyp9IHR5cGVcbiAqIEBwYXJhbSB7Kn0gcHJvcHNcbiAqIEBwYXJhbSB7Kn0ga2V5XG4gKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IHJlZlxuICogQHBhcmFtIHsqfSBvd25lclxuICogQHBhcmFtIHsqfSBzZWxmIEEgKnRlbXBvcmFyeSogaGVscGVyIHRvIGRldGVjdCBwbGFjZXMgd2hlcmUgYHRoaXNgIGlzXG4gKiBkaWZmZXJlbnQgZnJvbSB0aGUgYG93bmVyYCB3aGVuIFJlYWN0LmNyZWF0ZUVsZW1lbnQgaXMgY2FsbGVkLCBzbyB0aGF0IHdlXG4gKiBjYW4gd2Fybi4gV2Ugd2FudCB0byBnZXQgcmlkIG9mIG93bmVyIGFuZCByZXBsYWNlIHN0cmluZyBgcmVmYHMgd2l0aCBhcnJvd1xuICogZnVuY3Rpb25zLCBhbmQgYXMgbG9uZyBhcyBgdGhpc2AgYW5kIG93bmVyIGFyZSB0aGUgc2FtZSwgdGhlcmUgd2lsbCBiZSBub1xuICogY2hhbmdlIGluIGJlaGF2aW9yLlxuICogQHBhcmFtIHsqfSBzb3VyY2UgQW4gYW5ub3RhdGlvbiBvYmplY3QgKGFkZGVkIGJ5IGEgdHJhbnNwaWxlciBvciBvdGhlcndpc2UpXG4gKiBpbmRpY2F0aW5nIGZpbGVuYW1lLCBsaW5lIG51bWJlciwgYW5kL29yIG90aGVyIGluZm9ybWF0aW9uLlxuICogQGludGVybmFsXG4gKi9cblxuXG5mdW5jdGlvbiBSZWFjdEVsZW1lbnQodHlwZSwga2V5LCBfcmVmLCBzZWxmLCBzb3VyY2UsIG93bmVyLCBwcm9wcykge1xuICB2YXIgcmVmO1xuXG4gIHtcbiAgICByZWYgPSBfcmVmO1xuICB9XG5cbiAgdmFyIGVsZW1lbnQ7XG5cbiAge1xuICAgIC8vIEluIHByb2QsIGByZWZgIGlzIGEgcmVndWxhciBwcm9wZXJ0eS4gSXQgd2lsbCBiZSByZW1vdmVkIGluIGFcbiAgICAvLyBmdXR1cmUgcmVsZWFzZS5cbiAgICBlbGVtZW50ID0ge1xuICAgICAgLy8gVGhpcyB0YWcgYWxsb3dzIHVzIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoaXMgYXMgYSBSZWFjdCBFbGVtZW50XG4gICAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuICAgICAgLy8gQnVpbHQtaW4gcHJvcGVydGllcyB0aGF0IGJlbG9uZyBvbiB0aGUgZWxlbWVudFxuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGtleToga2V5LFxuICAgICAgcmVmOiByZWYsXG4gICAgICBwcm9wczogcHJvcHMsXG4gICAgICAvLyBSZWNvcmQgdGhlIGNvbXBvbmVudCByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhpcyBlbGVtZW50LlxuICAgICAgX293bmVyOiBvd25lclxuICAgIH07XG4gIH1cblxuICB7XG4gICAgLy8gVGhlIHZhbGlkYXRpb24gZmxhZyBpcyBjdXJyZW50bHkgbXV0YXRpdmUuIFdlIHB1dCBpdCBvblxuICAgIC8vIGFuIGV4dGVybmFsIGJhY2tpbmcgc3RvcmUgc28gdGhhdCB3ZSBjYW4gZnJlZXplIHRoZSB3aG9sZSBvYmplY3QuXG4gICAgLy8gVGhpcyBjYW4gYmUgcmVwbGFjZWQgd2l0aCBhIFdlYWtNYXAgb25jZSB0aGV5IGFyZSBpbXBsZW1lbnRlZCBpblxuICAgIC8vIGNvbW1vbmx5IHVzZWQgZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRzLlxuICAgIGVsZW1lbnQuX3N0b3JlID0ge307IC8vIFRvIG1ha2UgY29tcGFyaW5nIFJlYWN0RWxlbWVudHMgZWFzaWVyIGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB3ZSBtYWtlXG4gICAgLy8gdGhlIHZhbGlkYXRpb24gZmxhZyBub24tZW51bWVyYWJsZSAod2hlcmUgcG9zc2libGUsIHdoaWNoIHNob3VsZFxuICAgIC8vIGluY2x1ZGUgZXZlcnkgZW52aXJvbm1lbnQgd2UgcnVuIHRlc3RzIGluKSwgc28gdGhlIHRlc3QgZnJhbWV3b3JrXG4gICAgLy8gaWdub3JlcyBpdC5cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50Ll9zdG9yZSwgJ3ZhbGlkYXRlZCcsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGZhbHNlXG4gICAgfSk7IC8vIGRlYnVnSW5mbyBjb250YWlucyBTZXJ2ZXIgQ29tcG9uZW50IGRlYnVnIGluZm9ybWF0aW9uLlxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdfZGVidWdJbmZvJywge1xuICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogbnVsbFxuICAgIH0pO1xuXG4gICAgaWYgKE9iamVjdC5mcmVlemUpIHtcbiAgICAgIE9iamVjdC5mcmVlemUoZWxlbWVudC5wcm9wcyk7XG4gICAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlbGVtZW50O1xufVxudmFyIGRpZFdhcm5BYm91dEtleVNwcmVhZCA9IHt9O1xuLyoqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcmVhY3Rqcy9yZmNzL3B1bGwvMTA3XG4gKiBAcGFyYW0geyp9IHR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICovXG5cbmZ1bmN0aW9uIGpzeERFViQxKHR5cGUsIGNvbmZpZywgbWF5YmVLZXksIGlzU3RhdGljQ2hpbGRyZW4sIHNvdXJjZSwgc2VsZikge1xuICB7XG4gICAgaWYgKCFpc1ZhbGlkRWxlbWVudFR5cGUodHlwZSkpIHtcbiAgICAgIC8vIFRoaXMgaXMgYW4gaW52YWxpZCBlbGVtZW50IHR5cGUuXG4gICAgICAvL1xuICAgICAgLy8gV2Ugd2FybiBpbiB0aGlzIGNhc2UgYnV0IGRvbid0IHRocm93LiBXZSBleHBlY3QgdGhlIGVsZW1lbnQgY3JlYXRpb24gdG9cbiAgICAgIC8vIHN1Y2NlZWQgYW5kIHRoZXJlIHdpbGwgbGlrZWx5IGJlIGVycm9ycyBpbiByZW5kZXIuXG4gICAgICB2YXIgaW5mbyA9ICcnO1xuXG4gICAgICBpZiAodHlwZSA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JyAmJiB0eXBlICE9PSBudWxsICYmIE9iamVjdC5rZXlzKHR5cGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpbmZvICs9ICcgWW91IGxpa2VseSBmb3Jnb3QgdG8gZXhwb3J0IHlvdXIgY29tcG9uZW50IGZyb20gdGhlIGZpbGUgJyArIFwiaXQncyBkZWZpbmVkIGluLCBvciB5b3UgbWlnaHQgaGF2ZSBtaXhlZCB1cCBkZWZhdWx0IGFuZCBuYW1lZCBpbXBvcnRzLlwiO1xuICAgICAgfVxuXG4gICAgICB2YXIgdHlwZVN0cmluZztcblxuICAgICAgaWYgKHR5cGUgPT09IG51bGwpIHtcbiAgICAgICAgdHlwZVN0cmluZyA9ICdudWxsJztcbiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheSh0eXBlKSkge1xuICAgICAgICB0eXBlU3RyaW5nID0gJ2FycmF5JztcbiAgICAgIH0gZWxzZSBpZiAodHlwZSAhPT0gdW5kZWZpbmVkICYmIHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRSkge1xuICAgICAgICB0eXBlU3RyaW5nID0gXCI8XCIgKyAoZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUudHlwZSkgfHwgJ1Vua25vd24nKSArIFwiIC8+XCI7XG4gICAgICAgIGluZm8gPSAnIERpZCB5b3UgYWNjaWRlbnRhbGx5IGV4cG9ydCBhIEpTWCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjb21wb25lbnQ/JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHR5cGVTdHJpbmcgPSB0eXBlb2YgdHlwZTtcbiAgICAgIH1cblxuICAgICAgZXJyb3IoJ1JlYWN0LmpzeDogdHlwZSBpcyBpbnZhbGlkIC0tIGV4cGVjdGVkIGEgc3RyaW5nIChmb3IgJyArICdidWlsdC1pbiBjb21wb25lbnRzKSBvciBhIGNsYXNzL2Z1bmN0aW9uIChmb3IgY29tcG9zaXRlICcgKyAnY29tcG9uZW50cykgYnV0IGdvdDogJXMuJXMnLCB0eXBlU3RyaW5nLCBpbmZvKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhpcyBpcyBhIHZhbGlkIGVsZW1lbnQgdHlwZS5cbiAgICAgIC8vIFNraXAga2V5IHdhcm5pbmcgaWYgdGhlIHR5cGUgaXNuJ3QgdmFsaWQgc2luY2Ugb3VyIGtleSB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgICAvLyBkb2Vzbid0IGV4cGVjdCBhIG5vbi1zdHJpbmcvZnVuY3Rpb24gdHlwZSBhbmQgY2FuIHRocm93IGNvbmZ1c2luZ1xuICAgICAgLy8gZXJyb3JzLiBXZSBkb24ndCB3YW50IGV4Y2VwdGlvbiBiZWhhdmlvciB0byBkaWZmZXIgYmV0d2VlbiBkZXYgYW5kXG4gICAgICAvLyBwcm9kLiAoUmVuZGVyaW5nIHdpbGwgdGhyb3cgd2l0aCBhIGhlbHBmdWwgbWVzc2FnZSBhbmQgYXMgc29vbiBhcyB0aGVcbiAgICAgIC8vIHR5cGUgaXMgZml4ZWQsIHRoZSBrZXkgd2FybmluZ3Mgd2lsbCBhcHBlYXIuKVxuICAgICAgdmFyIGNoaWxkcmVuID0gY29uZmlnLmNoaWxkcmVuO1xuXG4gICAgICBpZiAoY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaXNTdGF0aWNDaGlsZHJlbikge1xuICAgICAgICAgIGlmIChpc0FycmF5KGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhjaGlsZHJlbltpXSwgdHlwZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChPYmplY3QuZnJlZXplKSB7XG4gICAgICAgICAgICAgIE9iamVjdC5mcmVlemUoY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnJvcignUmVhY3QuanN4OiBTdGF0aWMgY2hpbGRyZW4gc2hvdWxkIGFsd2F5cyBiZSBhbiBhcnJheS4gJyArICdZb3UgYXJlIGxpa2VseSBleHBsaWNpdGx5IGNhbGxpbmcgUmVhY3QuanN4cyBvciBSZWFjdC5qc3hERVYuICcgKyAnVXNlIHRoZSBCYWJlbCB0cmFuc2Zvcm0gaW5zdGVhZC4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoY2hpbGRyZW4sIHR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBXYXJuIGFib3V0IGtleSBzcHJlYWQgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoZSB0eXBlIGlzIHZhbGlkLlxuXG5cbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsICdrZXknKSkge1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZSk7XG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGNvbmZpZykuZmlsdGVyKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHJldHVybiBrICE9PSAna2V5JztcbiAgICAgIH0pO1xuICAgICAgdmFyIGJlZm9yZUV4YW1wbGUgPSBrZXlzLmxlbmd0aCA+IDAgPyAne2tleTogc29tZUtleSwgJyArIGtleXMuam9pbignOiAuLi4sICcpICsgJzogLi4ufScgOiAne2tleTogc29tZUtleX0nO1xuXG4gICAgICBpZiAoIWRpZFdhcm5BYm91dEtleVNwcmVhZFtjb21wb25lbnROYW1lICsgYmVmb3JlRXhhbXBsZV0pIHtcbiAgICAgICAgdmFyIGFmdGVyRXhhbXBsZSA9IGtleXMubGVuZ3RoID4gMCA/ICd7JyArIGtleXMuam9pbignOiAuLi4sICcpICsgJzogLi4ufScgOiAne30nO1xuXG4gICAgICAgIGVycm9yKCdBIHByb3BzIG9iamVjdCBjb250YWluaW5nIGEgXCJrZXlcIiBwcm9wIGlzIGJlaW5nIHNwcmVhZCBpbnRvIEpTWDpcXG4nICsgJyAgbGV0IHByb3BzID0gJXM7XFxuJyArICcgIDwlcyB7Li4ucHJvcHN9IC8+XFxuJyArICdSZWFjdCBrZXlzIG11c3QgYmUgcGFzc2VkIGRpcmVjdGx5IHRvIEpTWCB3aXRob3V0IHVzaW5nIHNwcmVhZDpcXG4nICsgJyAgbGV0IHByb3BzID0gJXM7XFxuJyArICcgIDwlcyBrZXk9e3NvbWVLZXl9IHsuLi5wcm9wc30gLz4nLCBiZWZvcmVFeGFtcGxlLCBjb21wb25lbnROYW1lLCBhZnRlckV4YW1wbGUsIGNvbXBvbmVudE5hbWUpO1xuXG4gICAgICAgIGRpZFdhcm5BYm91dEtleVNwcmVhZFtjb21wb25lbnROYW1lICsgYmVmb3JlRXhhbXBsZV0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcm9wTmFtZTsgLy8gUmVzZXJ2ZWQgbmFtZXMgYXJlIGV4dHJhY3RlZFxuXG4gICAgdmFyIHByb3BzID0ge307XG4gICAgdmFyIGtleSA9IG51bGw7XG4gICAgdmFyIHJlZiA9IG51bGw7IC8vIEN1cnJlbnRseSwga2V5IGNhbiBiZSBzcHJlYWQgaW4gYXMgYSBwcm9wLiBUaGlzIGNhdXNlcyBhIHBvdGVudGlhbFxuICAgIC8vIGlzc3VlIGlmIGtleSBpcyBhbHNvIGV4cGxpY2l0bHkgZGVjbGFyZWQgKGllLiA8ZGl2IHsuLi5wcm9wc30ga2V5PVwiSGlcIiAvPlxuICAgIC8vIG9yIDxkaXYga2V5PVwiSGlcIiB7Li4ucHJvcHN9IC8+ICkuIFdlIHdhbnQgdG8gZGVwcmVjYXRlIGtleSBzcHJlYWQsXG4gICAgLy8gYnV0IGFzIGFuIGludGVybWVkaWFyeSBzdGVwLCB3ZSB3aWxsIHVzZSBqc3hERVYgZm9yIGV2ZXJ5dGhpbmcgZXhjZXB0XG4gICAgLy8gPGRpdiB7Li4ucHJvcHN9IGtleT1cIkhpXCIgLz4sIGJlY2F1c2Ugd2UgYXJlbid0IGN1cnJlbnRseSBhYmxlIHRvIHRlbGwgaWZcbiAgICAvLyBrZXkgaXMgZXhwbGljaXRseSBkZWNsYXJlZCB0byBiZSB1bmRlZmluZWQgb3Igbm90LlxuXG4gICAgaWYgKG1heWJlS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHtcbiAgICAgICAgY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihtYXliZUtleSk7XG4gICAgICB9XG5cbiAgICAgIGtleSA9ICcnICsgbWF5YmVLZXk7XG4gICAgfVxuXG4gICAgaWYgKGhhc1ZhbGlkS2V5KGNvbmZpZykpIHtcbiAgICAgIHtcbiAgICAgICAgY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihjb25maWcua2V5KTtcbiAgICAgIH1cblxuICAgICAga2V5ID0gJycgKyBjb25maWcua2V5O1xuICAgIH1cblxuICAgIGlmIChoYXNWYWxpZFJlZihjb25maWcpKSB7XG4gICAgICB7XG4gICAgICAgIHJlZiA9IGNvbmZpZy5yZWY7XG4gICAgICB9XG5cbiAgICAgIHdhcm5JZlN0cmluZ1JlZkNhbm5vdEJlQXV0b0NvbnZlcnRlZChjb25maWcsIHNlbGYpO1xuICAgIH0gLy8gUmVtYWluaW5nIHByb3BlcnRpZXMgYXJlIGFkZGVkIHRvIGEgbmV3IHByb3BzIG9iamVjdFxuXG5cbiAgICBmb3IgKHByb3BOYW1lIGluIGNvbmZpZykge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBwcm9wTmFtZSkgJiYgLy8gU2tpcCBvdmVyIHJlc2VydmVkIHByb3AgbmFtZXNcbiAgICAgIHByb3BOYW1lICE9PSAna2V5JyAmJiAocHJvcE5hbWUgIT09ICdyZWYnKSkge1xuICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBjb25maWdbcHJvcE5hbWVdO1xuICAgICAgfVxuICAgIH0gLy8gUmVzb2x2ZSBkZWZhdWx0IHByb3BzXG5cblxuICAgIGlmICh0eXBlICYmIHR5cGUuZGVmYXVsdFByb3BzKSB7XG4gICAgICB2YXIgZGVmYXVsdFByb3BzID0gdHlwZS5kZWZhdWx0UHJvcHM7XG5cbiAgICAgIGZvciAocHJvcE5hbWUgaW4gZGVmYXVsdFByb3BzKSB7XG4gICAgICAgIGlmIChwcm9wc1twcm9wTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGRlZmF1bHRQcm9wc1twcm9wTmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoa2V5IHx8IHJlZikge1xuICAgICAgdmFyIGRpc3BsYXlOYW1lID0gdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicgPyB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCAnVW5rbm93bicgOiB0eXBlO1xuXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIGRlZmluZUtleVByb3BXYXJuaW5nR2V0dGVyKHByb3BzLCBkaXNwbGF5TmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgZGVmaW5lUmVmUHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZWxlbWVudCA9IFJlYWN0RWxlbWVudCh0eXBlLCBrZXksIHJlZiwgc2VsZiwgc291cmNlLCBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LCBwcm9wcyk7XG5cbiAgICBpZiAodHlwZSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSkge1xuICAgICAgdmFsaWRhdGVGcmFnbWVudFByb3BzKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpIHtcbiAge1xuICAgIGlmIChSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LnR5cGUpO1xuXG4gICAgICBpZiAobmFtZSkge1xuICAgICAgICByZXR1cm4gJ1xcblxcbkNoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9XG59XG4vKipcbiAqIEVuc3VyZSB0aGF0IGV2ZXJ5IGVsZW1lbnQgZWl0aGVyIGlzIHBhc3NlZCBpbiBhIHN0YXRpYyBsb2NhdGlvbiwgaW4gYW5cbiAqIGFycmF5IHdpdGggYW4gZXhwbGljaXQga2V5cyBwcm9wZXJ0eSBkZWZpbmVkLCBvciBpbiBhbiBvYmplY3QgbGl0ZXJhbFxuICogd2l0aCB2YWxpZCBrZXkgcHJvcGVydHkuXG4gKlxuICogQGludGVybmFsXG4gKiBAcGFyYW0ge1JlYWN0Tm9kZX0gbm9kZSBTdGF0aWNhbGx5IHBhc3NlZCBjaGlsZCBvZiBhbnkgdHlwZS5cbiAqIEBwYXJhbSB7Kn0gcGFyZW50VHlwZSBub2RlJ3MgcGFyZW50J3MgdHlwZS5cbiAqL1xuXG5cbmZ1bmN0aW9uIHZhbGlkYXRlQ2hpbGRLZXlzKG5vZGUsIHBhcmVudFR5cGUpIHtcbiAge1xuICAgIGlmICh0eXBlb2Ygbm9kZSAhPT0gJ29iamVjdCcgfHwgIW5vZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9kZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSkgOyBlbHNlIGlmIChpc0FycmF5KG5vZGUpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNoaWxkID0gbm9kZVtpXTtcblxuICAgICAgICBpZiAoaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG4gICAgICAgICAgdmFsaWRhdGVFeHBsaWNpdEtleShjaGlsZCwgcGFyZW50VHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVmFsaWRFbGVtZW50KG5vZGUpKSB7XG4gICAgICAvLyBUaGlzIGVsZW1lbnQgd2FzIHBhc3NlZCBpbiBhIHZhbGlkIGxvY2F0aW9uLlxuICAgICAgaWYgKG5vZGUuX3N0b3JlKSB7XG4gICAgICAgIG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihub2RlKTtcblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYXRvckZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIEVudHJ5IGl0ZXJhdG9ycyB1c2VkIHRvIHByb3ZpZGUgaW1wbGljaXQga2V5cyxcbiAgICAgICAgLy8gYnV0IG5vdyB3ZSBwcmludCBhIHNlcGFyYXRlIHdhcm5pbmcgZm9yIHRoZW0gbGF0ZXIuXG4gICAgICAgIGlmIChpdGVyYXRvckZuICE9PSBub2RlLmVudHJpZXMpIHtcbiAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwobm9kZSk7XG4gICAgICAgICAgdmFyIHN0ZXA7XG5cbiAgICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZEVsZW1lbnQoc3RlcC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgdmFsaWRhdGVFeHBsaWNpdEtleShzdGVwLnZhbHVlLCBwYXJlbnRUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbi8qKlxuICogVmVyaWZpZXMgdGhlIG9iamVjdCBpcyBhIFJlYWN0RWxlbWVudC5cbiAqIFNlZSBodHRwczovL3JlYWN0anMub3JnL2RvY3MvcmVhY3QtYXBpLmh0bWwjaXN2YWxpZGVsZW1lbnRcbiAqIEBwYXJhbSB7P29iamVjdH0gb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvYmplY3RgIGlzIGEgUmVhY3RFbGVtZW50LlxuICogQGZpbmFsXG4gKi9cblxuXG5mdW5jdGlvbiBpc1ZhbGlkRWxlbWVudChvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gbnVsbCAmJiBvYmplY3QuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRTtcbn1cbnZhciBvd25lckhhc0tleVVzZVdhcm5pbmcgPSB7fTtcbi8qKlxuICogV2FybiBpZiB0aGUgZWxlbWVudCBkb2Vzbid0IGhhdmUgYW4gZXhwbGljaXQga2V5IGFzc2lnbmVkIHRvIGl0LlxuICogVGhpcyBlbGVtZW50IGlzIGluIGFuIGFycmF5LiBUaGUgYXJyYXkgY291bGQgZ3JvdyBhbmQgc2hyaW5rIG9yIGJlXG4gKiByZW9yZGVyZWQuIEFsbCBjaGlsZHJlbiB0aGF0IGhhdmVuJ3QgYWxyZWFkeSBiZWVuIHZhbGlkYXRlZCBhcmUgcmVxdWlyZWQgdG9cbiAqIGhhdmUgYSBcImtleVwiIHByb3BlcnR5IGFzc2lnbmVkIHRvIGl0LiBFcnJvciBzdGF0dXNlcyBhcmUgY2FjaGVkIHNvIGEgd2FybmluZ1xuICogd2lsbCBvbmx5IGJlIHNob3duIG9uY2UuXG4gKlxuICogQGludGVybmFsXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudCBFbGVtZW50IHRoYXQgcmVxdWlyZXMgYSBrZXkuXG4gKiBAcGFyYW0geyp9IHBhcmVudFR5cGUgZWxlbWVudCdzIHBhcmVudCdzIHR5cGUuXG4gKi9cblxuZnVuY3Rpb24gdmFsaWRhdGVFeHBsaWNpdEtleShlbGVtZW50LCBwYXJlbnRUeXBlKSB7XG4gIHtcbiAgICBpZiAoIWVsZW1lbnQuX3N0b3JlIHx8IGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCB8fCBlbGVtZW50LmtleSAhPSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZWxlbWVudC5fc3RvcmUudmFsaWRhdGVkID0gdHJ1ZTtcbiAgICB2YXIgY3VycmVudENvbXBvbmVudEVycm9ySW5mbyA9IGdldEN1cnJlbnRDb21wb25lbnRFcnJvckluZm8ocGFyZW50VHlwZSk7XG5cbiAgICBpZiAob3duZXJIYXNLZXlVc2VXYXJuaW5nW2N1cnJlbnRDb21wb25lbnRFcnJvckluZm9dKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgb3duZXJIYXNLZXlVc2VXYXJuaW5nW2N1cnJlbnRDb21wb25lbnRFcnJvckluZm9dID0gdHJ1ZTsgLy8gVXN1YWxseSB0aGUgY3VycmVudCBvd25lciBpcyB0aGUgb2ZmZW5kZXIsIGJ1dCBpZiBpdCBhY2NlcHRzIGNoaWxkcmVuIGFzIGFcbiAgICAvLyBwcm9wZXJ0eSwgaXQgbWF5IGJlIHRoZSBjcmVhdG9yIG9mIHRoZSBjaGlsZCB0aGF0J3MgcmVzcG9uc2libGUgZm9yXG4gICAgLy8gYXNzaWduaW5nIGl0IGEga2V5LlxuXG4gICAgdmFyIGNoaWxkT3duZXIgPSAnJztcblxuICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuX293bmVyICYmIGVsZW1lbnQuX293bmVyICE9PSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgICAvLyBHaXZlIHRoZSBjb21wb25lbnQgdGhhdCBvcmlnaW5hbGx5IGNyZWF0ZWQgdGhpcyBjaGlsZC5cbiAgICAgIGNoaWxkT3duZXIgPSBcIiBJdCB3YXMgcGFzc2VkIGEgY2hpbGQgZnJvbSBcIiArIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShlbGVtZW50Ll9vd25lci50eXBlKSArIFwiLlwiO1xuICAgIH1cblxuICAgIHNldEN1cnJlbnRseVZhbGlkYXRpbmdFbGVtZW50KGVsZW1lbnQpO1xuXG4gICAgZXJyb3IoJ0VhY2ggY2hpbGQgaW4gYSBsaXN0IHNob3VsZCBoYXZlIGEgdW5pcXVlIFwia2V5XCIgcHJvcC4nICsgJyVzJXMgU2VlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvbGluay93YXJuaW5nLWtleXMgZm9yIG1vcmUgaW5mb3JtYXRpb24uJywgY3VycmVudENvbXBvbmVudEVycm9ySW5mbywgY2hpbGRPd25lcik7XG5cbiAgICBzZXRDdXJyZW50bHlWYWxpZGF0aW5nRWxlbWVudChudWxsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRDdXJyZW50bHlWYWxpZGF0aW5nRWxlbWVudChlbGVtZW50KSB7XG4gIHtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgdmFyIG93bmVyID0gZWxlbWVudC5fb3duZXI7XG4gICAgICB2YXIgc3RhY2sgPSBkZXNjcmliZVVua25vd25FbGVtZW50VHlwZUZyYW1lSW5ERVYoZWxlbWVudC50eXBlLCBvd25lciA/IG93bmVyLnR5cGUgOiBudWxsKTtcbiAgICAgIFJlYWN0RGVidWdDdXJyZW50RnJhbWUuc2V0RXh0cmFTdGFja0ZyYW1lKHN0YWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgUmVhY3REZWJ1Z0N1cnJlbnRGcmFtZS5zZXRFeHRyYVN0YWNrRnJhbWUobnVsbCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldEN1cnJlbnRDb21wb25lbnRFcnJvckluZm8ocGFyZW50VHlwZSkge1xuICB7XG4gICAgdmFyIGluZm8gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKTtcblxuICAgIGlmICghaW5mbykge1xuICAgICAgdmFyIHBhcmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUocGFyZW50VHlwZSk7XG5cbiAgICAgIGlmIChwYXJlbnROYW1lKSB7XG4gICAgICAgIGluZm8gPSBcIlxcblxcbkNoZWNrIHRoZSB0b3AtbGV2ZWwgcmVuZGVyIGNhbGwgdXNpbmcgPFwiICsgcGFyZW50TmFtZSArIFwiPi5cIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5mbztcbiAgfVxufVxuLyoqXG4gKiBHaXZlbiBhIGZyYWdtZW50LCB2YWxpZGF0ZSB0aGF0IGl0IGNhbiBvbmx5IGJlIHByb3ZpZGVkIHdpdGggZnJhZ21lbnQgcHJvcHNcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBmcmFnbWVudFxuICovXG5cblxuZnVuY3Rpb24gdmFsaWRhdGVGcmFnbWVudFByb3BzKGZyYWdtZW50KSB7XG4gIC8vIFRPRE86IE1vdmUgdGhpcyB0byByZW5kZXIgcGhhc2UgaW5zdGVhZCBvZiBhdCBlbGVtZW50IGNyZWF0aW9uLlxuICB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcmFnbWVudC5wcm9wcyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXG4gICAgICBpZiAoa2V5ICE9PSAnY2hpbGRyZW4nICYmIGtleSAhPT0gJ2tleScpIHtcbiAgICAgICAgc2V0Q3VycmVudGx5VmFsaWRhdGluZ0VsZW1lbnQoZnJhZ21lbnQpO1xuXG4gICAgICAgIGVycm9yKCdJbnZhbGlkIHByb3AgYCVzYCBzdXBwbGllZCB0byBgUmVhY3QuRnJhZ21lbnRgLiAnICsgJ1JlYWN0LkZyYWdtZW50IGNhbiBvbmx5IGhhdmUgYGtleWAgYW5kIGBjaGlsZHJlbmAgcHJvcHMuJywga2V5KTtcblxuICAgICAgICBzZXRDdXJyZW50bHlWYWxpZGF0aW5nRWxlbWVudChudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZyYWdtZW50LnJlZiAhPT0gbnVsbCkge1xuICAgICAgc2V0Q3VycmVudGx5VmFsaWRhdGluZ0VsZW1lbnQoZnJhZ21lbnQpO1xuXG4gICAgICBlcnJvcignSW52YWxpZCBhdHRyaWJ1dGUgYHJlZmAgc3VwcGxpZWQgdG8gYFJlYWN0LkZyYWdtZW50YC4nKTtcblxuICAgICAgc2V0Q3VycmVudGx5VmFsaWRhdGluZ0VsZW1lbnQobnVsbCk7XG4gICAgfVxuICB9XG59XG5cbnZhciBqc3hERVYgPSBqc3hERVYkMSA7XG5cbmV4cG9ydHMuRnJhZ21lbnQgPSBSRUFDVF9GUkFHTUVOVF9UWVBFO1xuZXhwb3J0cy5qc3hERVYgPSBqc3hERVY7XG4gIH0pKCk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-dev-runtime.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-dev-runtime.js ***!
  \**********************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/react-jsx-dev-runtime.development.js */ \"(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9uZXh0QDE0LjIuMzNfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL3JlYWN0L2pzeC1kZXYtcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFJLEtBQXFDLEVBQUUsRUFFMUMsQ0FBQztBQUNGLEVBQUUsMFFBQXNFO0FBQ3hFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy8ucG5wbS9uZXh0QDE0LjIuMzNfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL3JlYWN0L2pzeC1kZXYtcnVudGltZS5qcz9jNTFkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUucHJvZHVjdGlvbi5taW4uanMnKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLmRldmVsb3BtZW50LmpzJyk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-dev-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/.pnpm/@uidotdev+usehooks@2.4.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@uidotdev/usehooks/index.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@uidotdev+usehooks@2.4.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@uidotdev/usehooks/index.js ***!
  \******************************************************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useBattery: function() { return /* binding */ useBattery; },\n/* harmony export */   useClickAway: function() { return /* binding */ useClickAway; },\n/* harmony export */   useCopyToClipboard: function() { return /* binding */ useCopyToClipboard; },\n/* harmony export */   useCounter: function() { return /* binding */ useCounter; },\n/* harmony export */   useDebounce: function() { return /* binding */ useDebounce; },\n/* harmony export */   useDefault: function() { return /* binding */ useDefault; },\n/* harmony export */   useDocumentTitle: function() { return /* binding */ useDocumentTitle; },\n/* harmony export */   useFavicon: function() { return /* binding */ useFavicon; },\n/* harmony export */   useGeolocation: function() { return /* binding */ useGeolocation; },\n/* harmony export */   useHistoryState: function() { return /* binding */ useHistoryState; },\n/* harmony export */   useHover: function() { return /* binding */ useHover; },\n/* harmony export */   useIdle: function() { return /* binding */ useIdle; },\n/* harmony export */   useIntersectionObserver: function() { return /* binding */ useIntersectionObserver; },\n/* harmony export */   useIsClient: function() { return /* binding */ useIsClient; },\n/* harmony export */   useIsFirstRender: function() { return /* binding */ useIsFirstRender; },\n/* harmony export */   useList: function() { return /* binding */ useList; },\n/* harmony export */   useLocalStorage: function() { return /* binding */ useLocalStorage; },\n/* harmony export */   useLockBodyScroll: function() { return /* binding */ useLockBodyScroll; },\n/* harmony export */   useLongPress: function() { return /* binding */ useLongPress; },\n/* harmony export */   useMap: function() { return /* binding */ useMap; },\n/* harmony export */   useMeasure: function() { return /* binding */ useMeasure; },\n/* harmony export */   useMediaQuery: function() { return /* binding */ useMediaQuery; },\n/* harmony export */   useMouse: function() { return /* binding */ useMouse; },\n/* harmony export */   useNetworkState: function() { return /* binding */ useNetworkState; },\n/* harmony export */   useObjectState: function() { return /* binding */ useObjectState; },\n/* harmony export */   useOrientation: function() { return /* binding */ useOrientation; },\n/* harmony export */   usePreferredLanguage: function() { return /* binding */ usePreferredLanguage; },\n/* harmony export */   usePrevious: function() { return /* binding */ usePrevious; },\n/* harmony export */   useQueue: function() { return /* binding */ useQueue; },\n/* harmony export */   useRenderCount: function() { return /* binding */ useRenderCount; },\n/* harmony export */   useRenderInfo: function() { return /* binding */ useRenderInfo; },\n/* harmony export */   useScript: function() { return /* binding */ useScript; },\n/* harmony export */   useSessionStorage: function() { return /* binding */ useSessionStorage; },\n/* harmony export */   useSet: function() { return /* binding */ useSet; },\n/* harmony export */   useThrottle: function() { return /* binding */ useThrottle; },\n/* harmony export */   useToggle: function() { return /* binding */ useToggle; },\n/* harmony export */   useVisibilityChange: function() { return /* binding */ useVisibilityChange; },\n/* harmony export */   useWindowScroll: function() { return /* binding */ useWindowScroll; },\n/* harmony export */   useWindowSize: function() { return /* binding */ useWindowSize; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js\");\n\n\nfunction isShallowEqual(object1, object2) {\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n\n  for (let key of keys1) {\n    if (object1[key] !== object2[key]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isTouchEvent({ nativeEvent }) {\n  return window.TouchEvent\n    ? nativeEvent instanceof TouchEvent\n    : \"touches\" in nativeEvent;\n}\n\nfunction isMouseEvent(event) {\n  return event.nativeEvent instanceof MouseEvent;\n}\n\nfunction throttle(cb, ms) {\n  let lastTime = 0;\n  return () => {\n    const now = Date.now();\n    if (now - lastTime >= ms) {\n      cb();\n      lastTime = now;\n    }\n  };\n}\n\nfunction isPlainObject(value) {\n  return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n\nfunction dispatchStorageEvent(key, newValue) {\n  window.dispatchEvent(new StorageEvent(\"storage\", { key, newValue }));\n}\n\nfunction useBattery() {\n  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    supported: true,\n    loading: true,\n    level: null,\n    charging: null,\n    chargingTime: null,\n    dischargingTime: null,\n  });\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!navigator.getBattery) {\n      setState((s) => ({\n        ...s,\n        supported: false,\n        loading: false,\n      }));\n      return;\n    }\n\n    let battery = null;\n\n    const handleChange = () => {\n      setState({\n        supported: true,\n        loading: false,\n        level: battery.level,\n        charging: battery.charging,\n        chargingTime: battery.chargingTime,\n        dischargingTime: battery.dischargingTime,\n      });\n    };\n\n    navigator.getBattery().then((b) => {\n      battery = b;\n      handleChange();\n\n      b.addEventListener(\"levelchange\", handleChange);\n      b.addEventListener(\"chargingchange\", handleChange);\n      b.addEventListener(\"chargingtimechange\", handleChange);\n      b.addEventListener(\"dischargingtimechange\", handleChange);\n    });\n\n    return () => {\n      if (battery) {\n        battery.removeEventListener(\"levelchange\", handleChange);\n        battery.removeEventListener(\"chargingchange\", handleChange);\n        battery.removeEventListener(\"chargingtimechange\", handleChange);\n        battery.removeEventListener(\"dischargingtimechange\", handleChange);\n      }\n    };\n  }, []);\n\n  return state;\n}\n\nfunction useClickAway(cb) {\n  const ref = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  const refCb = react__WEBPACK_IMPORTED_MODULE_0__.useRef(cb);\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    refCb.current = cb;\n  });\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const handler = (e) => {\n      const element = ref.current;\n      if (element && !element.contains(e.target)) {\n        refCb.current(e);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handler);\n    document.addEventListener(\"touchstart\", handler);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handler);\n      document.removeEventListener(\"touchstart\", handler);\n    };\n  }, []);\n\n  return ref;\n}\n\nfunction oldSchoolCopy(text) {\n  const tempTextArea = document.createElement(\"textarea\");\n  tempTextArea.value = text;\n  document.body.appendChild(tempTextArea);\n  tempTextArea.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(tempTextArea);\n}\n\nfunction useCopyToClipboard() {\n  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n\n  const copyToClipboard = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((value) => {\n    const handleCopy = async () => {\n      try {\n        if (navigator?.clipboard?.writeText) {\n          await navigator.clipboard.writeText(value);\n          setState(value);\n        } else {\n          throw new Error(\"writeText not supported\");\n        }\n      } catch (e) {\n        oldSchoolCopy(value);\n        setState(value);\n      }\n    };\n\n    handleCopy();\n  }, []);\n\n  return [state, copyToClipboard];\n}\n\nfunction useCounter(startingValue = 0, options = {}) {\n  const { min, max } = options;\n\n  if (typeof min === \"number\" && startingValue < min) {\n    throw new Error(\n      `Your starting value of ${startingValue} is less than your min of ${min}.`\n    );\n  }\n\n  if (typeof max === \"number\" && startingValue > max) {\n    throw new Error(\n      `Your starting value of ${startingValue} is greater than your max of ${max}.`\n    );\n  }\n\n  const [count, setCount] = react__WEBPACK_IMPORTED_MODULE_0__.useState(startingValue);\n\n  const increment = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setCount((c) => {\n      const nextCount = c + 1;\n\n      if (typeof max === \"number\" && nextCount > max) {\n        return c;\n      }\n\n      return nextCount;\n    });\n  }, [max]);\n\n  const decrement = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setCount((c) => {\n      const nextCount = c - 1;\n\n      if (typeof min === \"number\" && nextCount < min) {\n        return c;\n      }\n\n      return nextCount;\n    });\n  }, [min]);\n\n  const set = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (nextCount) => {\n      setCount((c) => {\n        if (typeof max === \"number\" && nextCount > max) {\n          return c;\n        }\n\n        if (typeof min === \"number\" && nextCount < min) {\n          return c;\n        }\n\n        return nextCount;\n      });\n    },\n    [max, min]\n  );\n\n  const reset = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setCount(startingValue);\n  }, [startingValue]);\n\n  return [\n    count,\n    {\n      increment,\n      decrement,\n      set,\n      reset,\n    },\n  ];\n}\n\nfunction useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = react__WEBPACK_IMPORTED_MODULE_0__.useState(value);\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nfunction useDefault(initialValue, defaultValue) {\n  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialValue);\n\n  if (typeof state === \"undefined\" || state === null) {\n    return [defaultValue, setState];\n  }\n\n  return [state, setState];\n}\n\nfunction useDocumentTitle(title) {\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    document.title = title;\n  }, [title]);\n}\n\nfunction useFavicon(url) {\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let link = document.querySelector(`link[rel~=\"icon\"]`);\n\n    if (!link) {\n      link = document.createElement(\"link\");\n      link.type = \"image/x-icon\";\n      link.rel = \"icon\";\n      link.href = url;\n      document.head.appendChild(link);\n    } else {\n      link.href = url;\n    }\n  }, [url]);\n}\n\nfunction useGeolocation(options = {}) {\n  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    loading: true,\n    accuracy: null,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    latitude: null,\n    longitude: null,\n    speed: null,\n    timestamp: null,\n    error: null,\n  });\n\n  const optionsRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(options);\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const onEvent = ({ coords, timestamp }) => {\n      setState({\n        loading: false,\n        timestamp,\n        latitude: coords.latitude,\n        longitude: coords.longitude,\n        altitude: coords.altitude,\n        accuracy: coords.accuracy,\n        altitudeAccuracy: coords.altitudeAccuracy,\n        heading: coords.heading,\n        speed: coords.speed,\n      });\n    };\n\n    const onEventError = (error) => {\n      setState((s) => ({\n        ...s,\n        loading: false,\n        error,\n      }));\n    };\n\n    navigator.geolocation.getCurrentPosition(\n      onEvent,\n      onEventError,\n      optionsRef.current\n    );\n\n    const watchId = navigator.geolocation.watchPosition(\n      onEvent,\n      onEventError,\n      optionsRef.current\n    );\n\n    return () => {\n      navigator.geolocation.clearWatch(watchId);\n    };\n  }, []);\n\n  return state;\n}\n\nconst initialUseHistoryStateState = {\n  past: [],\n  present: null,\n  future: [],\n};\n\nconst useHistoryStateReducer = (state, action) => {\n  const { past, present, future } = state;\n\n  if (action.type === \"UNDO\") {\n    return {\n      past: past.slice(0, past.length - 1),\n      present: past[past.length - 1],\n      future: [present, ...future],\n    };\n  } else if (action.type === \"REDO\") {\n    return {\n      past: [...past, present],\n      present: future[0],\n      future: future.slice(1),\n    };\n  } else if (action.type === \"SET\") {\n    const { newPresent } = action;\n\n    if (action.newPresent === present) {\n      return state;\n    }\n\n    return {\n      past: [...past, present],\n      present: newPresent,\n      future: [],\n    };\n  } else if (action.type === \"CLEAR\") {\n    return {\n      ...initialUseHistoryStateState,\n      present: action.initialPresent,\n    };\n  } else {\n    throw new Error(\"Unsupported action type\");\n  }\n};\n\nfunction useHistoryState(initialPresent = {}) {\n  const initialPresentRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(initialPresent);\n\n  const [state, dispatch] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer(useHistoryStateReducer, {\n    ...initialUseHistoryStateState,\n    present: initialPresentRef.current,\n  });\n\n  const canUndo = state.past.length !== 0;\n  const canRedo = state.future.length !== 0;\n\n  const undo = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (canUndo) {\n      dispatch({ type: \"UNDO\" });\n    }\n  }, [canUndo]);\n\n  const redo = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (canRedo) {\n      dispatch({ type: \"REDO\" });\n    }\n  }, [canRedo]);\n\n  const set = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (newPresent) => dispatch({ type: \"SET\", newPresent }),\n    []\n  );\n\n  const clear = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    () =>\n      dispatch({ type: \"CLEAR\", initialPresent: initialPresentRef.current }),\n    []\n  );\n\n  return { state: state.present, set, undo, redo, clear, canUndo, canRedo };\n}\n\nfunction useHover() {\n  const [hovering, setHovering] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const previousNode = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n\n  const handleMouseEnter = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setHovering(true);\n  }, []);\n\n  const handleMouseLeave = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setHovering(false);\n  }, []);\n\n  const customRef = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (node) => {\n      if (previousNode.current?.nodeType === Node.ELEMENT_NODE) {\n        previousNode.current.removeEventListener(\n          \"mouseenter\",\n          handleMouseEnter\n        );\n        previousNode.current.removeEventListener(\n          \"mouseleave\",\n          handleMouseLeave\n        );\n      }\n\n      if (node?.nodeType === Node.ELEMENT_NODE) {\n        node.addEventListener(\"mouseenter\", handleMouseEnter);\n        node.addEventListener(\"mouseleave\", handleMouseLeave);\n      }\n\n      previousNode.current = node;\n    },\n    [handleMouseEnter, handleMouseLeave]\n  );\n\n  return [customRef, hovering];\n}\n\nfunction useIdle(ms = 1000 * 60) {\n  const [idle, setIdle] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let timeoutId;\n\n    const handleTimeout = () => {\n      setIdle(true);\n    };\n\n    const handleEvent = throttle((e) => {\n      setIdle(false);\n\n      window.clearTimeout(timeoutId);\n      timeoutId = window.setTimeout(handleTimeout, ms);\n    }, 500);\n\n    const handleVisibilityChange = () => {\n      if (!document.hidden) {\n        handleEvent();\n      }\n    };\n\n    timeoutId = window.setTimeout(handleTimeout, ms);\n\n    window.addEventListener(\"mousemove\", handleEvent);\n    window.addEventListener(\"mousedown\", handleEvent);\n    window.addEventListener(\"resize\", handleEvent);\n    window.addEventListener(\"keydown\", handleEvent);\n    window.addEventListener(\"touchstart\", handleEvent);\n    window.addEventListener(\"wheel\", handleEvent);\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n    return () => {\n      window.removeEventListener(\"mousemove\", handleEvent);\n      window.removeEventListener(\"mousedown\", handleEvent);\n      window.removeEventListener(\"resize\", handleEvent);\n      window.removeEventListener(\"keydown\", handleEvent);\n      window.removeEventListener(\"touchstart\", handleEvent);\n      window.removeEventListener(\"wheel\", handleEvent);\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n      window.clearTimeout(timeoutId);\n    };\n  }, [ms]);\n\n  return idle;\n}\n\nfunction useIntersectionObserver(options = {}) {\n  const { threshold = 1, root = null, rootMargin = \"0px\" } = options;\n  const [entry, setEntry] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n\n  const previousObserver = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n\n  const customRef = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (node) => {\n      if (previousObserver.current) {\n        previousObserver.current.disconnect();\n        previousObserver.current = null;\n      }\n\n      if (node?.nodeType === Node.ELEMENT_NODE) {\n        const observer = new IntersectionObserver(\n          ([entry]) => {\n            setEntry(entry);\n          },\n          { threshold, root, rootMargin }\n        );\n\n        observer.observe(node);\n        previousObserver.current = observer;\n      }\n    },\n    [threshold, root, rootMargin]\n  );\n\n  return [customRef, entry];\n}\n\nfunction useIsClient() {\n  const [isClient, setIsClient] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  return isClient;\n}\n\nfunction useIsFirstRender() {\n  const renderRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(true);\n\n  if (renderRef.current === true) {\n    renderRef.current = false;\n    return true;\n  }\n\n  return renderRef.current;\n}\n\nfunction useList(defaultList = []) {\n  const [list, setList] = react__WEBPACK_IMPORTED_MODULE_0__.useState(defaultList);\n\n  const set = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((l) => {\n    setList(l);\n  }, []);\n\n  const push = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((element) => {\n    setList((l) => [...l, element]);\n  }, []);\n\n  const removeAt = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((index) => {\n    setList((l) => [...l.slice(0, index), ...l.slice(index + 1)]);\n  }, []);\n\n  const insertAt = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((index, element) => {\n    setList((l) => [...l.slice(0, index), element, ...l.slice(index)]);\n  }, []);\n\n  const updateAt = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((index, element) => {\n    setList((l) => l.map((e, i) => (i === index ? element : e)));\n  }, []);\n\n  const clear = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => setList([]), []);\n\n  return [list, { set, push, removeAt, insertAt, updateAt, clear }];\n}\n\nconst setLocalStorageItem = (key, value) => {\n  const stringifiedValue = JSON.stringify(value);\n  window.localStorage.setItem(key, stringifiedValue);\n  dispatchStorageEvent(key, stringifiedValue);\n};\n\nconst removeLocalStorageItem = (key) => {\n  window.localStorage.removeItem(key);\n  dispatchStorageEvent(key, null);\n};\n\nconst getLocalStorageItem = (key) => {\n  return window.localStorage.getItem(key);\n};\n\nconst useLocalStorageSubscribe = (callback) => {\n  window.addEventListener(\"storage\", callback);\n  return () => window.removeEventListener(\"storage\", callback);\n};\n\nconst getLocalStorageServerSnapshot = () => {\n  throw Error(\"useLocalStorage is a client-only hook\");\n};\n\nfunction useLocalStorage(key, initialValue) {\n  const getSnapshot = () => getLocalStorageItem(key);\n\n  const store = react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore(\n    useLocalStorageSubscribe,\n    getSnapshot,\n    getLocalStorageServerSnapshot\n  );\n\n  const setState = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (v) => {\n      try {\n        const nextState = typeof v === \"function\" ? v(JSON.parse(store)) : v;\n\n        if (nextState === undefined || nextState === null) {\n          removeLocalStorageItem(key);\n        } else {\n          setLocalStorageItem(key, nextState);\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    [key, store]\n  );\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (\n      getLocalStorageItem(key) === null &&\n      typeof initialValue !== \"undefined\"\n    ) {\n      setLocalStorageItem(key, initialValue);\n    }\n  }, [key, initialValue]);\n\n  return [store ? JSON.parse(store) : initialValue, setState];\n}\n\nfunction useLockBodyScroll() {\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    const originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = \"hidden\";\n    return () => {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n}\n\nfunction useLongPress(callback, options = {}) {\n  const { threshold = 400, onStart, onFinish, onCancel } = options;\n  const isLongPressActive = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false);\n  const isPressed = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false);\n  const timerId = react__WEBPACK_IMPORTED_MODULE_0__.useRef();\n\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (typeof callback !== \"function\") {\n      return {};\n    }\n\n    const start = (event) => {\n      if (!isMouseEvent(event) && !isTouchEvent(event)) return;\n\n      if (onStart) {\n        onStart(event);\n      }\n\n      isPressed.current = true;\n      timerId.current = setTimeout(() => {\n        callback(event);\n        isLongPressActive.current = true;\n      }, threshold);\n    };\n\n    const cancel = (event) => {\n      if (!isMouseEvent(event) && !isTouchEvent(event)) return;\n\n      if (isLongPressActive.current) {\n        if (onFinish) {\n          onFinish(event);\n        }\n      } else if (isPressed.current) {\n        if (onCancel) {\n          onCancel(event);\n        }\n      }\n\n      isLongPressActive.current = false;\n      isPressed.current = false;\n\n      if (timerId.current) {\n        window.clearTimeout(timerId.current);\n      }\n    };\n\n    const mouseHandlers = {\n      onMouseDown: start,\n      onMouseUp: cancel,\n      onMouseLeave: cancel,\n    };\n\n    const touchHandlers = {\n      onTouchStart: start,\n      onTouchEnd: cancel,\n    };\n\n    return {\n      ...mouseHandlers,\n      ...touchHandlers,\n    };\n  }, [callback, threshold, onCancel, onFinish, onStart]);\n}\n\nfunction useMap(initialState) {\n  const mapRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(new Map(initialState));\n  const [, reRender] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer((x) => x + 1, 0);\n\n  mapRef.current.set = (...args) => {\n    Map.prototype.set.apply(mapRef.current, args);\n    reRender();\n    return mapRef.current;\n  };\n\n  mapRef.current.clear = (...args) => {\n    Map.prototype.clear.apply(mapRef.current, args);\n    reRender();\n  };\n\n  mapRef.current.delete = (...args) => {\n    const res = Map.prototype.delete.apply(mapRef.current, args);\n    reRender();\n\n    return res;\n  };\n\n  return mapRef.current;\n}\n\nfunction useMeasure() {\n  const [dimensions, setDimensions] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    width: null,\n    height: null,\n  });\n\n  const previousObserver = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n\n  const customRef = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((node) => {\n    if (previousObserver.current) {\n      previousObserver.current.disconnect();\n      previousObserver.current = null;\n    }\n\n    if (node?.nodeType === Node.ELEMENT_NODE) {\n      const observer = new ResizeObserver(([entry]) => {\n        if (entry && entry.borderBoxSize) {\n          const { inlineSize: width, blockSize: height } =\n            entry.borderBoxSize[0];\n\n          setDimensions({ width, height });\n        }\n      });\n\n      observer.observe(node);\n      previousObserver.current = observer;\n    }\n  }, []);\n\n  return [customRef, dimensions];\n}\n\nfunction useMediaQuery(query) {\n  const subscribe = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (callback) => {\n      const matchMedia = window.matchMedia(query);\n\n      matchMedia.addEventListener(\"change\", callback);\n      return () => {\n        matchMedia.removeEventListener(\"change\", callback);\n      };\n    },\n    [query]\n  );\n\n  const getSnapshot = () => {\n    return window.matchMedia(query).matches;\n  };\n\n  const getServerSnapshot = () => {\n    throw Error(\"useMediaQuery is a client-only hook\");\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot);\n}\n\nfunction useMouse() {\n  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    x: 0,\n    y: 0,\n    elementX: 0,\n    elementY: 0,\n    elementPositionX: 0,\n    elementPositionY: 0,\n  });\n\n  const ref = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    const handleMouseMove = (event) => {\n      let newState = {\n        x: event.pageX,\n        y: event.pageY,\n      };\n\n      if (ref.current?.nodeType === Node.ELEMENT_NODE) {\n        const { left, top } = ref.current.getBoundingClientRect();\n        const elementPositionX = left + window.scrollX;\n        const elementPositionY = top + window.scrollY;\n        const elementX = event.pageX - elementPositionX;\n        const elementY = event.pageY - elementPositionY;\n\n        newState.elementX = elementX;\n        newState.elementY = elementY;\n        newState.elementPositionX = elementPositionX;\n        newState.elementPositionY = elementPositionY;\n      }\n\n      setState((s) => {\n        return {\n          ...s,\n          ...newState,\n        };\n      });\n    };\n\n    document.addEventListener(\"mousemove\", handleMouseMove);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  }, []);\n\n  return [state, ref];\n}\n\nconst getConnection = () => {\n  return (\n    navigator?.connection ||\n    navigator?.mozConnection ||\n    navigator?.webkitConnection\n  );\n};\n\nconst useNetworkStateSubscribe = (callback) => {\n  window.addEventListener(\"online\", callback, { passive: true });\n  window.addEventListener(\"offline\", callback, { passive: true });\n\n  const connection = getConnection();\n\n  if (connection) {\n    connection.addEventListener(\"change\", callback, { passive: true });\n  }\n\n  return () => {\n    window.removeEventListener(\"online\", callback);\n    window.removeEventListener(\"offline\", callback);\n\n    if (connection) {\n      connection.removeEventListener(\"change\", callback);\n    }\n  };\n};\n\nconst getNetworkStateServerSnapshot = () => {\n  throw Error(\"useNetworkState is a client-only hook\");\n};\n\nfunction useNetworkState() {\n  const cache = react__WEBPACK_IMPORTED_MODULE_0__.useRef({});\n\n  const getSnapshot = () => {\n    const online = navigator.onLine;\n    const connection = getConnection();\n\n    const nextState = {\n      online,\n      downlink: connection?.downlink,\n      downlinkMax: connection?.downlinkMax,\n      effectiveType: connection?.effectiveType,\n      rtt: connection?.rtt,\n      saveData: connection?.saveData,\n      type: connection?.type,\n    };\n\n    if (isShallowEqual(cache.current, nextState)) {\n      return cache.current;\n    } else {\n      cache.current = nextState;\n      return nextState;\n    }\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore(\n    useNetworkStateSubscribe,\n    getSnapshot,\n    getNetworkStateServerSnapshot\n  );\n}\n\nfunction useObjectState(initialValue) {\n  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialValue);\n\n  const handleUpdate = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((arg) => {\n    if (typeof arg === \"function\") {\n      setState((s) => {\n        const newState = arg(s);\n\n        if (isPlainObject(newState)) {\n          return {\n            ...s,\n            ...newState,\n          };\n        }\n      });\n    }\n\n    if (isPlainObject(arg)) {\n      setState((s) => ({\n        ...s,\n        ...arg,\n      }));\n    }\n  }, []);\n\n  return [state, handleUpdate];\n}\n\nfunction useOrientation() {\n  const [orientation, setOrientation] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    angle: 0,\n    type: \"landscape-primary\",\n  });\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    const handleChange = () => {\n      const { angle, type } = window.screen.orientation;\n      setOrientation({\n        angle,\n        type,\n      });\n    };\n\n    const handle_orientationchange = () => {\n      setOrientation({\n        type: \"UNKNOWN\",\n        angle: window.orientation,\n      });\n    };\n\n    if (window.screen?.orientation) {\n      handleChange();\n      window.screen.orientation.addEventListener(\"change\", handleChange);\n    } else {\n      handle_orientationchange();\n      window.addEventListener(\"orientationchange\", handle_orientationchange);\n    }\n\n    return () => {\n      if (window.screen?.orientation) {\n        window.screen.orientation.removeEventListener(\"change\", handleChange);\n      } else {\n        window.removeEventListener(\n          \"orientationchange\",\n          handle_orientationchange\n        );\n      }\n    };\n  }, []);\n\n  return orientation;\n}\n\nconst usePreferredLanguageSubscribe = (cb) => {\n  window.addEventListener(\"languagechange\", cb);\n  return () => window.removeEventListener(\"languagechange\", cb);\n};\n\nconst getPreferredLanguageSnapshot = () => {\n  return navigator.language;\n};\n\nconst getPreferredLanguageServerSnapshot = () => {\n  throw Error(\"usePreferredLanguage is a client-only hook\");\n};\n\nfunction usePreferredLanguage() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore(\n    usePreferredLanguageSubscribe,\n    getPreferredLanguageSnapshot,\n    getPreferredLanguageServerSnapshot\n  );\n}\n\nfunction usePrevious(value) {\n  const [current, setCurrent] = react__WEBPACK_IMPORTED_MODULE_0__.useState(value);\n  const [previous, setPrevious] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n\n  if (value !== current) {\n    setPrevious(current);\n    setCurrent(value);\n  }\n\n  return previous;\n}\n\nfunction useQueue(initialValue = []) {\n  const [queue, setQueue] = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialValue);\n\n  const add = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((element) => {\n    setQueue((q) => [...q, element]);\n  }, []);\n\n  const remove = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    let removedElement;\n\n    setQueue(([first, ...q]) => {\n      removedElement = first;\n      return q;\n    });\n\n    return removedElement;\n  }, []);\n\n  const clear = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setQueue([]);\n  }, []);\n\n  return {\n    add,\n    remove,\n    clear,\n    first: queue[0],\n    last: queue[queue.length - 1],\n    size: queue.length,\n    queue,\n  };\n}\n\nfunction useRenderCount() {\n  const count = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0);\n\n  count.current++;\n\n  return count.current;\n}\n\nfunction useRenderInfo(name = \"Unknown\") {\n  const count = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0);\n  const lastRender = react__WEBPACK_IMPORTED_MODULE_0__.useRef();\n  const now = Date.now();\n\n  count.current++;\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    lastRender.current = Date.now();\n  });\n\n  const sinceLastRender = lastRender.current ? now - lastRender.current : 0;\n\n  if (true) {\n    const info = {\n      name,\n      renders: count.current,\n      sinceLastRender,\n      timestamp: now,\n    };\n\n    console.log(info);\n\n    return info;\n  }\n}\n\nfunction useScript(src, options = {}) {\n  const [status, setStatus] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\"loading\");\n  const optionsRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(options);\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let script = document.querySelector(`script[src=\"${src}\"]`);\n\n    const domStatus = script?.getAttribute(\"data-status\");\n    if (domStatus) {\n      setStatus(domStatus);\n      return;\n    }\n\n    if (script === null) {\n      script = document.createElement(\"script\");\n      script.src = src;\n      script.async = true;\n      script.setAttribute(\"data-status\", \"loading\");\n      document.body.appendChild(script);\n\n      const handleScriptLoad = () => {\n        script.setAttribute(\"data-status\", \"ready\");\n        setStatus(\"ready\");\n        removeEventListeners();\n      };\n\n      const handleScriptError = () => {\n        script.setAttribute(\"data-status\", \"error\");\n        setStatus(\"error\");\n        removeEventListeners();\n      };\n\n      const removeEventListeners = () => {\n        script.removeEventListener(\"load\", handleScriptLoad);\n        script.removeEventListener(\"error\", handleScriptError);\n      };\n\n      script.addEventListener(\"load\", handleScriptLoad);\n      script.addEventListener(\"error\", handleScriptError);\n\n      const removeOnUnmount = optionsRef.current.removeOnUnmount;\n\n      return () => {\n        if (removeOnUnmount === true) {\n          script.remove();\n          removeEventListeners();\n        }\n      };\n    } else {\n      setStatus(\"unknown\");\n    }\n  }, [src]);\n\n  return status;\n}\n\nconst setSessionStorageItem = (key, value) => {\n  const stringifiedValue = JSON.stringify(value);\n  window.sessionStorage.setItem(key, stringifiedValue);\n  dispatchStorageEvent(key, stringifiedValue);\n};\n\nconst removeSessionStorageItem = (key) => {\n  window.sessionStorage.removeItem(key);\n  dispatchStorageEvent(key, null);\n};\n\nconst getSessionStorageItem = (key) => {\n  return window.sessionStorage.getItem(key);\n};\n\nconst useSessionStorageSubscribe = (callback) => {\n  window.addEventListener(\"storage\", callback);\n  return () => window.removeEventListener(\"storage\", callback);\n};\n\nconst getSessionStorageServerSnapshot = () => {\n  throw Error(\"useSessionStorage is a client-only hook\");\n};\n\nfunction useSessionStorage(key, initialValue) {\n  const getSnapshot = () => getSessionStorageItem(key);\n\n  const store = react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore(\n    useSessionStorageSubscribe,\n    getSnapshot,\n    getSessionStorageServerSnapshot\n  );\n\n  const setState = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (v) => {\n      try {\n        const nextState = typeof v === \"function\" ? v(JSON.parse(store)) : v;\n\n        if (nextState === undefined || nextState === null) {\n          removeSessionStorageItem(key);\n        } else {\n          setSessionStorageItem(key, nextState);\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    [key, store]\n  );\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (\n      getSessionStorageItem(key) === null &&\n      typeof initialValue !== \"undefined\"\n    ) {\n      setSessionStorageItem(key, initialValue);\n    }\n  }, [key, initialValue]);\n\n  return [store ? JSON.parse(store) : initialValue, setState];\n}\n\nfunction useSet(values) {\n  const setRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(new Set(values));\n  const [, reRender] = react__WEBPACK_IMPORTED_MODULE_0__.useReducer((x) => x + 1, 0);\n\n  setRef.current.add = (...args) => {\n    const res = Set.prototype.add.apply(setRef.current, args);\n    reRender();\n\n    return res;\n  };\n\n  setRef.current.clear = (...args) => {\n    Set.prototype.clear.apply(setRef.current, args);\n    reRender();\n  };\n\n  setRef.current.delete = (...args) => {\n    const res = Set.prototype.delete.apply(setRef.current, args);\n    reRender();\n\n    return res;\n  };\n\n  return setRef.current;\n}\n\nfunction useThrottle(value, interval = 500) {\n  const [throttledValue, setThrottledValue] = react__WEBPACK_IMPORTED_MODULE_0__.useState(value);\n  const lastUpdated = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const now = Date.now();\n\n    if (lastUpdated.current && now >= lastUpdated.current + interval) {\n      lastUpdated.current = now;\n      setThrottledValue(value);\n    } else {\n      const id = window.setTimeout(() => {\n        lastUpdated.current = now;\n        setThrottledValue(value);\n      }, interval);\n\n      return () => window.clearTimeout(id);\n    }\n  }, [value, interval]);\n\n  return throttledValue;\n}\n\nfunction useToggle(initialValue) {\n  const [on, setOn] = react__WEBPACK_IMPORTED_MODULE_0__.useState(() => {\n    if (typeof initialValue === \"boolean\") {\n      return initialValue;\n    }\n\n    return Boolean(initialValue);\n  });\n\n  const handleToggle = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((value) => {\n    if (typeof value === \"boolean\") {\n      return setOn(value);\n    }\n\n    return setOn((v) => !v);\n  }, []);\n\n  return [on, handleToggle];\n}\n\nconst useVisibilityChangeSubscribe = (callback) => {\n  document.addEventListener(\"visibilitychange\", callback);\n\n  return () => {\n    document.removeEventListener(\"visibilitychange\", callback);\n  };\n};\n\nconst getVisibilityChangeSnapshot = () => {\n  return document.visibilityState;\n};\n\nconst getVisibilityChangeServerSnapshot = () => {\n  throw Error(\"useVisibilityChange is a client-only hook\");\n};\n\nfunction useVisibilityChange() {\n  const visibilityState = react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore(\n    useVisibilityChangeSubscribe,\n    getVisibilityChangeSnapshot,\n    getVisibilityChangeServerSnapshot\n  );\n\n  return visibilityState === \"visible\";\n}\n\nfunction useWindowScroll() {\n  const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    x: null,\n    y: null,\n  });\n\n  const scrollTo = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((...args) => {\n    if (typeof args[0] === \"object\") {\n      window.scrollTo(args[0]);\n    } else if (typeof args[0] === \"number\" && typeof args[1] === \"number\") {\n      window.scrollTo(args[0], args[1]);\n    } else {\n      throw new Error(\n        `Invalid arguments passed to scrollTo. See here for more info. https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo`\n      );\n    }\n  }, []);\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    const handleScroll = () => {\n      setState({ x: window.scrollX, y: window.scrollY });\n    };\n\n    handleScroll();\n    window.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n\n  return [state, scrollTo];\n}\n\nfunction useWindowSize() {\n  const [size, setSize] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    width: null,\n    height: null,\n  });\n\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  return size;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AdWlkb3RkZXYrdXNlaG9va3NAMi40LjFfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvQHVpZG90ZGV2L3VzZWhvb2tzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0I7O0FBRS9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QixhQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxREFBcUQsZUFBZTtBQUNwRTs7QUFFTztBQUNQLDRCQUE0QiwyQ0FBYztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUUsNENBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVPO0FBQ1AsY0FBYyx5Q0FBWTtBQUMxQixnQkFBZ0IseUNBQVk7O0FBRTVCLEVBQUUsa0RBQXFCO0FBQ3ZCO0FBQ0EsR0FBRzs7QUFFSCxFQUFFLDRDQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7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OztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVPO0FBQ1AsMEJBQTBCLDJDQUFjO0FBQ3hDO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUUsa0RBQXFCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AdWlkb3RkZXYrdXNlaG9va3NAMi40LjFfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvQHVpZG90ZGV2L3VzZWhvb2tzL2luZGV4LmpzPzJiNTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmZ1bmN0aW9uIGlzU2hhbGxvd0VxdWFsKG9iamVjdDEsIG9iamVjdDIpIHtcbiAgY29uc3Qga2V5czEgPSBPYmplY3Qua2V5cyhvYmplY3QxKTtcbiAgY29uc3Qga2V5czIgPSBPYmplY3Qua2V5cyhvYmplY3QyKTtcblxuICBpZiAoa2V5czEubGVuZ3RoICE9PSBrZXlzMi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmb3IgKGxldCBrZXkgb2Yga2V5czEpIHtcbiAgICBpZiAob2JqZWN0MVtrZXldICE9PSBvYmplY3QyW2tleV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNUb3VjaEV2ZW50KHsgbmF0aXZlRXZlbnQgfSkge1xuICByZXR1cm4gd2luZG93LlRvdWNoRXZlbnRcbiAgICA/IG5hdGl2ZUV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudFxuICAgIDogXCJ0b3VjaGVzXCIgaW4gbmF0aXZlRXZlbnQ7XG59XG5cbmZ1bmN0aW9uIGlzTW91c2VFdmVudChldmVudCkge1xuICByZXR1cm4gZXZlbnQubmF0aXZlRXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50O1xufVxuXG5mdW5jdGlvbiB0aHJvdHRsZShjYiwgbXMpIHtcbiAgbGV0IGxhc3RUaW1lID0gMDtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmIChub3cgLSBsYXN0VGltZSA+PSBtcykge1xuICAgICAgY2IoKTtcbiAgICAgIGxhc3RUaW1lID0gbm93O1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIjtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hTdG9yYWdlRXZlbnQoa2V5LCBuZXdWYWx1ZSkge1xuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgU3RvcmFnZUV2ZW50KFwic3RvcmFnZVwiLCB7IGtleSwgbmV3VmFsdWUgfSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQmF0dGVyeSgpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSBSZWFjdC51c2VTdGF0ZSh7XG4gICAgc3VwcG9ydGVkOiB0cnVlLFxuICAgIGxvYWRpbmc6IHRydWUsXG4gICAgbGV2ZWw6IG51bGwsXG4gICAgY2hhcmdpbmc6IG51bGwsXG4gICAgY2hhcmdpbmdUaW1lOiBudWxsLFxuICAgIGRpc2NoYXJnaW5nVGltZTogbnVsbCxcbiAgfSk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW5hdmlnYXRvci5nZXRCYXR0ZXJ5KSB7XG4gICAgICBzZXRTdGF0ZSgocykgPT4gKHtcbiAgICAgICAgLi4ucyxcbiAgICAgICAgc3VwcG9ydGVkOiBmYWxzZSxcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICB9KSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGJhdHRlcnkgPSBudWxsO1xuXG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICBzdXBwb3J0ZWQ6IHRydWUsXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsZXZlbDogYmF0dGVyeS5sZXZlbCxcbiAgICAgICAgY2hhcmdpbmc6IGJhdHRlcnkuY2hhcmdpbmcsXG4gICAgICAgIGNoYXJnaW5nVGltZTogYmF0dGVyeS5jaGFyZ2luZ1RpbWUsXG4gICAgICAgIGRpc2NoYXJnaW5nVGltZTogYmF0dGVyeS5kaXNjaGFyZ2luZ1RpbWUsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgbmF2aWdhdG9yLmdldEJhdHRlcnkoKS50aGVuKChiKSA9PiB7XG4gICAgICBiYXR0ZXJ5ID0gYjtcbiAgICAgIGhhbmRsZUNoYW5nZSgpO1xuXG4gICAgICBiLmFkZEV2ZW50TGlzdGVuZXIoXCJsZXZlbGNoYW5nZVwiLCBoYW5kbGVDaGFuZ2UpO1xuICAgICAgYi5hZGRFdmVudExpc3RlbmVyKFwiY2hhcmdpbmdjaGFuZ2VcIiwgaGFuZGxlQ2hhbmdlKTtcbiAgICAgIGIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYXJnaW5ndGltZWNoYW5nZVwiLCBoYW5kbGVDaGFuZ2UpO1xuICAgICAgYi5hZGRFdmVudExpc3RlbmVyKFwiZGlzY2hhcmdpbmd0aW1lY2hhbmdlXCIsIGhhbmRsZUNoYW5nZSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGJhdHRlcnkpIHtcbiAgICAgICAgYmF0dGVyeS5yZW1vdmVFdmVudExpc3RlbmVyKFwibGV2ZWxjaGFuZ2VcIiwgaGFuZGxlQ2hhbmdlKTtcbiAgICAgICAgYmF0dGVyeS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhcmdpbmdjaGFuZ2VcIiwgaGFuZGxlQ2hhbmdlKTtcbiAgICAgICAgYmF0dGVyeS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhcmdpbmd0aW1lY2hhbmdlXCIsIGhhbmRsZUNoYW5nZSk7XG4gICAgICAgIGJhdHRlcnkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc2NoYXJnaW5ndGltZWNoYW5nZVwiLCBoYW5kbGVDaGFuZ2UpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4gc3RhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDbGlja0F3YXkoY2IpIHtcbiAgY29uc3QgcmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBjb25zdCByZWZDYiA9IFJlYWN0LnVzZVJlZihjYik7XG5cbiAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICByZWZDYi5jdXJyZW50ID0gY2I7XG4gIH0pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlciA9IChlKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gcmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgcmVmQ2IuY3VycmVudChlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVyKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVyKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZXIpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlcik7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiByZWY7XG59XG5cbmZ1bmN0aW9uIG9sZFNjaG9vbENvcHkodGV4dCkge1xuICBjb25zdCB0ZW1wVGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG4gIHRlbXBUZXh0QXJlYS52YWx1ZSA9IHRleHQ7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGVtcFRleHRBcmVhKTtcbiAgdGVtcFRleHRBcmVhLnNlbGVjdCgpO1xuICBkb2N1bWVudC5leGVjQ29tbWFuZChcImNvcHlcIik7XG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGVtcFRleHRBcmVhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvcHlUb0NsaXBib2FyZCgpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSBSZWFjdC51c2VTdGF0ZShudWxsKTtcblxuICBjb25zdCBjb3B5VG9DbGlwYm9hcmQgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDb3B5ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKG5hdmlnYXRvcj8uY2xpcGJvYXJkPy53cml0ZVRleHQpIHtcbiAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh2YWx1ZSk7XG4gICAgICAgICAgc2V0U3RhdGUodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIndyaXRlVGV4dCBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIG9sZFNjaG9vbENvcHkodmFsdWUpO1xuICAgICAgICBzZXRTdGF0ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGhhbmRsZUNvcHkoKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbc3RhdGUsIGNvcHlUb0NsaXBib2FyZF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb3VudGVyKHN0YXJ0aW5nVmFsdWUgPSAwLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgeyBtaW4sIG1heCB9ID0gb3B0aW9ucztcblxuICBpZiAodHlwZW9mIG1pbiA9PT0gXCJudW1iZXJcIiAmJiBzdGFydGluZ1ZhbHVlIDwgbWluKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFlvdXIgc3RhcnRpbmcgdmFsdWUgb2YgJHtzdGFydGluZ1ZhbHVlfSBpcyBsZXNzIHRoYW4geW91ciBtaW4gb2YgJHttaW59LmBcbiAgICApO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIgJiYgc3RhcnRpbmdWYWx1ZSA+IG1heCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBZb3VyIHN0YXJ0aW5nIHZhbHVlIG9mICR7c3RhcnRpbmdWYWx1ZX0gaXMgZ3JlYXRlciB0aGFuIHlvdXIgbWF4IG9mICR7bWF4fS5gXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IFtjb3VudCwgc2V0Q291bnRdID0gUmVhY3QudXNlU3RhdGUoc3RhcnRpbmdWYWx1ZSk7XG5cbiAgY29uc3QgaW5jcmVtZW50ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldENvdW50KChjKSA9PiB7XG4gICAgICBjb25zdCBuZXh0Q291bnQgPSBjICsgMTtcblxuICAgICAgaWYgKHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIgJiYgbmV4dENvdW50ID4gbWF4KSB7XG4gICAgICAgIHJldHVybiBjO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV4dENvdW50O1xuICAgIH0pO1xuICB9LCBbbWF4XSk7XG5cbiAgY29uc3QgZGVjcmVtZW50ID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldENvdW50KChjKSA9PiB7XG4gICAgICBjb25zdCBuZXh0Q291bnQgPSBjIC0gMTtcblxuICAgICAgaWYgKHR5cGVvZiBtaW4gPT09IFwibnVtYmVyXCIgJiYgbmV4dENvdW50IDwgbWluKSB7XG4gICAgICAgIHJldHVybiBjO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV4dENvdW50O1xuICAgIH0pO1xuICB9LCBbbWluXSk7XG5cbiAgY29uc3Qgc2V0ID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKG5leHRDb3VudCkgPT4ge1xuICAgICAgc2V0Q291bnQoKGMpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIgJiYgbmV4dENvdW50ID4gbWF4KSB7XG4gICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG1pbiA9PT0gXCJudW1iZXJcIiAmJiBuZXh0Q291bnQgPCBtaW4pIHtcbiAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0Q291bnQ7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFttYXgsIG1pbl1cbiAgKTtcblxuICBjb25zdCByZXNldCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRDb3VudChzdGFydGluZ1ZhbHVlKTtcbiAgfSwgW3N0YXJ0aW5nVmFsdWVdKTtcblxuICByZXR1cm4gW1xuICAgIGNvdW50LFxuICAgIHtcbiAgICAgIGluY3JlbWVudCxcbiAgICAgIGRlY3JlbWVudCxcbiAgICAgIHNldCxcbiAgICAgIHJlc2V0LFxuICAgIH0sXG4gIF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEZWJvdW5jZSh2YWx1ZSwgZGVsYXkpIHtcbiAgY29uc3QgW2RlYm91bmNlZFZhbHVlLCBzZXREZWJvdW5jZWRWYWx1ZV0gPSBSZWFjdC51c2VTdGF0ZSh2YWx1ZSk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXREZWJvdW5jZWRWYWx1ZSh2YWx1ZSk7XG4gICAgfSwgZGVsYXkpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChoYW5kbGVyKTtcbiAgICB9O1xuICB9LCBbdmFsdWUsIGRlbGF5XSk7XG5cbiAgcmV0dXJuIGRlYm91bmNlZFZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlRGVmYXVsdChpbml0aWFsVmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IFJlYWN0LnVzZVN0YXRlKGluaXRpYWxWYWx1ZSk7XG5cbiAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBzdGF0ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBbZGVmYXVsdFZhbHVlLCBzZXRTdGF0ZV07XG4gIH1cblxuICByZXR1cm4gW3N0YXRlLCBzZXRTdGF0ZV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEb2N1bWVudFRpdGxlKHRpdGxlKSB7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZG9jdW1lbnQudGl0bGUgPSB0aXRsZTtcbiAgfSwgW3RpdGxlXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VGYXZpY29uKHVybCkge1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgbGlua1tyZWx+PVwiaWNvblwiXWApO1xuXG4gICAgaWYgKCFsaW5rKSB7XG4gICAgICBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gICAgICBsaW5rLnR5cGUgPSBcImltYWdlL3gtaWNvblwiO1xuICAgICAgbGluay5yZWwgPSBcImljb25cIjtcbiAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICB9XG4gIH0sIFt1cmxdKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUdlb2xvY2F0aW9uKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICBsb2FkaW5nOiB0cnVlLFxuICAgIGFjY3VyYWN5OiBudWxsLFxuICAgIGFsdGl0dWRlOiBudWxsLFxuICAgIGFsdGl0dWRlQWNjdXJhY3k6IG51bGwsXG4gICAgaGVhZGluZzogbnVsbCxcbiAgICBsYXRpdHVkZTogbnVsbCxcbiAgICBsb25naXR1ZGU6IG51bGwsXG4gICAgc3BlZWQ6IG51bGwsXG4gICAgdGltZXN0YW1wOiBudWxsLFxuICAgIGVycm9yOiBudWxsLFxuICB9KTtcblxuICBjb25zdCBvcHRpb25zUmVmID0gUmVhY3QudXNlUmVmKG9wdGlvbnMpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgb25FdmVudCA9ICh7IGNvb3JkcywgdGltZXN0YW1wIH0pID0+IHtcbiAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgbGF0aXR1ZGU6IGNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgbG9uZ2l0dWRlOiBjb29yZHMubG9uZ2l0dWRlLFxuICAgICAgICBhbHRpdHVkZTogY29vcmRzLmFsdGl0dWRlLFxuICAgICAgICBhY2N1cmFjeTogY29vcmRzLmFjY3VyYWN5LFxuICAgICAgICBhbHRpdHVkZUFjY3VyYWN5OiBjb29yZHMuYWx0aXR1ZGVBY2N1cmFjeSxcbiAgICAgICAgaGVhZGluZzogY29vcmRzLmhlYWRpbmcsXG4gICAgICAgIHNwZWVkOiBjb29yZHMuc3BlZWQsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb25FdmVudEVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICBzZXRTdGF0ZSgocykgPT4gKHtcbiAgICAgICAgLi4ucyxcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yLFxuICAgICAgfSkpO1xuICAgIH07XG5cbiAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKFxuICAgICAgb25FdmVudCxcbiAgICAgIG9uRXZlbnRFcnJvcixcbiAgICAgIG9wdGlvbnNSZWYuY3VycmVudFxuICAgICk7XG5cbiAgICBjb25zdCB3YXRjaElkID0gbmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24oXG4gICAgICBvbkV2ZW50LFxuICAgICAgb25FdmVudEVycm9yLFxuICAgICAgb3B0aW9uc1JlZi5jdXJyZW50XG4gICAgKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uY2xlYXJXYXRjaCh3YXRjaElkKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHN0YXRlO1xufVxuXG5jb25zdCBpbml0aWFsVXNlSGlzdG9yeVN0YXRlU3RhdGUgPSB7XG4gIHBhc3Q6IFtdLFxuICBwcmVzZW50OiBudWxsLFxuICBmdXR1cmU6IFtdLFxufTtcblxuY29uc3QgdXNlSGlzdG9yeVN0YXRlUmVkdWNlciA9IChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gIGNvbnN0IHsgcGFzdCwgcHJlc2VudCwgZnV0dXJlIH0gPSBzdGF0ZTtcblxuICBpZiAoYWN0aW9uLnR5cGUgPT09IFwiVU5ET1wiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhc3Q6IHBhc3Quc2xpY2UoMCwgcGFzdC5sZW5ndGggLSAxKSxcbiAgICAgIHByZXNlbnQ6IHBhc3RbcGFzdC5sZW5ndGggLSAxXSxcbiAgICAgIGZ1dHVyZTogW3ByZXNlbnQsIC4uLmZ1dHVyZV0sXG4gICAgfTtcbiAgfSBlbHNlIGlmIChhY3Rpb24udHlwZSA9PT0gXCJSRURPXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcGFzdDogWy4uLnBhc3QsIHByZXNlbnRdLFxuICAgICAgcHJlc2VudDogZnV0dXJlWzBdLFxuICAgICAgZnV0dXJlOiBmdXR1cmUuc2xpY2UoMSksXG4gICAgfTtcbiAgfSBlbHNlIGlmIChhY3Rpb24udHlwZSA9PT0gXCJTRVRcIikge1xuICAgIGNvbnN0IHsgbmV3UHJlc2VudCB9ID0gYWN0aW9uO1xuXG4gICAgaWYgKGFjdGlvbi5uZXdQcmVzZW50ID09PSBwcmVzZW50KSB7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhc3Q6IFsuLi5wYXN0LCBwcmVzZW50XSxcbiAgICAgIHByZXNlbnQ6IG5ld1ByZXNlbnQsXG4gICAgICBmdXR1cmU6IFtdLFxuICAgIH07XG4gIH0gZWxzZSBpZiAoYWN0aW9uLnR5cGUgPT09IFwiQ0xFQVJcIikge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5pbml0aWFsVXNlSGlzdG9yeVN0YXRlU3RhdGUsXG4gICAgICBwcmVzZW50OiBhY3Rpb24uaW5pdGlhbFByZXNlbnQsXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBhY3Rpb24gdHlwZVwiKTtcbiAgfVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUhpc3RvcnlTdGF0ZShpbml0aWFsUHJlc2VudCA9IHt9KSB7XG4gIGNvbnN0IGluaXRpYWxQcmVzZW50UmVmID0gUmVhY3QudXNlUmVmKGluaXRpYWxQcmVzZW50KTtcblxuICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSA9IFJlYWN0LnVzZVJlZHVjZXIodXNlSGlzdG9yeVN0YXRlUmVkdWNlciwge1xuICAgIC4uLmluaXRpYWxVc2VIaXN0b3J5U3RhdGVTdGF0ZSxcbiAgICBwcmVzZW50OiBpbml0aWFsUHJlc2VudFJlZi5jdXJyZW50LFxuICB9KTtcblxuICBjb25zdCBjYW5VbmRvID0gc3RhdGUucGFzdC5sZW5ndGggIT09IDA7XG4gIGNvbnN0IGNhblJlZG8gPSBzdGF0ZS5mdXR1cmUubGVuZ3RoICE9PSAwO1xuXG4gIGNvbnN0IHVuZG8gPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGNhblVuZG8pIHtcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogXCJVTkRPXCIgfSk7XG4gICAgfVxuICB9LCBbY2FuVW5kb10pO1xuXG4gIGNvbnN0IHJlZG8gPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGNhblJlZG8pIHtcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogXCJSRURPXCIgfSk7XG4gICAgfVxuICB9LCBbY2FuUmVkb10pO1xuXG4gIGNvbnN0IHNldCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChuZXdQcmVzZW50KSA9PiBkaXNwYXRjaCh7IHR5cGU6IFwiU0VUXCIsIG5ld1ByZXNlbnQgfSksXG4gICAgW11cbiAgKTtcblxuICBjb25zdCBjbGVhciA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgICgpID0+XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6IFwiQ0xFQVJcIiwgaW5pdGlhbFByZXNlbnQ6IGluaXRpYWxQcmVzZW50UmVmLmN1cnJlbnQgfSksXG4gICAgW11cbiAgKTtcblxuICByZXR1cm4geyBzdGF0ZTogc3RhdGUucHJlc2VudCwgc2V0LCB1bmRvLCByZWRvLCBjbGVhciwgY2FuVW5kbywgY2FuUmVkbyB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlSG92ZXIoKSB7XG4gIGNvbnN0IFtob3ZlcmluZywgc2V0SG92ZXJpbmddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBwcmV2aW91c05vZGUgPSBSZWFjdC51c2VSZWYobnVsbCk7XG5cbiAgY29uc3QgaGFuZGxlTW91c2VFbnRlciA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRIb3ZlcmluZyh0cnVlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZU1vdXNlTGVhdmUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SG92ZXJpbmcoZmFsc2UpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY3VzdG9tUmVmID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKG5vZGUpID0+IHtcbiAgICAgIGlmIChwcmV2aW91c05vZGUuY3VycmVudD8ubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIHByZXZpb3VzTm9kZS5jdXJyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgXCJtb3VzZWVudGVyXCIsXG4gICAgICAgICAgaGFuZGxlTW91c2VFbnRlclxuICAgICAgICApO1xuICAgICAgICBwcmV2aW91c05vZGUuY3VycmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgIFwibW91c2VsZWF2ZVwiLFxuICAgICAgICAgIGhhbmRsZU1vdXNlTGVhdmVcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGU/Lm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIGhhbmRsZU1vdXNlRW50ZXIpO1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGhhbmRsZU1vdXNlTGVhdmUpO1xuICAgICAgfVxuXG4gICAgICBwcmV2aW91c05vZGUuY3VycmVudCA9IG5vZGU7XG4gICAgfSxcbiAgICBbaGFuZGxlTW91c2VFbnRlciwgaGFuZGxlTW91c2VMZWF2ZV1cbiAgKTtcblxuICByZXR1cm4gW2N1c3RvbVJlZiwgaG92ZXJpbmddO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlSWRsZShtcyA9IDEwMDAgKiA2MCkge1xuICBjb25zdCBbaWRsZSwgc2V0SWRsZV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgdGltZW91dElkO1xuXG4gICAgY29uc3QgaGFuZGxlVGltZW91dCA9ICgpID0+IHtcbiAgICAgIHNldElkbGUodHJ1ZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUV2ZW50ID0gdGhyb3R0bGUoKGUpID0+IHtcbiAgICAgIHNldElkbGUoZmFsc2UpO1xuXG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dChoYW5kbGVUaW1lb3V0LCBtcyk7XG4gICAgfSwgNTAwKTtcblxuICAgIGNvbnN0IGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBpZiAoIWRvY3VtZW50LmhpZGRlbikge1xuICAgICAgICBoYW5kbGVFdmVudCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dChoYW5kbGVUaW1lb3V0LCBtcyk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBoYW5kbGVFdmVudCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlRXZlbnQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZUV2ZW50KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXZlbnQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVFdmVudCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBoYW5kbGVFdmVudCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlRXZlbnQpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlRXZlbnQpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlRXZlbnQpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUV2ZW50KTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVFdmVudCk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIGhhbmRsZUV2ZW50KTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UpO1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH07XG4gIH0sIFttc10pO1xuXG4gIHJldHVybiBpZGxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHsgdGhyZXNob2xkID0gMSwgcm9vdCA9IG51bGwsIHJvb3RNYXJnaW4gPSBcIjBweFwiIH0gPSBvcHRpb25zO1xuICBjb25zdCBbZW50cnksIHNldEVudHJ5XSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpO1xuXG4gIGNvbnN0IHByZXZpb3VzT2JzZXJ2ZXIgPSBSZWFjdC51c2VSZWYobnVsbCk7XG5cbiAgY29uc3QgY3VzdG9tUmVmID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKG5vZGUpID0+IHtcbiAgICAgIGlmIChwcmV2aW91c09ic2VydmVyLmN1cnJlbnQpIHtcbiAgICAgICAgcHJldmlvdXNPYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgcHJldmlvdXNPYnNlcnZlci5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGU/Lm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAoW2VudHJ5XSkgPT4ge1xuICAgICAgICAgICAgc2V0RW50cnkoZW50cnkpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeyB0aHJlc2hvbGQsIHJvb3QsIHJvb3RNYXJnaW4gfVxuICAgICAgICApO1xuXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSk7XG4gICAgICAgIHByZXZpb3VzT2JzZXJ2ZXIuY3VycmVudCA9IG9ic2VydmVyO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3RocmVzaG9sZCwgcm9vdCwgcm9vdE1hcmdpbl1cbiAgKTtcblxuICByZXR1cm4gW2N1c3RvbVJlZiwgZW50cnldO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlSXNDbGllbnQoKSB7XG4gIGNvbnN0IFtpc0NsaWVudCwgc2V0SXNDbGllbnRdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0SXNDbGllbnQodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gaXNDbGllbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VJc0ZpcnN0UmVuZGVyKCkge1xuICBjb25zdCByZW5kZXJSZWYgPSBSZWFjdC51c2VSZWYodHJ1ZSk7XG5cbiAgaWYgKHJlbmRlclJlZi5jdXJyZW50ID09PSB0cnVlKSB7XG4gICAgcmVuZGVyUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiByZW5kZXJSZWYuY3VycmVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUxpc3QoZGVmYXVsdExpc3QgPSBbXSkge1xuICBjb25zdCBbbGlzdCwgc2V0TGlzdF0gPSBSZWFjdC51c2VTdGF0ZShkZWZhdWx0TGlzdCk7XG5cbiAgY29uc3Qgc2V0ID0gUmVhY3QudXNlQ2FsbGJhY2soKGwpID0+IHtcbiAgICBzZXRMaXN0KGwpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgcHVzaCA9IFJlYWN0LnVzZUNhbGxiYWNrKChlbGVtZW50KSA9PiB7XG4gICAgc2V0TGlzdCgobCkgPT4gWy4uLmwsIGVsZW1lbnRdKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHJlbW92ZUF0ID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4KSA9PiB7XG4gICAgc2V0TGlzdCgobCkgPT4gWy4uLmwuc2xpY2UoMCwgaW5kZXgpLCAuLi5sLnNsaWNlKGluZGV4ICsgMSldKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGluc2VydEF0ID0gUmVhY3QudXNlQ2FsbGJhY2soKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgc2V0TGlzdCgobCkgPT4gWy4uLmwuc2xpY2UoMCwgaW5kZXgpLCBlbGVtZW50LCAuLi5sLnNsaWNlKGluZGV4KV0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgdXBkYXRlQXQgPSBSZWFjdC51c2VDYWxsYmFjaygoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICBzZXRMaXN0KChsKSA9PiBsLm1hcCgoZSwgaSkgPT4gKGkgPT09IGluZGV4ID8gZWxlbWVudCA6IGUpKSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjbGVhciA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHNldExpc3QoW10pLCBbXSk7XG5cbiAgcmV0dXJuIFtsaXN0LCB7IHNldCwgcHVzaCwgcmVtb3ZlQXQsIGluc2VydEF0LCB1cGRhdGVBdCwgY2xlYXIgfV07XG59XG5cbmNvbnN0IHNldExvY2FsU3RvcmFnZUl0ZW0gPSAoa2V5LCB2YWx1ZSkgPT4ge1xuICBjb25zdCBzdHJpbmdpZmllZFZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBzdHJpbmdpZmllZFZhbHVlKTtcbiAgZGlzcGF0Y2hTdG9yYWdlRXZlbnQoa2V5LCBzdHJpbmdpZmllZFZhbHVlKTtcbn07XG5cbmNvbnN0IHJlbW92ZUxvY2FsU3RvcmFnZUl0ZW0gPSAoa2V5KSA9PiB7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICBkaXNwYXRjaFN0b3JhZ2VFdmVudChrZXksIG51bGwpO1xufTtcblxuY29uc3QgZ2V0TG9jYWxTdG9yYWdlSXRlbSA9IChrZXkpID0+IHtcbiAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xufTtcblxuY29uc3QgdXNlTG9jYWxTdG9yYWdlU3Vic2NyaWJlID0gKGNhbGxiYWNrKSA9PiB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBjYWxsYmFjayk7XG4gIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgY2FsbGJhY2spO1xufTtcblxuY29uc3QgZ2V0TG9jYWxTdG9yYWdlU2VydmVyU25hcHNob3QgPSAoKSA9PiB7XG4gIHRocm93IEVycm9yKFwidXNlTG9jYWxTdG9yYWdlIGlzIGEgY2xpZW50LW9ubHkgaG9va1wiKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VMb2NhbFN0b3JhZ2Uoa2V5LCBpbml0aWFsVmFsdWUpIHtcbiAgY29uc3QgZ2V0U25hcHNob3QgPSAoKSA9PiBnZXRMb2NhbFN0b3JhZ2VJdGVtKGtleSk7XG5cbiAgY29uc3Qgc3RvcmUgPSBSZWFjdC51c2VTeW5jRXh0ZXJuYWxTdG9yZShcbiAgICB1c2VMb2NhbFN0b3JhZ2VTdWJzY3JpYmUsXG4gICAgZ2V0U25hcHNob3QsXG4gICAgZ2V0TG9jYWxTdG9yYWdlU2VydmVyU25hcHNob3RcbiAgKTtcblxuICBjb25zdCBzZXRTdGF0ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgICh2KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXh0U3RhdGUgPSB0eXBlb2YgdiA9PT0gXCJmdW5jdGlvblwiID8gdihKU09OLnBhcnNlKHN0b3JlKSkgOiB2O1xuXG4gICAgICAgIGlmIChuZXh0U3RhdGUgPT09IHVuZGVmaW5lZCB8fCBuZXh0U3RhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICByZW1vdmVMb2NhbFN0b3JhZ2VJdGVtKGtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0TG9jYWxTdG9yYWdlSXRlbShrZXksIG5leHRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2tleSwgc3RvcmVdXG4gICk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoXG4gICAgICBnZXRMb2NhbFN0b3JhZ2VJdGVtKGtleSkgPT09IG51bGwgJiZcbiAgICAgIHR5cGVvZiBpbml0aWFsVmFsdWUgIT09IFwidW5kZWZpbmVkXCJcbiAgICApIHtcbiAgICAgIHNldExvY2FsU3RvcmFnZUl0ZW0oa2V5LCBpbml0aWFsVmFsdWUpO1xuICAgIH1cbiAgfSwgW2tleSwgaW5pdGlhbFZhbHVlXSk7XG5cbiAgcmV0dXJuIFtzdG9yZSA/IEpTT04ucGFyc2Uoc3RvcmUpIDogaW5pdGlhbFZhbHVlLCBzZXRTdGF0ZV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VMb2NrQm9keVNjcm9sbCgpIHtcbiAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkub3ZlcmZsb3c7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBvcmlnaW5hbFN0eWxlO1xuICAgIH07XG4gIH0sIFtdKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUxvbmdQcmVzcyhjYWxsYmFjaywgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHsgdGhyZXNob2xkID0gNDAwLCBvblN0YXJ0LCBvbkZpbmlzaCwgb25DYW5jZWwgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGlzTG9uZ1ByZXNzQWN0aXZlID0gUmVhY3QudXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgaXNQcmVzc2VkID0gUmVhY3QudXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgdGltZXJJZCA9IFJlYWN0LnVzZVJlZigpO1xuXG4gIHJldHVybiBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydCA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKCFpc01vdXNlRXZlbnQoZXZlbnQpICYmICFpc1RvdWNoRXZlbnQoZXZlbnQpKSByZXR1cm47XG5cbiAgICAgIGlmIChvblN0YXJ0KSB7XG4gICAgICAgIG9uU3RhcnQoZXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBpc1ByZXNzZWQuY3VycmVudCA9IHRydWU7XG4gICAgICB0aW1lcklkLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY2FsbGJhY2soZXZlbnQpO1xuICAgICAgICBpc0xvbmdQcmVzc0FjdGl2ZS5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIH0sIHRocmVzaG9sZCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNhbmNlbCA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKCFpc01vdXNlRXZlbnQoZXZlbnQpICYmICFpc1RvdWNoRXZlbnQoZXZlbnQpKSByZXR1cm47XG5cbiAgICAgIGlmIChpc0xvbmdQcmVzc0FjdGl2ZS5jdXJyZW50KSB7XG4gICAgICAgIGlmIChvbkZpbmlzaCkge1xuICAgICAgICAgIG9uRmluaXNoKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc1ByZXNzZWQuY3VycmVudCkge1xuICAgICAgICBpZiAob25DYW5jZWwpIHtcbiAgICAgICAgICBvbkNhbmNlbChldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaXNMb25nUHJlc3NBY3RpdmUuY3VycmVudCA9IGZhbHNlO1xuICAgICAgaXNQcmVzc2VkLmN1cnJlbnQgPSBmYWxzZTtcblxuICAgICAgaWYgKHRpbWVySWQuY3VycmVudCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVySWQuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG1vdXNlSGFuZGxlcnMgPSB7XG4gICAgICBvbk1vdXNlRG93bjogc3RhcnQsXG4gICAgICBvbk1vdXNlVXA6IGNhbmNlbCxcbiAgICAgIG9uTW91c2VMZWF2ZTogY2FuY2VsLFxuICAgIH07XG5cbiAgICBjb25zdCB0b3VjaEhhbmRsZXJzID0ge1xuICAgICAgb25Ub3VjaFN0YXJ0OiBzdGFydCxcbiAgICAgIG9uVG91Y2hFbmQ6IGNhbmNlbCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLm1vdXNlSGFuZGxlcnMsXG4gICAgICAuLi50b3VjaEhhbmRsZXJzLFxuICAgIH07XG4gIH0sIFtjYWxsYmFjaywgdGhyZXNob2xkLCBvbkNhbmNlbCwgb25GaW5pc2gsIG9uU3RhcnRdKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZU1hcChpbml0aWFsU3RhdGUpIHtcbiAgY29uc3QgbWFwUmVmID0gUmVhY3QudXNlUmVmKG5ldyBNYXAoaW5pdGlhbFN0YXRlKSk7XG4gIGNvbnN0IFssIHJlUmVuZGVyXSA9IFJlYWN0LnVzZVJlZHVjZXIoKHgpID0+IHggKyAxLCAwKTtcblxuICBtYXBSZWYuY3VycmVudC5zZXQgPSAoLi4uYXJncykgPT4ge1xuICAgIE1hcC5wcm90b3R5cGUuc2V0LmFwcGx5KG1hcFJlZi5jdXJyZW50LCBhcmdzKTtcbiAgICByZVJlbmRlcigpO1xuICAgIHJldHVybiBtYXBSZWYuY3VycmVudDtcbiAgfTtcblxuICBtYXBSZWYuY3VycmVudC5jbGVhciA9ICguLi5hcmdzKSA9PiB7XG4gICAgTWFwLnByb3RvdHlwZS5jbGVhci5hcHBseShtYXBSZWYuY3VycmVudCwgYXJncyk7XG4gICAgcmVSZW5kZXIoKTtcbiAgfTtcblxuICBtYXBSZWYuY3VycmVudC5kZWxldGUgPSAoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IE1hcC5wcm90b3R5cGUuZGVsZXRlLmFwcGx5KG1hcFJlZi5jdXJyZW50LCBhcmdzKTtcbiAgICByZVJlbmRlcigpO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfTtcblxuICByZXR1cm4gbWFwUmVmLmN1cnJlbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VNZWFzdXJlKCkge1xuICBjb25zdCBbZGltZW5zaW9ucywgc2V0RGltZW5zaW9uc10gPSBSZWFjdC51c2VTdGF0ZSh7XG4gICAgd2lkdGg6IG51bGwsXG4gICAgaGVpZ2h0OiBudWxsLFxuICB9KTtcblxuICBjb25zdCBwcmV2aW91c09ic2VydmVyID0gUmVhY3QudXNlUmVmKG51bGwpO1xuXG4gIGNvbnN0IGN1c3RvbVJlZiA9IFJlYWN0LnVzZUNhbGxiYWNrKChub2RlKSA9PiB7XG4gICAgaWYgKHByZXZpb3VzT2JzZXJ2ZXIuY3VycmVudCkge1xuICAgICAgcHJldmlvdXNPYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgIHByZXZpb3VzT2JzZXJ2ZXIuY3VycmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKG5vZGU/Lm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKFtlbnRyeV0pID0+IHtcbiAgICAgICAgaWYgKGVudHJ5ICYmIGVudHJ5LmJvcmRlckJveFNpemUpIHtcbiAgICAgICAgICBjb25zdCB7IGlubGluZVNpemU6IHdpZHRoLCBibG9ja1NpemU6IGhlaWdodCB9ID1cbiAgICAgICAgICAgIGVudHJ5LmJvcmRlckJveFNpemVbMF07XG5cbiAgICAgICAgICBzZXREaW1lbnNpb25zKHsgd2lkdGgsIGhlaWdodCB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSk7XG4gICAgICBwcmV2aW91c09ic2VydmVyLmN1cnJlbnQgPSBvYnNlcnZlcjtcbiAgICB9XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW2N1c3RvbVJlZiwgZGltZW5zaW9uc107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VNZWRpYVF1ZXJ5KHF1ZXJ5KSB7XG4gIGNvbnN0IHN1YnNjcmliZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChjYWxsYmFjaykgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hNZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhKHF1ZXJ5KTtcblxuICAgICAgbWF0Y2hNZWRpYS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNhbGxiYWNrKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIG1hdGNoTWVkaWEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjYWxsYmFjayk7XG4gICAgICB9O1xuICAgIH0sXG4gICAgW3F1ZXJ5XVxuICApO1xuXG4gIGNvbnN0IGdldFNuYXBzaG90ID0gKCkgPT4ge1xuICAgIHJldHVybiB3aW5kb3cubWF0Y2hNZWRpYShxdWVyeSkubWF0Y2hlcztcbiAgfTtcblxuICBjb25zdCBnZXRTZXJ2ZXJTbmFwc2hvdCA9ICgpID0+IHtcbiAgICB0aHJvdyBFcnJvcihcInVzZU1lZGlhUXVlcnkgaXMgYSBjbGllbnQtb25seSBob29rXCIpO1xuICB9O1xuXG4gIHJldHVybiBSZWFjdC51c2VTeW5jRXh0ZXJuYWxTdG9yZShzdWJzY3JpYmUsIGdldFNuYXBzaG90LCBnZXRTZXJ2ZXJTbmFwc2hvdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VNb3VzZSgpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSBSZWFjdC51c2VTdGF0ZSh7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIGVsZW1lbnRYOiAwLFxuICAgIGVsZW1lbnRZOiAwLFxuICAgIGVsZW1lbnRQb3NpdGlvblg6IDAsXG4gICAgZWxlbWVudFBvc2l0aW9uWTogMCxcbiAgfSk7XG5cbiAgY29uc3QgcmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuXG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGV2ZW50KSA9PiB7XG4gICAgICBsZXQgbmV3U3RhdGUgPSB7XG4gICAgICAgIHg6IGV2ZW50LnBhZ2VYLFxuICAgICAgICB5OiBldmVudC5wYWdlWSxcbiAgICAgIH07XG5cbiAgICAgIGlmIChyZWYuY3VycmVudD8ubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIGNvbnN0IHsgbGVmdCwgdG9wIH0gPSByZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgZWxlbWVudFBvc2l0aW9uWCA9IGxlZnQgKyB3aW5kb3cuc2Nyb2xsWDtcbiAgICAgICAgY29uc3QgZWxlbWVudFBvc2l0aW9uWSA9IHRvcCArIHdpbmRvdy5zY3JvbGxZO1xuICAgICAgICBjb25zdCBlbGVtZW50WCA9IGV2ZW50LnBhZ2VYIC0gZWxlbWVudFBvc2l0aW9uWDtcbiAgICAgICAgY29uc3QgZWxlbWVudFkgPSBldmVudC5wYWdlWSAtIGVsZW1lbnRQb3NpdGlvblk7XG5cbiAgICAgICAgbmV3U3RhdGUuZWxlbWVudFggPSBlbGVtZW50WDtcbiAgICAgICAgbmV3U3RhdGUuZWxlbWVudFkgPSBlbGVtZW50WTtcbiAgICAgICAgbmV3U3RhdGUuZWxlbWVudFBvc2l0aW9uWCA9IGVsZW1lbnRQb3NpdGlvblg7XG4gICAgICAgIG5ld1N0YXRlLmVsZW1lbnRQb3NpdGlvblkgPSBlbGVtZW50UG9zaXRpb25ZO1xuICAgICAgfVxuXG4gICAgICBzZXRTdGF0ZSgocykgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnMsXG4gICAgICAgICAgLi4ubmV3U3RhdGUsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBoYW5kbGVNb3VzZU1vdmUpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlTW91c2VNb3ZlKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtzdGF0ZSwgcmVmXTtcbn1cblxuY29uc3QgZ2V0Q29ubmVjdGlvbiA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICBuYXZpZ2F0b3I/LmNvbm5lY3Rpb24gfHxcbiAgICBuYXZpZ2F0b3I/Lm1vekNvbm5lY3Rpb24gfHxcbiAgICBuYXZpZ2F0b3I/LndlYmtpdENvbm5lY3Rpb25cbiAgKTtcbn07XG5cbmNvbnN0IHVzZU5ldHdvcmtTdGF0ZVN1YnNjcmliZSA9IChjYWxsYmFjaykgPT4ge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCBjYWxsYmFjaywgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgY2FsbGJhY2ssIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblxuICBjb25zdCBjb25uZWN0aW9uID0gZ2V0Q29ubmVjdGlvbigpO1xuXG4gIGlmIChjb25uZWN0aW9uKSB7XG4gICAgY29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNhbGxiYWNrLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gIH1cblxuICByZXR1cm4gKCkgPT4ge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIGNhbGxiYWNrKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgY2FsbGJhY2spO1xuXG4gICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgIGNvbm5lY3Rpb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjYWxsYmFjayk7XG4gICAgfVxuICB9O1xufTtcblxuY29uc3QgZ2V0TmV0d29ya1N0YXRlU2VydmVyU25hcHNob3QgPSAoKSA9PiB7XG4gIHRocm93IEVycm9yKFwidXNlTmV0d29ya1N0YXRlIGlzIGEgY2xpZW50LW9ubHkgaG9va1wiKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VOZXR3b3JrU3RhdGUoKSB7XG4gIGNvbnN0IGNhY2hlID0gUmVhY3QudXNlUmVmKHt9KTtcblxuICBjb25zdCBnZXRTbmFwc2hvdCA9ICgpID0+IHtcbiAgICBjb25zdCBvbmxpbmUgPSBuYXZpZ2F0b3Iub25MaW5lO1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBnZXRDb25uZWN0aW9uKCk7XG5cbiAgICBjb25zdCBuZXh0U3RhdGUgPSB7XG4gICAgICBvbmxpbmUsXG4gICAgICBkb3dubGluazogY29ubmVjdGlvbj8uZG93bmxpbmssXG4gICAgICBkb3dubGlua01heDogY29ubmVjdGlvbj8uZG93bmxpbmtNYXgsXG4gICAgICBlZmZlY3RpdmVUeXBlOiBjb25uZWN0aW9uPy5lZmZlY3RpdmVUeXBlLFxuICAgICAgcnR0OiBjb25uZWN0aW9uPy5ydHQsXG4gICAgICBzYXZlRGF0YTogY29ubmVjdGlvbj8uc2F2ZURhdGEsXG4gICAgICB0eXBlOiBjb25uZWN0aW9uPy50eXBlLFxuICAgIH07XG5cbiAgICBpZiAoaXNTaGFsbG93RXF1YWwoY2FjaGUuY3VycmVudCwgbmV4dFN0YXRlKSkge1xuICAgICAgcmV0dXJuIGNhY2hlLmN1cnJlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhY2hlLmN1cnJlbnQgPSBuZXh0U3RhdGU7XG4gICAgICByZXR1cm4gbmV4dFN0YXRlO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gUmVhY3QudXNlU3luY0V4dGVybmFsU3RvcmUoXG4gICAgdXNlTmV0d29ya1N0YXRlU3Vic2NyaWJlLFxuICAgIGdldFNuYXBzaG90LFxuICAgIGdldE5ldHdvcmtTdGF0ZVNlcnZlclNuYXBzaG90XG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VPYmplY3RTdGF0ZShpbml0aWFsVmFsdWUpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSBSZWFjdC51c2VTdGF0ZShpbml0aWFsVmFsdWUpO1xuXG4gIGNvbnN0IGhhbmRsZVVwZGF0ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChhcmcpID0+IHtcbiAgICBpZiAodHlwZW9mIGFyZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBzZXRTdGF0ZSgocykgPT4ge1xuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IGFyZyhzKTtcblxuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChuZXdTdGF0ZSkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucyxcbiAgICAgICAgICAgIC4uLm5ld1N0YXRlLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChpc1BsYWluT2JqZWN0KGFyZykpIHtcbiAgICAgIHNldFN0YXRlKChzKSA9PiAoe1xuICAgICAgICAuLi5zLFxuICAgICAgICAuLi5hcmcsXG4gICAgICB9KSk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtzdGF0ZSwgaGFuZGxlVXBkYXRlXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZU9yaWVudGF0aW9uKCkge1xuICBjb25zdCBbb3JpZW50YXRpb24sIHNldE9yaWVudGF0aW9uXSA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICBhbmdsZTogMCxcbiAgICB0eXBlOiBcImxhbmRzY2FwZS1wcmltYXJ5XCIsXG4gIH0pO1xuXG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgY29uc3QgeyBhbmdsZSwgdHlwZSB9ID0gd2luZG93LnNjcmVlbi5vcmllbnRhdGlvbjtcbiAgICAgIHNldE9yaWVudGF0aW9uKHtcbiAgICAgICAgYW5nbGUsXG4gICAgICAgIHR5cGUsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlX29yaWVudGF0aW9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgc2V0T3JpZW50YXRpb24oe1xuICAgICAgICB0eXBlOiBcIlVOS05PV05cIixcbiAgICAgICAgYW5nbGU6IHdpbmRvdy5vcmllbnRhdGlvbixcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAod2luZG93LnNjcmVlbj8ub3JpZW50YXRpb24pIHtcbiAgICAgIGhhbmRsZUNoYW5nZSgpO1xuICAgICAgd2luZG93LnNjcmVlbi5vcmllbnRhdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZUNoYW5nZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbmRsZV9vcmllbnRhdGlvbmNoYW5nZSgpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBoYW5kbGVfb3JpZW50YXRpb25jaGFuZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAod2luZG93LnNjcmVlbj8ub3JpZW50YXRpb24pIHtcbiAgICAgICAgd2luZG93LnNjcmVlbi5vcmllbnRhdGlvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZUNoYW5nZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBcIm9yaWVudGF0aW9uY2hhbmdlXCIsXG4gICAgICAgICAgaGFuZGxlX29yaWVudGF0aW9uY2hhbmdlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBvcmllbnRhdGlvbjtcbn1cblxuY29uc3QgdXNlUHJlZmVycmVkTGFuZ3VhZ2VTdWJzY3JpYmUgPSAoY2IpID0+IHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsYW5ndWFnZWNoYW5nZVwiLCBjYik7XG4gIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxhbmd1YWdlY2hhbmdlXCIsIGNiKTtcbn07XG5cbmNvbnN0IGdldFByZWZlcnJlZExhbmd1YWdlU25hcHNob3QgPSAoKSA9PiB7XG4gIHJldHVybiBuYXZpZ2F0b3IubGFuZ3VhZ2U7XG59O1xuXG5jb25zdCBnZXRQcmVmZXJyZWRMYW5ndWFnZVNlcnZlclNuYXBzaG90ID0gKCkgPT4ge1xuICB0aHJvdyBFcnJvcihcInVzZVByZWZlcnJlZExhbmd1YWdlIGlzIGEgY2xpZW50LW9ubHkgaG9va1wiKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcmVmZXJyZWRMYW5ndWFnZSgpIHtcbiAgcmV0dXJuIFJlYWN0LnVzZVN5bmNFeHRlcm5hbFN0b3JlKFxuICAgIHVzZVByZWZlcnJlZExhbmd1YWdlU3Vic2NyaWJlLFxuICAgIGdldFByZWZlcnJlZExhbmd1YWdlU25hcHNob3QsXG4gICAgZ2V0UHJlZmVycmVkTGFuZ3VhZ2VTZXJ2ZXJTbmFwc2hvdFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlUHJldmlvdXModmFsdWUpIHtcbiAgY29uc3QgW2N1cnJlbnQsIHNldEN1cnJlbnRdID0gUmVhY3QudXNlU3RhdGUodmFsdWUpO1xuICBjb25zdCBbcHJldmlvdXMsIHNldFByZXZpb3VzXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpO1xuXG4gIGlmICh2YWx1ZSAhPT0gY3VycmVudCkge1xuICAgIHNldFByZXZpb3VzKGN1cnJlbnQpO1xuICAgIHNldEN1cnJlbnQodmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHByZXZpb3VzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlUXVldWUoaW5pdGlhbFZhbHVlID0gW10pIHtcbiAgY29uc3QgW3F1ZXVlLCBzZXRRdWV1ZV0gPSBSZWFjdC51c2VTdGF0ZShpbml0aWFsVmFsdWUpO1xuXG4gIGNvbnN0IGFkZCA9IFJlYWN0LnVzZUNhbGxiYWNrKChlbGVtZW50KSA9PiB7XG4gICAgc2V0UXVldWUoKHEpID0+IFsuLi5xLCBlbGVtZW50XSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCByZW1vdmUgPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgbGV0IHJlbW92ZWRFbGVtZW50O1xuXG4gICAgc2V0UXVldWUoKFtmaXJzdCwgLi4ucV0pID0+IHtcbiAgICAgIHJlbW92ZWRFbGVtZW50ID0gZmlyc3Q7XG4gICAgICByZXR1cm4gcTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZW1vdmVkRWxlbWVudDtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNsZWFyID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFF1ZXVlKFtdKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgYWRkLFxuICAgIHJlbW92ZSxcbiAgICBjbGVhcixcbiAgICBmaXJzdDogcXVldWVbMF0sXG4gICAgbGFzdDogcXVldWVbcXVldWUubGVuZ3RoIC0gMV0sXG4gICAgc2l6ZTogcXVldWUubGVuZ3RoLFxuICAgIHF1ZXVlLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlUmVuZGVyQ291bnQoKSB7XG4gIGNvbnN0IGNvdW50ID0gUmVhY3QudXNlUmVmKDApO1xuXG4gIGNvdW50LmN1cnJlbnQrKztcblxuICByZXR1cm4gY291bnQuY3VycmVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVJlbmRlckluZm8obmFtZSA9IFwiVW5rbm93blwiKSB7XG4gIGNvbnN0IGNvdW50ID0gUmVhY3QudXNlUmVmKDApO1xuICBjb25zdCBsYXN0UmVuZGVyID0gUmVhY3QudXNlUmVmKCk7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgY291bnQuY3VycmVudCsrO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGFzdFJlbmRlci5jdXJyZW50ID0gRGF0ZS5ub3coKTtcbiAgfSk7XG5cbiAgY29uc3Qgc2luY2VMYXN0UmVuZGVyID0gbGFzdFJlbmRlci5jdXJyZW50ID8gbm93IC0gbGFzdFJlbmRlci5jdXJyZW50IDogMDtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgY29uc3QgaW5mbyA9IHtcbiAgICAgIG5hbWUsXG4gICAgICByZW5kZXJzOiBjb3VudC5jdXJyZW50LFxuICAgICAgc2luY2VMYXN0UmVuZGVyLFxuICAgICAgdGltZXN0YW1wOiBub3csXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKGluZm8pO1xuXG4gICAgcmV0dXJuIGluZm87XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVNjcmlwdChzcmMsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gUmVhY3QudXNlU3RhdGUoXCJsb2FkaW5nXCIpO1xuICBjb25zdCBvcHRpb25zUmVmID0gUmVhY3QudXNlUmVmKG9wdGlvbnMpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHNjcmlwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFtzcmM9XCIke3NyY31cIl1gKTtcblxuICAgIGNvbnN0IGRvbVN0YXR1cyA9IHNjcmlwdD8uZ2V0QXR0cmlidXRlKFwiZGF0YS1zdGF0dXNcIik7XG4gICAgaWYgKGRvbVN0YXR1cykge1xuICAgICAgc2V0U3RhdHVzKGRvbVN0YXR1cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNjcmlwdCA9PT0gbnVsbCkge1xuICAgICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgIHNjcmlwdC5zcmMgPSBzcmM7XG4gICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZShcImRhdGEtc3RhdHVzXCIsIFwibG9hZGluZ1wiKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblxuICAgICAgY29uc3QgaGFuZGxlU2NyaXB0TG9hZCA9ICgpID0+IHtcbiAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZShcImRhdGEtc3RhdHVzXCIsIFwicmVhZHlcIik7XG4gICAgICAgIHNldFN0YXR1cyhcInJlYWR5XCIpO1xuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgaGFuZGxlU2NyaXB0RXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0YXR1c1wiLCBcImVycm9yXCIpO1xuICAgICAgICBzZXRTdGF0dXMoXCJlcnJvclwiKTtcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlbW92ZUV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICBzY3JpcHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaGFuZGxlU2NyaXB0TG9hZCk7XG4gICAgICAgIHNjcmlwdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgaGFuZGxlU2NyaXB0RXJyb3IpO1xuICAgICAgfTtcblxuICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGhhbmRsZVNjcmlwdExvYWQpO1xuICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBoYW5kbGVTY3JpcHRFcnJvcik7XG5cbiAgICAgIGNvbnN0IHJlbW92ZU9uVW5tb3VudCA9IG9wdGlvbnNSZWYuY3VycmVudC5yZW1vdmVPblVubW91bnQ7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChyZW1vdmVPblVubW91bnQgPT09IHRydWUpIHtcbiAgICAgICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U3RhdHVzKFwidW5rbm93blwiKTtcbiAgICB9XG4gIH0sIFtzcmNdKTtcblxuICByZXR1cm4gc3RhdHVzO1xufVxuXG5jb25zdCBzZXRTZXNzaW9uU3RvcmFnZUl0ZW0gPSAoa2V5LCB2YWx1ZSkgPT4ge1xuICBjb25zdCBzdHJpbmdpZmllZFZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShrZXksIHN0cmluZ2lmaWVkVmFsdWUpO1xuICBkaXNwYXRjaFN0b3JhZ2VFdmVudChrZXksIHN0cmluZ2lmaWVkVmFsdWUpO1xufTtcblxuY29uc3QgcmVtb3ZlU2Vzc2lvblN0b3JhZ2VJdGVtID0gKGtleSkgPT4ge1xuICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICBkaXNwYXRjaFN0b3JhZ2VFdmVudChrZXksIG51bGwpO1xufTtcblxuY29uc3QgZ2V0U2Vzc2lvblN0b3JhZ2VJdGVtID0gKGtleSkgPT4ge1xuICByZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KTtcbn07XG5cbmNvbnN0IHVzZVNlc3Npb25TdG9yYWdlU3Vic2NyaWJlID0gKGNhbGxiYWNrKSA9PiB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBjYWxsYmFjayk7XG4gIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgY2FsbGJhY2spO1xufTtcblxuY29uc3QgZ2V0U2Vzc2lvblN0b3JhZ2VTZXJ2ZXJTbmFwc2hvdCA9ICgpID0+IHtcbiAgdGhyb3cgRXJyb3IoXCJ1c2VTZXNzaW9uU3RvcmFnZSBpcyBhIGNsaWVudC1vbmx5IGhvb2tcIik7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2Vzc2lvblN0b3JhZ2Uoa2V5LCBpbml0aWFsVmFsdWUpIHtcbiAgY29uc3QgZ2V0U25hcHNob3QgPSAoKSA9PiBnZXRTZXNzaW9uU3RvcmFnZUl0ZW0oa2V5KTtcblxuICBjb25zdCBzdG9yZSA9IFJlYWN0LnVzZVN5bmNFeHRlcm5hbFN0b3JlKFxuICAgIHVzZVNlc3Npb25TdG9yYWdlU3Vic2NyaWJlLFxuICAgIGdldFNuYXBzaG90LFxuICAgIGdldFNlc3Npb25TdG9yYWdlU2VydmVyU25hcHNob3RcbiAgKTtcblxuICBjb25zdCBzZXRTdGF0ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgICh2KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXh0U3RhdGUgPSB0eXBlb2YgdiA9PT0gXCJmdW5jdGlvblwiID8gdihKU09OLnBhcnNlKHN0b3JlKSkgOiB2O1xuXG4gICAgICAgIGlmIChuZXh0U3RhdGUgPT09IHVuZGVmaW5lZCB8fCBuZXh0U3RhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICByZW1vdmVTZXNzaW9uU3RvcmFnZUl0ZW0oa2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRTZXNzaW9uU3RvcmFnZUl0ZW0oa2V5LCBuZXh0U3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtrZXksIHN0b3JlXVxuICApO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKFxuICAgICAgZ2V0U2Vzc2lvblN0b3JhZ2VJdGVtKGtleSkgPT09IG51bGwgJiZcbiAgICAgIHR5cGVvZiBpbml0aWFsVmFsdWUgIT09IFwidW5kZWZpbmVkXCJcbiAgICApIHtcbiAgICAgIHNldFNlc3Npb25TdG9yYWdlSXRlbShrZXksIGluaXRpYWxWYWx1ZSk7XG4gICAgfVxuICB9LCBba2V5LCBpbml0aWFsVmFsdWVdKTtcblxuICByZXR1cm4gW3N0b3JlID8gSlNPTi5wYXJzZShzdG9yZSkgOiBpbml0aWFsVmFsdWUsIHNldFN0YXRlXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVNldCh2YWx1ZXMpIHtcbiAgY29uc3Qgc2V0UmVmID0gUmVhY3QudXNlUmVmKG5ldyBTZXQodmFsdWVzKSk7XG4gIGNvbnN0IFssIHJlUmVuZGVyXSA9IFJlYWN0LnVzZVJlZHVjZXIoKHgpID0+IHggKyAxLCAwKTtcblxuICBzZXRSZWYuY3VycmVudC5hZGQgPSAoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IFNldC5wcm90b3R5cGUuYWRkLmFwcGx5KHNldFJlZi5jdXJyZW50LCBhcmdzKTtcbiAgICByZVJlbmRlcigpO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfTtcblxuICBzZXRSZWYuY3VycmVudC5jbGVhciA9ICguLi5hcmdzKSA9PiB7XG4gICAgU2V0LnByb3RvdHlwZS5jbGVhci5hcHBseShzZXRSZWYuY3VycmVudCwgYXJncyk7XG4gICAgcmVSZW5kZXIoKTtcbiAgfTtcblxuICBzZXRSZWYuY3VycmVudC5kZWxldGUgPSAoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IFNldC5wcm90b3R5cGUuZGVsZXRlLmFwcGx5KHNldFJlZi5jdXJyZW50LCBhcmdzKTtcbiAgICByZVJlbmRlcigpO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfTtcblxuICByZXR1cm4gc2V0UmVmLmN1cnJlbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VUaHJvdHRsZSh2YWx1ZSwgaW50ZXJ2YWwgPSA1MDApIHtcbiAgY29uc3QgW3Rocm90dGxlZFZhbHVlLCBzZXRUaHJvdHRsZWRWYWx1ZV0gPSBSZWFjdC51c2VTdGF0ZSh2YWx1ZSk7XG4gIGNvbnN0IGxhc3RVcGRhdGVkID0gUmVhY3QudXNlUmVmKG51bGwpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIGlmIChsYXN0VXBkYXRlZC5jdXJyZW50ICYmIG5vdyA+PSBsYXN0VXBkYXRlZC5jdXJyZW50ICsgaW50ZXJ2YWwpIHtcbiAgICAgIGxhc3RVcGRhdGVkLmN1cnJlbnQgPSBub3c7XG4gICAgICBzZXRUaHJvdHRsZWRWYWx1ZSh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGlkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBsYXN0VXBkYXRlZC5jdXJyZW50ID0gbm93O1xuICAgICAgICBzZXRUaHJvdHRsZWRWYWx1ZSh2YWx1ZSk7XG4gICAgICB9LCBpbnRlcnZhbCk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB3aW5kb3cuY2xlYXJUaW1lb3V0KGlkKTtcbiAgICB9XG4gIH0sIFt2YWx1ZSwgaW50ZXJ2YWxdKTtcblxuICByZXR1cm4gdGhyb3R0bGVkVmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VUb2dnbGUoaW5pdGlhbFZhbHVlKSB7XG4gIGNvbnN0IFtvbiwgc2V0T25dID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgaW5pdGlhbFZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gQm9vbGVhbihpbml0aWFsVmFsdWUpO1xuICB9KTtcblxuICBjb25zdCBoYW5kbGVUb2dnbGUgPSBSZWFjdC51c2VDYWxsYmFjaygodmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgcmV0dXJuIHNldE9uKHZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2V0T24oKHYpID0+ICF2KTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbb24sIGhhbmRsZVRvZ2dsZV07XG59XG5cbmNvbnN0IHVzZVZpc2liaWxpdHlDaGFuZ2VTdWJzY3JpYmUgPSAoY2FsbGJhY2spID0+IHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgY2FsbGJhY2spO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgY2FsbGJhY2spO1xuICB9O1xufTtcblxuY29uc3QgZ2V0VmlzaWJpbGl0eUNoYW5nZVNuYXBzaG90ID0gKCkgPT4ge1xuICByZXR1cm4gZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlO1xufTtcblxuY29uc3QgZ2V0VmlzaWJpbGl0eUNoYW5nZVNlcnZlclNuYXBzaG90ID0gKCkgPT4ge1xuICB0aHJvdyBFcnJvcihcInVzZVZpc2liaWxpdHlDaGFuZ2UgaXMgYSBjbGllbnQtb25seSBob29rXCIpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVZpc2liaWxpdHlDaGFuZ2UoKSB7XG4gIGNvbnN0IHZpc2liaWxpdHlTdGF0ZSA9IFJlYWN0LnVzZVN5bmNFeHRlcm5hbFN0b3JlKFxuICAgIHVzZVZpc2liaWxpdHlDaGFuZ2VTdWJzY3JpYmUsXG4gICAgZ2V0VmlzaWJpbGl0eUNoYW5nZVNuYXBzaG90LFxuICAgIGdldFZpc2liaWxpdHlDaGFuZ2VTZXJ2ZXJTbmFwc2hvdFxuICApO1xuXG4gIHJldHVybiB2aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlV2luZG93U2Nyb2xsKCkge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICB4OiBudWxsLFxuICAgIHk6IG51bGwsXG4gIH0pO1xuXG4gIGNvbnN0IHNjcm9sbFRvID0gUmVhY3QudXNlQ2FsbGJhY2soKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHdpbmRvdy5zY3JvbGxUbyhhcmdzWzBdKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmdzWzBdID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBhcmdzWzFdID09PSBcIm51bWJlclwiKSB7XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBzY3JvbGxUby4gU2VlIGhlcmUgZm9yIG1vcmUgaW5mby4gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvdy9zY3JvbGxUb2BcbiAgICAgICk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVTY3JvbGwgPSAoKSA9PiB7XG4gICAgICBzZXRTdGF0ZSh7IHg6IHdpbmRvdy5zY3JvbGxYLCB5OiB3aW5kb3cuc2Nyb2xsWSB9KTtcbiAgICB9O1xuXG4gICAgaGFuZGxlU2Nyb2xsKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW3N0YXRlLCBzY3JvbGxUb107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VXaW5kb3dTaXplKCkge1xuICBjb25zdCBbc2l6ZSwgc2V0U2l6ZV0gPSBSZWFjdC51c2VTdGF0ZSh7XG4gICAgd2lkdGg6IG51bGwsXG4gICAgaGVpZ2h0OiBudWxsLFxuICB9KTtcblxuICBSZWFjdC51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIHNldFNpemUoe1xuICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGhhbmRsZVJlc2l6ZSgpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHNpemU7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/@uidotdev+usehooks@2.4.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@uidotdev/usehooks/index.js\n"));

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["main-app"], function() { return __webpack_exec__("(app-pages-browser)/./node_modules/.pnpm/next@14.2.33_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fandreamagazzini%2Fdev%2Fcooperativa-agricola-dei-colli%2Fsrc%2Fapp%2F%5Blocale%5D%2Fstory%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);